[{"__type__":"cc.EffectAsset","_name":"../resources/Effects/avatar_efc","techniques":[{"passes":[{"blendState":{"targets":[{"blend":true,"blendSrc":2,"blendDst":4,"blendDstAlpha":4}]},"rasterizerState":{"cullMode":0},"program":"../resources/Effects/avatar_efc|sprite-vs:vert|sprite-fs:frag","depthStencilState":{"depthTest":false,"depthWrite":false},"properties":{"precent":{"value":[100],"type":13},"borderColor":{"value":[1,1,1,1],"type":16},"borderWidth":{"value":[0.1],"type":13}}}]}],"shaders":[{"hash":82348205,"glsl3":{"vert":"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n};\nin vec3 a_position;\nin vec2 a_texCoord;\nin vec4 a_color;\nout vec4 color;\nout vec2 uv0;\nvec4 vert () {\n  vec4 pos = vec4(a_position, 1);\n  pos = cc_matViewProj * pos;\n  uv0 = a_texCoord;\n  color = a_color;\n  return pos;\n}\nvoid main() { gl_Position = vert(); }","frag":"\nprecision highp float;\nvec4 CCSampleTexture(sampler2D tex, vec2 uv) {\n#if CC_USE_EMBEDDED_ALPHA\n    return vec4(texture(tex, uv).rgb, texture(tex, uv + vec2(0.0, 0.5)).r);\n#else\n    return texture(tex, uv);\n#endif\n}\nlayout(std140) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n};\nin vec4 color;\nin vec2 uv0;\nuniform sampler2D cc_spriteTexture;\nlayout(std140) uniform Constant {\n  vec4 borderColor;\n  float precent;\n  float borderWidth;\n};\nvec4 frag () {\n  vec4 o = vec4(1, 1, 1, 1);\n  vec4 h = vec4(.0, .0, .0, 1);\n  float pi = 3.1415926;\n  #if USE_TEXTURE\n    o *= CCSampleTexture(cc_spriteTexture, uv0);\n  #endif\n  vec2 center = vec2(.5, .5);\n  float radius = .5;\n  float dy = uv0.y - center.y;\n  float dx = uv0.x - center.x;\n  float dis = sqrt(pow(uv0.x - center.x, 2.) + pow(uv0.y - center.y, 2.));\n  if(dis > radius) {\n    o.a = .0;\n  }\n  if(precent < 100.) {\n    float tan0 = atan(dy, dx);\n    float ang =(tan0 + pi*.5)/pi * 180.;\n    o *= color;\n    float te = mod(precent, 100.) * 3.6;\n    float gray  = 0.2126 * o.r + 0.7152 * o.g + 0.0722 * o.b;\n    if(mod(ang, 360.) > te && mod(ang, 360.) <= 360.) {\n      o.r = o.g = o.b = gray;\n    }\n  }\n  if( dis < 1. && dis > .5*(1. - borderWidth)) {\n    o.xyz = mix(o.xyz, h.xyz, .5);\n  }\n  return o;\n}\nout vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},"glsl1":{"vert":"\nprecision highp float;\nuniform highp mat4 cc_matViewProj;\nattribute vec3 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec4 color;\nvarying vec2 uv0;\nvec4 vert () {\n  vec4 pos = vec4(a_position, 1);\n  pos = cc_matViewProj * pos;\n  uv0 = a_texCoord;\n  color = a_color;\n  return pos;\n}\nvoid main() { gl_Position = vert(); }","frag":"\nprecision highp float;\nvec4 CCSampleTexture(sampler2D tex, vec2 uv) {\n#if CC_USE_EMBEDDED_ALPHA\n    return vec4(texture2D(tex, uv).rgb, texture2D(tex, uv + vec2(0.0, 0.5)).r);\n#else\n    return texture2D(tex, uv);\n#endif\n}\nvarying vec4 color;\nvarying vec2 uv0;\nuniform sampler2D cc_spriteTexture;\nuniform float precent;\nuniform float borderWidth;\nvec4 frag () {\n  vec4 o = vec4(1, 1, 1, 1);\n  vec4 h = vec4(.0, .0, .0, 1);\n  float pi = 3.1415926;\n  #if USE_TEXTURE\n    o *= CCSampleTexture(cc_spriteTexture, uv0);\n  #endif\n  vec2 center = vec2(.5, .5);\n  float radius = .5;\n  float dy = uv0.y - center.y;\n  float dx = uv0.x - center.x;\n  float dis = sqrt(pow(uv0.x - center.x, 2.) + pow(uv0.y - center.y, 2.));\n  if(dis > radius) {\n    o.a = .0;\n  }\n  if(precent < 100.) {\n    float tan0 = atan(dy, dx);\n    float ang =(tan0 + pi*.5)/pi * 180.;\n    o *= color;\n    float te = mod(precent, 100.) * 3.6;\n    float gray  = 0.2126 * o.r + 0.7152 * o.g + 0.0722 * o.b;\n    if(mod(ang, 360.) > te && mod(ang, 360.) <= 360.) {\n      o.r = o.g = o.b = gray;\n    }\n  }\n  if( dis < 1. && dis > .5*(1. - borderWidth)) {\n    o.xyz = mix(o.xyz, h.xyz, .5);\n  }\n  return o;\n}\nvoid main() { gl_FragColor = frag(); }"},"builtins":{"globals":{"blocks":[{"name":"CCGlobal","defines":[]}],"samplers":[]},"locals":{"blocks":[],"samplers":[{"name":"cc_spriteTexture","defines":[]}]}},"defines":[{"name":"CC_USE_EMBEDDED_ALPHA","type":"boolean"},{"name":"USE_TEXTURE","type":"boolean"}],"blocks":[{"name":"Constant","members":[{"name":"borderColor","type":16,"count":1},{"name":"precent","type":13,"count":1},{"name":"borderWidth","type":13,"count":1}],"defines":[],"stageFlags":16,"binding":0}],"samplers":[],"attributes":[{"name":"a_position","type":15,"count":1,"defines":[],"stageFlags":1,"format":32,"location":0},{"name":"a_texCoord","type":14,"count":1,"defines":[],"stageFlags":1,"format":21,"location":1},{"name":"a_color","type":16,"count":1,"defines":[],"stageFlags":1,"format":44,"location":2}],"record":null,"name":"../resources/Effects/avatar_efc|sprite-vs:vert|sprite-fs:frag"}]},{"__type__":"cc.Material","_effectAsset":{"__uuid__":"4dtHTdTXVP86+xY0tNL/yD"},"_defines":[{"USE_TEXTURE":true}],"_states":[{"blendState":{"targets":[{}]},"depthStencilState":{},"rasterizerState":{}}],"_props":[{"borderColor":{"__type__":"cc.Color","r":245,"g":233,"b":247},"borderWidth":0}]}]
