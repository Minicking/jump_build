System.register([], function(_export, _context) { return { execute: function () {
System.register("chunks:///Box.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,i){var a,e,s,l,c,o,n,h,_,r,u,f;return t({_dec:void 0,_class:void 0}),{setters:[function(t){a=t.inherits,e=t.createClass,s=t.classCallCheck,l=t.possibleConstructorReturn,c=t.getPrototypeOf},function(t){o=t.cclegacy,n=t._decorator,h=t.Vec3,_=t.Component}],execute:function(){o._RF.push({},"6643c+mADFPg59fhSVi8+Su","Box",void 0),f=n.ccclass,n.property,t("Box",(r=f("Box"),r(u=function(t){function i(){return s(this,i),l(this,c(i).apply(this,arguments))}return a(i,t),e(i,[{key:"onLoad",value:function(){this.time_elastic=0,this.time_power=0,this.time_fall=0,this.action_elastic=!1,this.action_power=!1,this.action_fall=!1,this.data_elastic={},this.data_fall={},this.cycle_elastic=20}},{key:"onTouchDown",value:function(t){this.action_power||(this.action_power=!0)}},{key:"onTouchUp",value:function(t){this.action_power&&(this.action_power=!1,this.startElastic())}},{key:"startElastic",value:function(){this.time_elastic=0,this.action_elastic=!0,this.data_elastic.origin_scale_y=this.node.getScale().y,this.data_elastic.A=this.data_elastic.origin_scale_y-1}},{key:"startFall",value:function(){this.time_fall=0,this.action_fall=!0,this.data_fall.speed=0,this.data_fall.g=70,this.data_fall.k=.5}},{key:"actionElastic",value:function(t){if(this.action_elastic){this.time_elastic+=t;var i=this.data_elastic.A*(1/(1+20*this.time_elastic)),a=i*Math.cos(this.time_elastic*this.cycle_elastic);this.node.setScale(new h(1,1+a,1)),Math.abs(i)<.03&&(this.node.setScale(new h(1,1,1)),this.action_elastic=!1)}}},{key:"actionPower",value:function(t){if(this.action_power){this.time_power+=t;var i=1-2*this.time_power;i<.1?(this.action_power=!1,this.startElastic()):this.node.setScale(new h(1,i,1))}}},{key:"actionFall",value:function(t){if(this.action_fall){this.time_fall+=t;var i=this.node.getPosition();this.data_fall.speed+=this.data_fall.g*t;var a=this.data_fall.speed*t;i.y-=a,i.y<=0&&(this.data_fall.speed*=-1*this.data_fall.k,i.y=0),Math.abs(this.data_fall.speed)<=.1&&i.y<=.1&&(i.y=0,this.action_fall=!1),this.node.setPosition(i)}}},{key:"update",value:function(t){this.actionElastic(t),this.actionFall(t)}}]),i}(_))||u)),o._RF.pop()}}}));

System.register("chunks:///Config.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var i,s;return{setters:[function(e){i=e.classCallCheck},function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"1c95bfLt8hDMI/mY7kSxKrA","Config",void 0),e("UseTeaching",!1),e("UseSign",!0),e("UseDebug",!1),e("UseLog",!1),e("UseStatistics",!1),e("Config",(function e(){i(this,e),this.DebugGameTime=-1,this.baseUrl="https://api.didiapp.com",this.env=localStorage.getItem("userContent")?JSON.parse(localStorage.getItem("userContent")).env:"","dev"===this.env?this.baseUrl="https://dev-api.didiapp.com":"xlab"===this.env?this.baseUrl="https://xlab-api.didiapp.com":"online"===this.env&&(this.baseUrl="https://api.didiapp.com"),"dev"===this.env?this.config={matchCode:"match-na9u3tge",gameId:"obg-4zid10f3",secretKey:"",initConfig:{url:"4zid10f3.wxlagame.com",reconnectMaxTimes:5,reconnectInterval:1e3,resendInterval:1e3,resendTimeout:1e4,isAutoRequestFrame:!0}}:this.config={matchCode:"match-auuc635m",gameId:"obg-8lfv7afz",secretKey:"",initConfig:{url:"8lfv7afz.wxlagame.com",reconnectMaxTimes:5,reconnectInterval:1e3,resendInterval:1e3,resendTimeout:1e4,isAutoRequestFrame:!0}},this.serverURL={gameInit:this.baseUrl+"/client/awesome/minigame/jump/info/",accountInit:this.baseUrl+"/client/account/user/info/",loverInfo:this.baseUrl+"/client/account/lover/",vipInfo:this.baseUrl+"/client/account/user/vip/",sign:this.baseUrl+"/client/awesome/minigame/jump/sign",group:this.baseUrl+"/client/awesome/minigame/jump/group_id/"}})),s._RF.pop()}}}));

System.register("chunks:///Const.js",["cc","./Config.js"],(function(e,a){var n,t,c,i,o,_,m,r,l,u;return e({log:function(){},BoxShape:void 0,JumpStatus:void 0,AIDataType:void 0,ServerDataType:void 0,ClientDataType:void 0,RoomDataType:void 0,EmojiType:void 0,DialogButtonType:void 0}),{setters:[function(e){n=e.cclegacy,t=e.Color},function(e){}],execute:function(){n._RF.push({},"286ccI0TulGCrD81NytQWoS","Const",void 0),function(e){e[e.cube=0]="cube",e[e.circle=1]="circle"}(c||e("BoxShape",c={})),e("BoxSizeName",{mini:0,small:1,middle:2,large:3,huge:4,center:5}),e("BoxSize",{0:1.3,1:1.833,2:2.249,3:2.6,4:2.24*1.3,5:.26}),function(e){e[e.next=0]="next",e[e.current=1]="current",e[e.dead=2]="dead"}(i||e("JumpStatus",i={})),function(e){e[e.StartJump=0]="StartJump"}(o||e("AIDataType",o={})),function(e){e[e.Error=-1]="Error",e[e.Init=0]="Init",e[e.Sync=1]="Sync",e[e.Result=2]="Result",e[e.Start=3]="Start",e[e.Reconnect=4]="Reconnect",e[e.Map=5]="Map",e[e.NetState=6]="NetState",e[e.ChangeControler=7]="ChangeControler",e[e.ReconnectFailed=8]="ReconnectFailed",e[e.AI=9]="AI",e[e.MatchingSuccess=10]="MatchingSuccess"}(_||e("ServerDataType",_={})),function(e){e[e.Ready=0]="Ready",e[e.Action=1]="Action",e[e.End=2]="End",e[e.Reconnect=3]="Reconnect",e[e.ChangeControler=4]="ChangeControler",e[e.ReconnectComplete=5]="ReconnectComplete",e[e.Heart=6]="Heart",e[e.RequestInitData=7]="RequestInitData",e[e.RequestSyncData=8]="RequestSyncData",e[e.SyncComplete=9]="SyncComplete",e[e.JumpComplete=10]="JumpComplete",e[e.SingalAI=11]="SingalAI",e[e.ChangeNetState=12]="ChangeNetState"}(m||e("ClientDataType",m={})),function(e){e[e.EnemyPowerEnd=0]="EnemyPowerEnd",e[e.Power=1]="Power",e[e.PowerEnd=2]="PowerEnd",e[e.emoji=3]="emoji",e[e.SyncComplete=4]="SyncComplete",e[e.MatchedJoinGroup=5]="MatchedJoinGroup"}(r||e("RoomDataType",r={})),function(e){e[e.Angry=0]="Angry",e[e.Worship=1]="Worship",e[e.Unfortunately=2]="Unfortunately",e[e.Applause=3]="Applause"}(l||e("EmojiType",l={})),e("PlayerState",{NotReady:0,Ready:1}),e("NetState",{Offline:0,Online:1}),e("GroupMessageType",{Sys:1,Talk:2}),e("GroupSysMessageType",{Matching:1}),e("LabelColor",{Captain:new t(46,139,33),Ready:new t(46,139,33),NotReady:new t(131,123,123)}),function(e){e[e.single=0]="single",e[e.multiple=1]="multiple"}(u||e("DialogButtonType",u={})),e("TeamColor",{red:"0",blue:"1"}),e("StatisticsKey",{login:"1",leave:"2",main_rule_clicked:"main_rule_clicked",main_quick_clicked:"main_quick_clicked",main_couple_clicked:"main_couple_clicked",main_quick_match:"main_quick_match",main_quick_cancel:"main_quick_cancel",main_couple_match:"main_couple_match",main_couple_cancel:"main_couple_cancel",main_couple_wait_invite:"main_couple_wait_invite",main_wait_invite_cancel:"main_wait_invite_cancel",Guidance_appear_clicked:"Guidance_appear_clicked",Guidance_pass_start:"Guidance_pass_start",Guidance_pass_again:"Guidance_pass_again",Guidance_skip_clicked:"Guidance_skip_clicked",Guidance_skip_confirmed:"Guidance_skip_confirmed",game_jump_success:"game_jump_success",game_jump_fail:"game_jump_fail",game_start_jump:"game_start_jump",game_start_emotion:"game_start_emotion",game_leave_clicked:"game_leave_clicked",game_leave_confirmed:"game_leave_confirmed",game_over_again:"game_over_again",game_over_replace:"game_over_replace",game_over_back:"game_over_back",game_voice_turn:"game_voice_turn",game_share_chat:"game_share_chat",game_share_wechat:"game_share_wechat",game_share_QQ:"game_share_QQ",game_share_clicked:"game_share_clicked"}),n._RF.pop()}}}));

System.register("chunks:///DeployInfo.js",["cc"],(function(e,n){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"b0e97zlqg9DAJCZeY2PJIWp","DeployInfo",void 0),e("DeployInfo",{version:73}),o._RF.pop()}}}));

System.register("chunks:///quan.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var n,a,s,i,o,r,c,l,u,h,p,d,f,m,v;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){n=t.inherits,a=t.classCallCheck,s=t.possibleConstructorReturn,i=t.getPrototypeOf,o=t.createClass},function(t){r=t.cclegacy,c=t._decorator,l=t.Vec3,u=t.MeshRenderer,h=t.tween,p=t.Vec4,d=t.Component}],execute:function(){r._RF.push({},"88109mMvhFPC4a/ipJ0aAXk","quan",void 0),v=c.ccclass,c.property,t("Quan",(f=v("Quan"),f(m=function(t){function e(){var t,n;a(this,e);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(n=s(this,(t=i(e)).call.apply(t,[this].concat(r)))).originState=new l(0,0,0),n.startState=new l(.5,1,.5),n.endState=new l(4,1,4),n}return n(e,t),o(e,[{key:"start",value:function(){this.material=this.node.getComponent(u).materials[0],this.pass=this.material.passes[0],this.node.setScale(this.originState)}},{key:"startAnimation",value:function(){var t=this;this.node.setScale(this.startState),h(this.node).to(.5,{scale:this.endState},{onComplete:function(){t.node.setScale(t.originState)},onUpdate:function(e,n){t.pass.setUniform(t.pass.getHandle("mainColor"),new p(1,1,1,1-n))}}).start()}}]),e}(d))||m)),r._RF.pop()}}}));

System.register("chunks:///Player.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Box.js","./Const.js","./quan.js"],(function(e,t){var i,s,o,n,a,r,h,u,l,m,p,d,c,g,_,f,y,v,P,x,j,w,R,B,M,T,b,z,C,k,A,D,S,I,U,H,N,J,F,Y,E,O,K,G,V,q,Q,L;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,s=e.inherits,o=e.classCallCheck,n=e.possibleConstructorReturn,a=e.getPrototypeOf,r=e.initializerDefineProperty,h=e.assertThisInitialized,u=e.createClass,l=e.asyncToGenerator},function(e){m=e.cclegacy,p=e._decorator,d=e.Vec3,c=e.Quat,g=e.Prefab,_=e.CCFloat,f=e.Vec2,y=e.systemEvent,v=e.SystemEvent,P=e.ParticleSystem,x=e.randomRangeInt,j=e.randomRange,w=e.tween,R=e.Tween,B=e.Component,M=e.instantiate,T=e.loader},function(e){b=e.Box},function(e){z=e.JumpStatus,C=e.StatisticsKey,k=e.ClientDataType,A=e.BoxSize,D=e.BoxSizeName,S=e.log},function(e){I=e.Quan}],execute:function(){m._RF.push({},"06087OdteJF9alMqGeb4DFG","Player",void 0),q=p.ccclass,Q=p.property,new d,new d,L=new c,new c,e("Player",(U=q("Player"),H=Q({type:g}),N=Q({type:_}),J=Q({type:_}),F=Q({type:_}),U((O=i((E=function(e){function t(){var e,i;o(this,t);for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return i=n(this,(e=a(t)).call.apply(e,[this].concat(u))),r(i,"playerPrfb",O,h(i)),r(i,"jumpHeight",K,h(i)),r(i,"jumpDuration",G,h(i)),r(i,"max_time",V,h(i)),i.originPosY=0,i.originRotation=new c(0,1,0,0),i.curRotation=new c,i.curPostion=new d,i._jump_time=0,i.jumpResult={time:null,distance:null,offset:null,status:null,perfect:!1},i._face=new f,i._axis=new d,i._stat_power=!1,i._stat_jump=!1,i.curBox=null,i.nextBox=null,i._isRunning=!1,i._control=!1,i.is_controler=!1,i.modelBody=null,i.modelHead=null,i.modelHeadPos=new d,i.modelTire=null,i.AI=!1,i.AI_power=!1,i.AI_jump=!1,i}var i,m;return s(t,e),u(t,[{key:"onLoad",value:function(){this.node.getRotation(L)}},{key:"initEvent",value:function(){y.on(v.EventType.TOUCH_START,this.onTouchDown,this),y.on(v.EventType.TOUCH_END,this.onTouchUp,this)}},{key:"initPlayer",value:function(){var e=new d(this.gameManager.serverTeam.pos[0],this.originPosY,this.gameManager.serverTeam.pos[1]);this.node.setPosition(e),this.node.setRotation(this.originRotation),this.curPostion=e,this._isRunning=!1,this._control=!1,this.is_controler=!1,this._jump_time=0,this.AI_power=!1,this.AI_jump=!1,this._stat_power=!1,this._stat_jump=!1}},{key:"start",value:function(){this.originPosY=this.node.position.y,this.quan=this.node.getChildByName("quan").getComponent(I),this.node.getRotation(this.curRotation),this.initEvent()}},{key:"onTouchDown",value:function(e){this.control&&this.is_controler&&0==this._stat_power&&0==this._stat_jump&&(this.particleOpen(!0),this.gameManager.Util.playAudio(this.gameManager.audio_touch_down),this.onPowerDown(),this._stat_power=!0,this.jumpResult.time=0,this._control=!1)}},{key:"onTouchUp",value:function(e){this._stat_power&&this.is_controler&&(this.jumpResult.time>this.max_time&&(this.jumpResult.time=this.max_time),this._stat_power=!1,this.modelBody.setScale(new d(1,1,1)),this.modelHead.setPosition(this.modelHeadPos),this.modelTire&&this.modelTire.setPosition(new d(0,0,0)),this.start_jump())}},{key:"teammatePower",value:function(){0==this.control&&(this.gameManager.Util.playAudio(this.gameManager.audio_touch_down),this.jumpResult.time=0,this._stat_power=!0,this.particleOpen(!0))}},{key:"teammatePowerEnd",value:function(e){if(0==this.control){this._stat_power=!1,this.modelBody.setScale(new d(1,1,1)),this.modelHead.setPosition(this.modelHeadPos),this.modelTire&&this.modelTire.setPosition(new d(0,0,0));var t=new d;this.node.getPosition(t),t.y=this.originPosY,this.node.setPosition(t),this.start_jump(e)}}},{key:"funnction_jump",value:function(e){return 9*e*e+7*e}},{key:"function_getJumpInfo",value:function(){this.jumpResult.distance=this.funnction_jump(this.jumpResult.time);var e=new d,t=new d,i=new d,s=new f,o=null,n=!1,a=null;this.node.getPosition(i),this.curBox.node.getPosition(t),this.nextBox.node.getPosition(e),this.getFace(s),s.normalize(),s.multiplyScalar(this.jumpResult.distance),s.x+=i.x,s.y+=i.z;var r=new f(999,999);this.gameManager.Util.posInBox(s,new f(e.x,e.z),this.nextBox.size,this.nextBox.shape,r)?(o=[s.x-e.x,s.y-e.z],a=z.next,r.x<.325&&(n=!0)):this.gameManager.Util.posInBox(s,new f(t.x,t.z),this.curBox.size,this.curBox.shape)?(o=[s.x-t.x,s.y-t.z],a=z.current):(a=z.dead,o=[s.x-e.x,s.y-e.z]),this.jumpResult.offset=o,this.jumpResult.status=a,this.jumpResult.perfect=n}},{key:"start_jump",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.particleOpen(!1);var s=!1;if(!this._stat_power){var o=this.node.getChildByName("Node").getChildByName("body").getComponent(P);if(o&&(o.enabled=!0),this._stat_jump=!0,this._jump_time=0,this.getFace(this._face),this._axis=this.gameManager.Util.getJumpAxis(this.node,this.nextBox.node),this.node.getRotation(this.curRotation),this.node.getPosition(this.curPostion),this.curBox.node.getComponent(b).startElastic(),null==t?(this.gameManager.serverPlayer&&(this.gameManager.serverPlayer.steps+=1),s=!0,this.function_getJumpInfo(),i||this.onPowerUp()):(this.jumpResult.distance=t.distance,this.jumpResult.offset=t.pos,this.jumpResult.status=t.status,this.jumpResult.time=t.time,this.jumpResult.perfect=t.perfect),i)return;var n={id:this.gameManager.serverTeam.id,cur_cube:this.gameManager.serverTeam.cur_cube,pos:this.gameManager.serverTeam.pos,perfectJump:this.gameManager.serverTeam.perfectJump,oneStepFinish:this.gameManager.serverTeam.oneStepFinish,playerList:this.gameManager.serverTeam.playerList},a={score:this.gameManager.serverPlayer.score,id:this.gameManager.serverPlayer.id,avatar:this.gameManager.serverPlayer.avatar,status:this.gameManager.serverPlayer.status,teamId:this.gameManager.serverPlayer.teamId,name:this.gameManager.serverPlayer.name,gender:this.gameManager.serverPlayer.gender,isVip:this.gameManager.serverPlayer.isVip,isRobot:this.gameManager.serverPlayer.isRobot,lover_id:this.gameManager.serverPlayer.lover_id,user_id:this.gameManager.serverPlayer.user_id,steps:this.gameManager.serverPlayer.steps},r=C.game_jump_fail;switch(this.jumpResult.status){case z.next:if(r=C.game_jump_success,n.cur_cube+=1,n.pos=this.jumpResult.offset,this.jumpResult.perfect?n.perfectJump+=1:n.perfectJump=0,s){var h=this.gameManager.Util.getScore(n.perfectJump);a.score+=h}break;case z.current:n.pos=this.jumpResult.offset,n.perfectJump=0;break;default:n.perfectJump=0}s&&(this.gameManager.Util.callTDGA(r),setTimeout((function(){e.gameManager.Util.callTDGA(C.game_start_jump)}),50)),this.gameManager.SDK.sendToServer(k.Action,{player:a,team:n,status:this.jumpResult.status})}}},{key:"action_power",value:function(e){if(this._stat_power){if(this.jumpResult.time+=e,this.jumpResult.time<this.max_time)this.setPlayerPress(this.jumpResult.time/this.max_time),this.setBoxPress(this.jumpResult.time/this.max_time);else if(this.jumpResult.time>this.max_time+2)this.jumpResult.time=this.max_time,this.onTouchUp(1);else if(x(1,100)<=50){var t=j(.97,1.03);this.setPlayerPress(t),this.setBoxPress(t)}if(this.AI&&this.AI_power&&!this.AI_jump&&this.nextBox){var i=this.funnction_jump(this.jumpResult.time),s=new d,o=new d,n=new f;this.getFace(n),n.normalize(),n.multiplyScalar(i),this.node.getPosition(s),this.nextBox.node.getPosition(o),n.x+=s.x,n.y+=s.z;var a=new f(n.x,n.y),r=new f(o.x,o.z),h=new f;if(this.gameManager.Util.posInBox(a,r,this.nextBox.size,this.nextBox.shape,h),h.x<=A[D.center]||this.jumpResult.time>=this.max_time){this._stat_power=!1,this.modelBody.setScale(new d(1,1,1)),this.modelHead.setPosition(this.modelHeadPos),this.modelTire&&this.modelTire.setPosition(new d(0,0,0));var u=new d;this.node.getPosition(u),u.y=this.originPosY,this.node.setPosition(u),this.AI_jump=!0,this.AI_power=!1,"TeachingBoard"==this.gameManager.SDK.curBoard.name?(this.AI=!1,this.start_jump(null,!0)):this.start_jump()}}}}},{key:"action_jump",value:function(e){if(this._stat_jump){this._jump_time+=e;var t=0,i=0,s=0,o=!1;if(this._jump_time<this.jumpDuration){var n=-4*this.jumpHeight/(this.jumpDuration*this.jumpDuration),a=this.jumpDuration/2,r=this.jumpHeight;t=n*(this._jump_time-a)*(this._jump_time-a)+r+this.originPosY,i=e/this.jumpDuration*this.jumpResult.distance,s=this._jump_time/this.jumpDuration*360}else t=this.originPosY,s=0,this._stat_jump=!1,o=!0;var h=new d;this.node.getPosition(h);var u=this.gameManager.Util.getPosWithVec(h,this._face,i);u.y=t,c.rotateAround(L,this.curRotation,this._axis,3.1415*s/180),this.node.setPosition(u),this.node.setRotation(L),o&&(this.AI_jump=!1,this.action_jump_end())}}},{key:"action_jump_end",value:function(){var e=this,t=new d;this.node.getPosition(t),S("跳跃结果","基本数据:",this.jumpResult);var i=this.node.getChildByName("Node").getChildByName("body").getComponent(P);if(i&&(i.enabled=!1),this.jumpResult.status==z.current){S("修正量",this.jumpResult.offset);var s=new d;this.curBox.node.getPosition(s),s.x+=this.jumpResult.offset[0],s.z+=this.jumpResult.offset[1],s.y=this.originPosY,this.node.setPosition(s),this.node.getPosition(this.curPostion),this.onJumpComplete(!1,this.is_controler),this.gameManager.Util.playAudio(this.gameManager.audio_complete)}else if(this.jumpResult.status==z.next){S("修正量:",this.jumpResult.offset);var o=new d;this.nextBox.node.getPosition(o),o.x+=this.jumpResult.offset[0],o.z+=this.jumpResult.offset[1],o.y=this.originPosY,this.node.setPosition(o),this.node.getPosition(this.curPostion),this.onJumpComplete(!0,this.is_controler),1==this.jumpResult.perfect?this.gameManager.Util.playAudio(this.gameManager.audio_perfect):this.gameManager.Util.playAudio(this.gameManager.audio_complete)}else if(this.jumpResult.status==z.dead){var n=this.nextBox.node.getPosition(),a=new d;a.x=n.x+this.jumpResult.offset[0],a.z=n.z+this.jumpResult.offset[1],a.y=this.originPosY,this.node.setPosition(a);var r=a.clone();r.y=-.5,this.gameManager.Util.playAudio(this.gameManager.audio_dead);var h=new f(9999,9999);if(this.gameManager.Util.posInBox(new f(a.x,a.z),new f(n.x,n.z),this.nextBox.size,this.nextBox.shape,h),h.x<=A[this.nextBox.size]/2+.4){var u=new f(a.x-n.x,a.z-n.z);u.normalize(),u.multiplyScalar(.8),r.x+=u.x,r.z+=u.y;var l=this.gameManager.Util.getTiltQuat(this.node,this.nextBox.node.getPosition()),m=this.node.getRotation(),p=new c;w(this.node).to(.6,{position:r},{onComplete:this.jumpDead.bind(this),onUpdate:function(t,i){p.set(m).slerp(l,i),e.node.setRotation(p)}}).start()}else w(this.node).to(.6,{position:r},{onComplete:this.jumpDead.bind(this)}).start()}this.jumpResult.time=0,this._jump_time=0}},{key:"jumpDead",value:function(){this.onJumpDead(),this.node.setPosition(this.curPostion),this.node.setRotation(this.originRotation),this.gameManager.Util.playAudio(this.gameManager.audio_relife)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){var t=this.nextBox.node.getPosition(),i=this.curBox.node.getPosition(),s=new d,o=new d(i.x),n=new d;R.stopAllByTarget(this.gameManager.camera),o.set(i.x,0,i.z),n.set(i.x+e.pos[0],this.originPosY,i.z+e.pos[1]),d.add(s,new d((i.x+t.x)/2,0,(i.z+t.z)/2),this.gameManager._origin_camera_pos),this.gameManager.plane.setPosition(new d(i.x,0,i.z)),this.gameManager.camera.node.setPosition(s),this.node.setPosition(n),this.modelTire&&this.modelTire.setPosition(new d(0,0,0)),this.modelHead&&this.modelHead.setPosition(this.modelHeadPos),this.modelBody&&this.modelBody.setScale(new d(1,1,1))}else this.node.setPosition(this.curPostion);this.particleOpen(!1),this.node.setRotation(this.originRotation),this.node.getPosition(this.curPostion),this._stat_power=!1,this._stat_jump=!1,this.AI_power=!1,this.AI_jump=!1,this.curBox.node.setScale(new d(1,1,1))}},{key:"setFace",value:function(){var e=this;if(this.nextBox){var t=w(this.node),i=new c;this.node.getRotation(i);var s=this.gameManager.Util.getRotaionQuat(this.node,this.nextBox.node),o=new c;t.to(.2,{},{onUpdate:function(t,n){o.set(i).slerp(s,n),e.node.setRotation(o)}}),t.start()}}},{key:"particleOpen",value:function(e){this.node.getChildByName("Node").getChildByName("body").getChildByName("Particle").active=e}},{key:"getFace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(new f,new d),i=new d;this.node.getPosition(t),this.nextBox.node.getPosition(i),e?(e.set(i.x-t.x,i.z-t.z),this._face.set(e)):this._face.set(i.x-t.x,i.z-t.z)}},{key:"setPlayerPress",value:function(e){var t=this.node.getPosition();t.y=this.originPosY-1.102*e,this.node.setPosition(t);var i=this.modelHead.getPosition();if(i.y=this.modelHeadPos.y-.572*e,this.modelHead.setPosition(i),this.modelTire){var s=this.modelTire.getPosition();s.y=-.572*e,this.modelTire.setPosition(s)}var o=this.modelBody.getScale();o.y=1-.5*e,this.modelBody.setScale(o)}},{key:"setBoxPress",value:function(e){var t=this.curBox.node.getScale();t.y=1-.7*e,this.curBox.node.setScale(t)}},{key:"setModel",value:(m=l(regeneratorRuntime.mark((function e(t){var i,s,o,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t-=1,i=this.gameManager.ChessPrefab,!(t>=i.length||t<0)){e.next=4;break}return e.abrupt("return");case 4:return(s=this.node.getChildByName("Node"))&&this.node.removeChild(s),o=this.gameManager.ChessPrefab[t],(n=M(o)).setParent(this.node),this.modelHead=n.getChildByName("head"),this.modelBody=n.getChildByName("body"),this.modelHead.getPosition(this.modelHeadPos),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"setTire",value:(i=l(regeneratorRuntime.mark((function e(t){var i,s,o,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=null,e.t0=t,e.next=1===e.t0?4:6;break;case 4:return i="vip",e.abrupt("break",6);case 6:if((s=this.node.getChildByName("Tire").getChildByName("Node"))&&this.node.getChildByName("Tire").removeChild(s),i){e.next=10;break}return e.abrupt("return",!1);case 10:return o="Model/Tire/"+i+"/Node",new Promise((function(e){T.loadRes(o,g,(function(t,i){var s=M(i);s.setParent(n.node.getChildByName("Tire")),n.modelTire=s,e(s)}))})),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"update",value:function(e){if(this.isRunning||!this.gameManager.SDK||!this.gameManager.SDK.curBoard||"TeachingBoard"==this.gameManager.SDK.curBoard.name){if(this.AI){var t="TeachingBoard"==this.gameManager.SDK.curBoard.name;(this.control||t)&&(0!=this._stat_power||0!=this._stat_jump||this.AI_jump||this.AI_power||(t||this.onPowerDown(),this.AI_power=!0,this._stat_power=!0,this.jumpResult.time=0,this._control=!1))}this.action_power(e),this.action_jump(e)}}},{key:"control",set:function(e){this._control=e,this.is_controler=e,this.is_controler&&this.initEvent()},get:function(){return this._control}},{key:"isRunning",set:function(e){this._isRunning=e},get:function(){return this._isRunning}}]),t}(B)).prototype,"playerPrfb",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(E.prototype,"jumpHeight",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),G=i(E.prototype,"jumpDuration",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),V=i(E.prototype,"max_time",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),Y=E))||Y)),m._RF.pop()}}}));

System.register("chunks:///Util.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./Const.js"],(function(e,t){var r,n,a,o,i,u,s,c,l,m,g,f,p,h,d,v,y,b,k,x,S,C,w,R,I;return e({throttle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;return function(t,r,n){var a=n.value,o=null;return n.value=function(){o||(a.apply(this),o=setTimeout((function(){o=null}),e))},n}},HttpCode:void 0,HttpMethod:void 0}),{setters:[function(e){r=e.createClass,n=e.classCallCheck,a=e.typeof,o=e.asyncToGenerator},function(e){i=e.cclegacy,u=e._decorator,s=e.Vec2,c=e.Rect,l=e.Vec3,m=e.Quat,g=e.loader,f=e.Prefab,p=e.AudioSource,h=e.Sprite,d=e.Texture2D,v=e.ImageAsset,y=e.SpriteFrame,b=e.Label,k=e.Node},function(e){},function(e){x=e.BoxShape,S=e.TeamColor,e.StatisticsKey,C=e.BoxSize}],execute:function(){i._RF.push({},"ce5d5zghdhNhJ8k219NUh+H","Util",void 0),u.ccclass,u.property,e("Util",function(){function e(t,r){n(this,e),this.localImgCache={},this.remoteImgCache={},this.isRobotRoomCache=void 0,this.SDK=t,this.gameManager=r}var t,i,u,P,T,N,D,E,M,O;return r(e,[{key:"posInBox",value:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=C[r]/2;if(a&&(a.x=s.distance(e,t)),n==x.cube){var i=new c,u=new s(t.x-o,t.y+o),l=new s(t.x+o,t.y-o);return c.fromMinMax(i,u,l),i.contains(e)}return s.distance(e,t)<o}},{key:"getJumpAxis",value:function(e,t){var r=new l,n=new l,a=new l(0,0,0);e.getPosition(r),t.getPosition(n);var o=r.z-n.z,i=n.x-r.x;return a.set(-o,0,-i),a.normalize(),a}},{key:"getTiltQuat",value:function(e,t){var r=new m,n=e.getPosition(),a=new s(n.x-t.x,n.z-t.z);a.rotate(-1.5707963);var o=new l(a.x,0,a.y);o.normalize();var i=e.getRotation();return m.rotateAround(r,i,o,1.5707963),r}},{key:"getRotaionQuat",value:function(e,t){var r=new l,n=new l,a=new s(0,1),o=new s,i=new m;i.lengthSqr(),e.getPosition(r),t.getPosition(n),o.set(n.x-r.x,n.z-r.z);var u=o.signAngle(a);return u<0&&(u+=6.2831852),m.rotateY(i,i,u),i}},{key:"getPosWithVec",value:function(e,t,r){return t.normalize(),t.multiplyScalar(r),new l(e.x+t.x,0,e.z+t.y)}},{key:"getScore",value:function(e){if(e<=0)return 1;var t=2*e;return t<=10?t:10}},{key:"getLocalTime",value:function(){return Math.floor(Date.parse((new Date).toString())/1e3)}},{key:"getLocalDate",value:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,n=e.getDate();return console.log(t,r,n),"".concat(t)+(r<10?"0".concat(r):"".concat(r))+"".concat(n)}},{key:"isControler",value:function(e,t){for(var r=!1,n=0;n<e.length;n++){if(e[n].id==t.id){r=!0;break}}return r}},{key:"getPara",value:function(e,t){var r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=t.substr(1).match(r);return null!=n?decodeURI(n[2]):null}},{key:"teammaterIsLover",value:(O=o(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.SDK.gameManager.teammaterIsLover){e.next=2;break}return e.abrupt("return",this.SDK.gameManager.teammaterIsLover);case 2:return e.next=4,this.SDK.getTeammate();case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:return r=JSON.parse(t.customProfile),this.SDK.gameManager.teammaterIsLover=r.lover_id==this.SDK.gameManager.PlayerData.lover_id&&r.lover_id>0,e.abrupt("return",this.SDK.gameManager.teammaterIsLover);case 10:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:"enemyIsLover",value:(M=o(regeneratorRuntime.mark((function e(){var t,r,n,a,o,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.SDK.gameManager.enemyIsLover){e.next=2;break}return e.abrupt("return",this.SDK.gameManager.enemyIsLover);case 2:return e.next=4,this.SDK.getRoomInfo();case 4:return t=e.sent,e.next=7,this.SDK.getPlayerInfo();case 7:if(r=e.sent,t){e.next=10;break}return e.abrupt("return",!1);case 10:o=t.playerList,i=0;case 12:if(!(i<o.length)){e.next=24;break}if((u=o[i]).teamId==r.teamId){e.next=21;break}if(!n){e.next=20;break}return a=this.gameManager.robotInfo[u.id]?JSON.parse(this.gameManager.robotInfo[u.id].profile):JSON.parse(u.customProfile),e.abrupt("break",24);case 20:n=this.gameManager.robotInfo[u.id]?JSON.parse(this.gameManager.robotInfo[u.id].profile):JSON.parse(u.customProfile);case 21:i++,e.next=12;break;case 24:return this.SDK.gameManager.enemyIsLover=n.lover_id==a.lover_id&&-1!=n.lover_id,e.abrupt("return",this.SDK.gameManager.enemyIsLover);case 26:case"end":return e.stop()}}),e,this)}))),function(){return M.apply(this,arguments)})},{key:"enemyIsVip",value:(E=o(regeneratorRuntime.mark((function e(){var t,r,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getRoomInfo();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return r=t.playerList,e.next=8,this.SDK.getPlayerInfo();case 8:n=e.sent,a=0;case 10:if(!(a<r.length)){e.next=20;break}if((o=r[a]).teamId==n.teamId){e.next=17;break}if(!(this.gameManager.robotInfo[o.id]?JSON.parse(this.gameManager.robotInfo[o.id].profile):JSON.parse(o.customProfile)).isVip){e.next=17;break}return e.abrupt("return",!0);case 17:a++,e.next=10;break;case 20:return e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"IsRobotRoom",value:(D=o(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.isRobotRoomCache){e.next=2;break}return e.abrupt("return",this.isRobotRoomCache);case 2:return e.next=4,this.SDK.getRoomInfo();case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:r=t.playerList,n=0;case 9:if(!(n<r.length)){e.next=16;break}if(!r[n].isRobot){e.next=13;break}return e.abrupt("return",!0);case 13:n++,e.next=9;break;case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this)}))),function(){return D.apply(this,arguments)})},{key:"loadRemoteImg",value:(N=o(regeneratorRuntime.mark((function e(t,r){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){if(n.remoteImgCache[t])return r&&(r.getComponent(h).spriteFrame=n.remoteImgCache[t]),e(!0);var o=new Image;o.crossOrigin="Anonymous",o.src=t,o.onload=function(){var a=new d;a.image=new v(o);var i=new y;i.texture=a,n.remoteImgCache[t]=i,r&&(r.getComponent(h).spriteFrame=i),e(!0)},o.onerror=function(t){e(!1),r&&n.loadImg("/Texture/UI/main/banner@2x (3)/spriteFrame",r)}})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return N.apply(this,arguments)})},{key:"loadImg",value:(T=o(regeneratorRuntime.mark((function e(t,r){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",r.getComponent(h).spriteFrame=null);case 2:if(!this.localImgCache[t]){e.next=5;break}return r.getComponent(h).spriteFrame=this.localImgCache[t],e.abrupt("return");case 5:return e.abrupt("return",new Promise((function(e){g.loadRes(t,y,(function(a,o){if(a)throw e(!1),a;r.getComponent(h).spriteFrame=o,n.localImgCache[t]=o,e(!0)}))})));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return T.apply(this,arguments)})},{key:"http",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return new Promise((function(o,i){var u=g.getXMLHttpRequest();if(u.open(t,e,!0),n&&(u.responseType="blob"),u.onreadystatechange=function(){if(4==u.readyState)if(u.status>=200&&u.status<300){var e=u.responseText;o(JSON.parse(e))}else o(null)},u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.setRequestHeader("Access-Control-Allow-Origin","*"),a&&u.setRequestHeader("access_token",a),r){var s="";for(var c in r)s+=c+"="+r[c]+"&";u.send(s)}else u.send(null)}))}},{key:"loadPrefab",value:(P=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){g.loadRes(t,f,(function(t,r){e(t?null:r)}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return P.apply(this,arguments)})},{key:"loadEnemyChessPrefab",value:function(e,t){var r=this;g.loadRes(e,f,(function(e,n){e||(t==S.blue?r.gameManager.ChessPrefabEnemy.blue=n:r.gameManager.ChessPrefabEnemy.red=n)}))}},{key:"loadBoxPrefab",value:function(e,t,r){var n=this;g.loadRes(e,f,(function(e,a){e||(n.gameManager.BoxPrefab[t][r]=a)}))}},{key:"loadChessPrefab",value:function(e,t){var r=this;g.loadRes(e,f,(function(e,n){e||(r.gameManager.ChessPrefab[t]=n)}))}},{key:"setAvatar",value:(u=o(regeneratorRuntime.mark((function e(t,r,n){var a,o,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.profile?JSON.parse(r.profile):JSON.parse(r.customProfile),this.loadRemoteImg(a.avatar_url,t),t.getChildByName("isVip")&&(!a.isVip&&(t.getChildByName("isVip").active=!1),a.isVip&&(t.getChildByName("isVip").active=!0)),t.getChildByName("gender")&&(1===a.gender&&this.loadImg("/Texture/UI/result/boy/spriteFrame",t.getChildByName("gender")),2===a.gender&&this.loadImg("/Texture/UI/result/girl/spriteFrame",t.getChildByName("gender"))),t.getChildByName("name")&&(t.getChildByName("name").getComponent(b).string=a.nickname.length>6?a.nickname.slice(0,5):a.nickname),e.next=7,this.SDK.getPlayerInfo();case 7:if(o=e.sent,!n){e.next=21;break}if(r.id!==o.id){e.next=20;break}if(!t.getChildByName("me")){e.next=12;break}return e.abrupt("return",t.getChildByName("me").active=!0);case 12:i=new k("me"),u=new l(0,74,0),i.addComponent(h),this.loadImg("/Texture/UI/gaming/me/spriteFrame",i),t.addChild(i),i.setPosition(u),e.next=21;break;case 20:t.getChildByName("me")&&(t.getChildByName("me").active=!1);case 21:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return u.apply(this,arguments)})},{key:"getTeammaterAvatar",value:(i=o(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.SDK.getTeammate();case 3:if(t=e.sent,!(r=JSON.parse(t.customProfile))){e.next=9;break}return e.abrupt("return",r.avatar_url);case 9:return e.abrupt("return",null);case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return i.apply(this,arguments)})},{key:"loverLevel",value:function(e){for(var t=[50,100,200,500,1e3,2e3,3e3,5e3,7e3,1e4],r=0;r<t.length;r++){if((e-=t[r])<0)return r}return 10}},{key:"playAudio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.gameManager.Setting.switch_audio&&this.gameManager.getComponent(p).playOneShot(e,t)}},{key:"isJson",value:function(e){try{var t=JSON.parse(e);return!("object"!==a(t)||!t)}catch(e){return!1}}},{key:"localGet",value:function(e){var t=localStorage.getItem(e);return!!t&&(this.isJson(t)?JSON.parse(t):t)}},{key:"localSet",value:function(e,t){"object"!==a(t)&&localStorage.setItem(e,t),"object"===a(t)&&localStorage.setItem(e,JSON.stringify(t))}},{key:"callTDGA",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!1}},{key:"getNetHours",value:(t=o(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.request(R.GET,"http://quan.suning.com/getSysTime.do",{});case 2:return(t=e.sent).code===w.Success&&(n=(n=t.data.sysTime2).replace(/-/g,"/"),r=new Date(n)),e.abrupt("return",r.getHours());case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"copyStr",value:function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";var r,n=getSelection();n.rangeCount>0&&(r=n.getRangeAt(0)),document.body.appendChild(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length;try{document.execCommand("copy")}catch(e){}document.body.removeChild(t),r&&(n.removeAllRanges(),n.addRange(r))}}]),e}()),function(e){e[e.Success=0]="Success",e[e.Error=1]="Error",e[e.TimeOut=2]="TimeOut",e[e.ServerErr=3]="ServerErr",e[e.Unknown=4]="Unknown"}(w||e("HttpCode",w={})),function(e){e[e.GET=0]="GET",e[e.POST=1]="POST",e[e.PUT=2]="PUT",e[e.DELETE=3]="DELETE",e[e.PATCH=4]="PATCH"}(R||e("HttpMethod",R={})),I=function(){function e(){n(this,e)}return r(e,null,[{key:"request",value:function(e,t,r,n){var o=this;return new Promise((function(i){var u=g.getXMLHttpRequest(),s="GET";switch(e){case R.GET:s="GET",n&&(-1===t.indexOf("?")&&(t+="?"),t+=o._getQueryString(n),n=null);break;case R.POST:s="POST";break;case R.PUT:s="PUT";break;case R.DELETE:s="DELETE";break;case R.PATCH:s="PATCH"}u.open(s,t,!0),u.onerror=function(){i({code:w.Error,data:null})},u.timeout=8e3,u.ontimeout=function(){u.abort(),i({code:w.TimeOut,data:null})},u.onreadystatechange=function(){if(4===u.readyState)if(u.status>=200&&u.status<=299){var e=u.responseText,t=null;try{t=JSON.parse(e)}catch(e){}i({code:w.Success,data:t})}else if(400===u.status){var r=u.responseText,n=null;try{n=JSON.parse(r)}catch(e){}i({code:w.ServerErr,data:n})}else i({code:u.status,data:null})},o._setHeaders(u,r),n&&"object"===a(n)?(n=JSON.stringify(n),u.send(n)):u.send()}))}},{key:"_setHeaders",value:function(e,t){for(var r in t)e.setRequestHeader(r,t[r])}},{key:"_getQueryString",value:function(e){var t=[],r=function(r){var n=e[r];if(null==n)return"continue";n.constructor===Array?n.forEach((function(e){t.push(encodeURIComponent(r)+"[]="+encodeURIComponent(e))})):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n))};for(var n in e)r(n);return t.length?t.join("&"):""}}]),e}(),i._RF.pop(),e("default",I)}}}));

System.register("chunks:///SDK.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./Const.js"],(function(e,r){var t,n,a,u,o,i,s,c;return{setters:[function(e){t=e.createClass,n=e.classCallCheck,a=e.asyncToGenerator},function(e){u=e.cclegacy},function(e){},function(e){o=e.log,i=e.ClientDataType,s=e.PlayerState,c=e.RoomDataType}],execute:function(){u._RF.push({},"33e872liaNCrpH3cX9cDkX4","SDK",void 0),e("SDK",function(){function e(){n(this,e),this.Listener=MGOBE.Listener,this.Room=MGOBE.Room,this.curRoom=null,this.curGroup=null,this.curBoard=null,this.curDialog=null,this.gameManager=null,this.errorCode=MGOBE.ErrCode,this.indexListCache={},this.curRoom=new MGOBE.Room,this.curGroup=new MGOBE.Group}var r,u,p,f,m,l,h,g,d,y,v,k,R,x,G,P,b,w,I,M,E,C,S,O;return t(e,[{key:"init",value:function(e,r){var t=this;return this.gameManager=r,new Promise((function(r){var n=t.gameManager.Config.serverURL.sign+"/?game_id="+t.gameManager.Config.config.gameId+"&open_id="+e,a={gameId:t.gameManager.Config.config.gameId,openId:e,createSignature:function(e){fetch(n).then((function(e){return e.json()})).then((function(r){var t=r.sign,n=r.nonce,a=r.timestamp;return e({sign:t,nonce:n,timestamp:a})}))}};t.Listener.init(a,t.gameManager.Config.config.initConfig,(function(e){e.code===MGOBE.ErrCode.EC_OK?(t.Listener.add(t.curRoom),r(!0)):(o("正式环境初始化失败",e.code),r(!1))}))}))}},{key:"matchingSingle",value:(O=a(regeneratorRuntime.mark((function e(){var r,t,n,a,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.indexListCache={},e.next=3,this.getPlayerInfo();case 3:return r=e.sent,t={name:r.name,customPlayerStatus:r.stateRoom,customProfile:r.profile,matchAttributes:[]},n={playerInfo:t,matchCode:this.gameManager.Config.config.matchCode},a=new Promise((function(e){u.curRoom.matchPlayers(n,(function(r){o("进入单人匹配结果",r.code),e(r.code)}))})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:"matchingLover",value:(S=a(regeneratorRuntime.mark((function e(){var r,t,n,a,u,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGroupInfo();case 2:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.getPlayerInfo();case 8:return r=e.sent,e.next=11,this.getLoverInfo();case 11:if(t=e.sent){e.next=15;break}return e.abrupt("return");case 15:return n={id:r.id,name:r.name,customProfile:r.profile,customPlayerStatus:r.stateGroup,matchAttributes:[]},a={id:t.id,name:t.name,customProfile:t.profile,customPlayerStatus:t.stateGroup,matchAttributes:[]},u={playerInfoList:[n,a],matchCode:this.gameManager.Config.config.matchCode},o=new Promise((function(e){i.curRoom.matchGroup(u,(function(r){e(r.code)}))})),e.abrupt("return",o);case 20:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"cancelMatchinig",value:(C=a(regeneratorRuntime.mark((function e(){var r,t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={matchType:MGOBE.ENUM.MatchType.PLAYER_COMPLEX},t=new Promise((function(e){n.curRoom.cancelPlayerMatch(r,(function(r){e(r.code)}))})),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)}))),function(){return C.apply(this,arguments)})},{key:"getRoomInfo",value:(E=a(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Promise((function(e){MGOBE.Room.getMyRoom((function(r){e(r.data.roomInfo)}))})),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),function(){return E.apply(this,arguments)})},{key:"leaveRoom",value:(M=a(regeneratorRuntime.mark((function e(){var r,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Promise((function(e){t.curRoom.leaveRoom({},(function(r){r.code==t.errorCode.EC_OK&&t.curRoom.initRoom(),e(r.code)}))})),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),function(){return M.apply(this,arguments)})},{key:"getTeamId",value:(I=a(regeneratorRuntime.mark((function e(){var r,t,n,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gameManager.serverTeam){e.next=4;break}return e.abrupt("return",this.gameManager.serverTeam.id);case 4:return e.next=6,this.getRoomInfo();case 6:return r=e.sent,t=r.playerList,e.next=10,this.getPlayerInfo();case 10:n=e.sent,a=0;case 12:if(!(a<t.length)){e.next=19;break}if((u=t[a]).id!=n.id){e.next=16;break}return e.abrupt("return",u.teamId);case 16:a++,e.next=12;break;case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,this)}))),function(){return I.apply(this,arguments)})},{key:"sendToServer",value:(w=a(regeneratorRuntime.mark((function e(r){var t,n,a,u,o,s,c=this,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>1&&void 0!==p[1]?p[1]:null,n=t,r!=i.ChangeControler){e.next=10;break}return e.next=5,this.getPlayerInfo();case 5:return a=e.sent,e.next=8,this.getTeamId();case 8:u=e.sent,n={teamId:u,playerId:a.id};case 10:return o={type:r,data:n},i.Heart,s=new Promise((function(e){var r={data:o};c.curRoom.sendToGameSvr(r,(function(r){e(r.code)}))})),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"sendToRoom",value:(b=a(regeneratorRuntime.mark((function e(r,t){var n,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise(function(){var e=a(regeneratorRuntime.mark((function e(n){var a,o,i,s,p,f,m,l,h,g,d,y,v,k,R;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={type:r,data:t},o=[],i=MGOBE.ENUM.RecvType.ROOM_SOME,r!=c.Power&&r!=c.PowerEnd&&r!=c.SyncComplete&&r!=c.MatchedJoinGroup){e.next=10;break}return e.next=6,u.getTeammate();case 6:(s=e.sent)&&o.push(s.id),e.next=29;break;case 10:if(r!=c.EnemyPowerEnd){e.next=23;break}return e.next=13,u.getRoomInfo();case 13:if(!(p=e.sent)){e.next=21;break}return e.next=17,u.getPlayerInfo();case 17:for(f=e.sent,m=p.playerList,l=f.teamId,h=0;h<m.length;h++)(g=m[h]).teamId!=l&&o.push(g.id);case 21:e.next=29;break;case 23:if(r!=c.emoji){e.next=29;break}return e.next=26,u.getRoomInfo();case 26:for(d=e.sent,y=d.playerList,v=0;v<y.length;v++)k=y[v],o.push(k.id);case 29:R={recvType:i,recvPlayerList:o,msg:JSON.stringify(a)},u.curRoom.sendToClient(R,(function(e){n(e.code)}));case 32:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)}))),function(e,r){return b.apply(this,arguments)})},{key:"getTeammate",value:(P=a(regeneratorRuntime.mark((function e(){var r,t,n,a,u,o,i,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPlayerInfo();case 2:return r=e.sent,e.next=5,this.getRoomInfo();case 5:if(t=e.sent,n=!1,a=null,t){e.next=15;break}return e.next=11,this.getGroupInfo();case 11:(u=e.sent)?(n=!0,a=u.groupPlayerList):a=null,e.next=16;break;case 15:a=t.playerList;case 16:if(a){e.next=18;break}return e.abrupt("return",null);case 18:o={id:"",name:"",teamId:"",customPlayerStatus:0,customProfile:"",commonNetworkState:0,relayNetworkState:0,isRobot:!1,matchAttributes:[]},i=null,s=0;case 21:if(!(s<a.length)){e.next=41;break}if(c=a[s],!n){e.next=34;break}if(c.id==r.id){e.next=32;break}return(o=c).id=c.id,o.customPlayerStatus=c.customGroupPlayerStatus,o.commonNetworkState=c.commonGroupNetworkState,o.customProfile=c.customGroupPlayerProfile,i=o,e.abrupt("break",41);case 32:e.next=38;break;case 34:if(c.teamId!=r.teamId||c.id==r.id){e.next=38;break}return i=o=c,e.abrupt("break",41);case 38:s++,e.next=21;break;case 41:return e.abrupt("return",i);case 42:case"end":return e.stop()}}),e,this)}))),function(){return P.apply(this,arguments)})},{key:"inRunningRoom",value:(G=a(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRoomInfo();case 2:return r=e.sent,e.next=5,this.getGroupInfo();case 5:if(t=e.sent,!r||!t){e.next=10;break}if("ing"!=r.customProperties){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)})},{key:"reconnect",value:(x=a(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRoomInfo();case 2:r=e.sent,this.curRoom.initRoom(r),this.Listener.add(this.curRoom);case 5:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"getPlayerIndex",value:(R=a(regeneratorRuntime.mark((function e(r){var t,n,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=5;break}return e.next=3,this.getPlayerInfo();case 3:t=e.sent,r=t.id;case 5:if(!this.indexListCache[r]){e.next=7;break}return e.abrupt("return",this.indexListCache[r]);case 7:return e.next=9,this.getRoomInfo();case 9:if(n=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return a=n.playerList,t||a.map((function(e){e.id===r&&(t=e)})),u=1,a.filter((function(e,r){return e.teamId===t.teamId})).map((function(e,r){e.id===t.id&&(u=r+1)})),this.indexListCache[t.id]=u,e.abrupt("return",u);case 19:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"createGroup",value:(k=a(regeneratorRuntime.mark((function e(){var r,t,n,a,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPlayerInfo();case 2:return r=e.sent,t={name:r.name,customGroupPlayerStatus:r.stateGroup,customGroupPlayerProfile:r.profile},n={groupName:"",groupType:MGOBE.ENUM.GroupType.GROUP_LIMITED,maxPlayers:2,isForbidJoin:!1,isPersistent:!1,customProperties:"",playerInfo:t},a=new Promise((function(e){u.curGroup.createGroup(n,(function(r){0===r.code&&(u.Listener.add(u.curGroup),u.curGroup.initGroup(r.data.groupInfo),o("队组创建成功",r.data.groupInfo)),e(r.code)}))})),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"joinGroup",value:(v=a(regeneratorRuntime.mark((function e(r){var t,n,a,u,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPlayerInfo();case 2:return t=e.sent,n={name:t.name,customGroupPlayerStatus:s.NotReady,customGroupPlayerProfile:t.profile},a={playerInfo:n},this.curGroup.initGroup({id:r}),u=new Promise((function(e){o.curGroup.joinGroup(a,(function(r){0===r.code&&(o.Listener.add(o.curGroup),o.curGroup.initGroup(r.data.groupInfo)),e(r.code)}))})),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"leaveGroup",value:(y=a(regeneratorRuntime.mark((function e(){var r,t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGroupInfo();case 2:if(!(r=e.sent)){e.next=7;break}this.curGroup.initGroup(r),e.next=8;break;case 7:return e.abrupt("return",this.errorCode.EC_OK);case 8:return t=new Promise((function(e){n.curGroup.leaveGroup({},(function(r){0===r.code&&n.curGroup.initGroup(),e(r.code)}))})),e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"getGroupInfo",value:(d=a(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Promise((function(e){MGOBE.Group.getMyGroups((function(r){if(r.code===MGOBE.ErrCode.EC_OK&&r.data.groupInfoList.length>0)for(var t=0;t<r.data.groupInfoList.length;t++){var n=r.data.groupInfoList[t];if(n.type===MGOBE.ENUM.GroupType.GROUP_LIMITED){e(n);break}}else e(null)}))})),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"setGroupPlayerStatus",value:(g=a(regeneratorRuntime.mark((function e(r){var t,n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={customGroupPlayerStatus:r},n=new Promise((function(e){a.curGroup.changeCustomGroupPlayerStatus(t,(function(r){e(r)}))})),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)}))),function(e){return g.apply(this,arguments)})},{key:"removePlayerInGroup",value:(h=a(regeneratorRuntime.mark((function e(r){var t,n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={removePlayerId:r},n=new Promise((function(e){a.curGroup.removeGroupPlayer(t,(function(r){e(r.code)}))})),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"dismissGroup",value:(l=a(regeneratorRuntime.mark((function e(){var r,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Promise((function(e){t.curGroup.dismissGroup({},(function(r){e(r.code)}))})),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{key:"sendToGroup",value:(m=a(regeneratorRuntime.mark((function e(r,t){var n,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={type:r,content:t},new Promise(function(){var e=a(regeneratorRuntime.mark((function e(r){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getLoverInfo();case 2:(t=e.sent)?(a={recvType:MGOBE.ENUM.GroupRecvType.GROUP_SOME,recvPlayerList:[t.id],msg:JSON.stringify(n)},u.curGroup.sendToGroupClient(a,(function(e){r(!0)}))):r(!1);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),function(e,r){return m.apply(this,arguments)})},{key:"isCaptain",value:(f=a(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGroupInfo();case 2:return r=e.sent,e.next=5,this.getPlayerInfo();case 5:return t=e.sent,e.abrupt("return",r.owner==t.id);case 7:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"setPlayerStatus",value:(p=a(regeneratorRuntime.mark((function e(r){var t,n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={customPlayerStatus:r},n=new Promise((function(e){a.curRoom.changeCustomPlayerStatus(t,(function(r){e(r)}))})),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)})},{key:"getPlayerInfo",value:(u=a(regeneratorRuntime.mark((function e(){var r,t,n,a,u,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGroupInfo();case 2:r=e.sent,t=[],r&&(t=r.groupPlayerList),n=s.NotReady,a=0;case 7:if(!(a<t.length)){e.next=15;break}if((u=t[a]).id!==MGOBE.Player.id){e.next=12;break}return n=u.customGroupPlayerStatus,e.abrupt("break",15);case 12:a++,e.next=7;break;case 15:return o={id:MGOBE.Player.id,name:this.gameManager.PlayerData.nickname,openId:MGOBE.Player.openId,netState:MGOBE.Player.commonNetworkState,stateRoom:MGOBE.Player.customPlayerStatus,stateGroup:n,teamId:MGOBE.Player.teamId,profile:null!=MGOBE.Player.customProfile?MGOBE.Player.customProfile:JSON.stringify(this.gameManager.PlayerData)},e.abrupt("return",o);case 17:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getLoverInfo",value:(r=a(regeneratorRuntime.mark((function e(){var r,t,n,a,u,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGroupInfo();case 2:if(r=e.sent,t=null,r){e.next=7;break}return e.abrupt("return");case 7:n=r.groupPlayerList,a=0;case 9:if(!(a<n.length)){e.next=17;break}if((u=n[a]).id==MGOBE.Player.id){e.next=14;break}return t=u,e.abrupt("break",17);case 14:a++,e.next=9;break;case 17:if(t){e.next=20;break}return e.abrupt("return");case 20:return o={id:t.id,name:null!=t.name?t.name:t.id,netState:t.commonGroupNetworkState,stateGroup:t.customGroupPlayerStatus,profile:t.customGroupPlayerProfile},e.abrupt("return",o);case 22:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),e}()),u._RF.pop()}}}));

System.register("chunks:///UI/Dialog/Dialog.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Const.js"],(function(t,e){var n,i,o,s,a,l,r,h,u,d,g,c,y;return{setters:[function(t){n=t.createClass,i=t.classCallCheck,o=t.asyncToGenerator},function(t){s=t.cclegacy,a=t.HorizontalTextAlignment,l=t.tween,r=t.Vec3,h=t.loader,u=t.Prefab,d=t.instantiate,g=t.Label,c=t.SystemEventType},function(t){y=t.DialogButtonType}],execute:function(){s._RF.push({},"15867PII/lA6aXbZL4Ddkcx","Dialog",void 0),t("Dialog",function(){function t(e,n,o){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"确认",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"取消",h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"提示",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:a.CENTER;i(this,t),this.scene=null,this.node=null,this.result=null,this.SDK=null,this.title="提示",this.align=a.CENTER,this.text=null,this.buttonType=null,this.yesTip=null,this.noTip=null,this.dead=!1,this.scene=e,this.SDK=n,this.text=o,this.buttonType=s,this.yesTip=l,this.noTip=r,this.title=h,this.align=u}var e,s;return n(t,[{key:"InitBoard",value:(s=o(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Promise((function(t){h.loadRes("Prefab/Dialog/Dialog",u,(function(e,i){e?t(!1):(n.node=d(i),n.scene.getChildByName("UI").addChild(n.node),n.node.setSiblingIndex(100),t(!0))}))})),t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"destroy",value:function(){if(!this.dead){if(!this.node)return void(this.SDK=null);this.dead=!0,this.scene=null,l(this.node.getChildByName("background")).to(.3,{scale:new r(0,0,0)},{onComplete:function(){this.SDK.curDialog=null,this.SDK=null,this.node.destroy(),this.node=null}.bind(this)}).start()}}},{key:"show",value:(e=o(regeneratorRuntime.mark((function t(e,n){var i,o,s,a,h,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=u.length>2&&void 0!==u[2]?u[2]:null,null!=this.SDK.curDialog){t.next=23;break}return t.next=4,this.InitBoard();case 4:if(t.sent){t.next=8;break}return this.destroy(),t.abrupt("return");case 8:this.SDK.curDialog=this,o=this.node.getChildByName("background").getChildByName("yes"),s=this.node.getChildByName("background").getChildByName("no"),a=this.node.getChildByName("background").getChildByName("tip"),this.node.getChildByName("background").getChildByName("content").getComponent(g).horizontalAlign=this.align,this.node.getChildByName("background").getChildByName("content").getComponent(g).string=this.text,o.getChildByName("Label").getComponent(g).string=this.yesTip,s.getChildByName("Label").getComponent(g).string=this.noTip,a.getComponent(g).string=this.title,this.buttonType==y.single&&(s.active=!1,h=new r,o.getPosition(h),h.x=0,o.setPosition(h)),this.node.getChildByName("background").setScale(new r(0,0,0)),this.node.active=!0,l(this.node.getChildByName("background")).to(.3,{scale:new r(.5,.5,.5),easing:"easeOutExpo"}).start(),o.on(c.TOUCH_END,n,e),i&&s.on(c.TOUCH_END,i,e);case 23:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})}]),t}()),s._RF.pop()}}}));

System.register("chunks:///UI/Board/BaseBoard.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Const.js","../Dialog/Dialog.js"],(function(e,t){var a,r,n,i,o,s,u,c;return{setters:[function(e){a=e.createClass,r=e.classCallCheck,n=e.asyncToGenerator},function(e){i=e.cclegacy,o=e._decorator},function(e){s=e.log,u=e.DialogButtonType},function(e){c=e.Dialog}],execute:function(){i._RF.push({},"72680Q0ztVKyaWXTajENF2V","BaseBoard",void 0),o.ccclass,o.property,e("BaseBoard",function(){function e(t,a){r(this,e),this.board=null,this.SDK=null,this.scene=null,this.name=null,this.uiControl=null,this.dead=!1,this.sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))},this.SDK=a,this.scene=t}var t,i;return a(e,[{key:"Init",value:(i=n(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s("初始化界面:",this.name),!this.board){e.next=4;break}return this.InitEvent(),e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"destroy",value:function(){s("销毁界面:",this.name),this.board.active=!1,this.dead=!0}},{key:"setListener",value:function(){s("绑定监听:",this.name)}},{key:"InitEvent",value:function(){s("初始化UI事件",this.name)}},{key:"initData",value:function(){this.dead=!1,this.uiControl&&this.uiControl.initData()}},{key:"ChangeBoard",value:(t=n(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.SDK.curBoard,!t){e.next=14;break}e.t0=t.name,e.next="MainBoard"===e.t0?5:"GamingBoard"===e.t0?12:14;break;case 5:return e.next=7,this.SDK.leaveGroup();case 7:return e.next=9,this.SDK.leaveRoom();case 9:return this.SDK.gameManager.teammaterIsLover=void 0,this.SDK.gameManager.enemyIsLover=void 0,e.abrupt("break",14);case 12:return this.SDK.gameManager.isRunning=!0,e.abrupt("break",14);case 14:if(!a){e.next=24;break}e.t1=a.name,e.next="GamingBoard"===e.t1?18:"ResultBoard"===e.t1?21:24;break;case 18:return this.SDK.gameManager.isRunning=!1,this.SDK.gameManager.isControler=!1,e.abrupt("break",24);case 21:return this.SDK.gameManager.teammaterIsLover=void 0,this.SDK.gameManager.enemyIsLover=void 0,e.abrupt("break",24);case 24:return a||(a=t),s("界面切换",a.name,"--\x3e",t.name),this.SDK.curBoard=t,e.next=29,t.Init();case 29:if(!e.sent){e.next=60;break}if(this.SDK.Room.onCancelMatch=null,this.SDK.Room.onMatch=null,this.SDK.curRoom.onChangePlayerNetworkState=null,this.SDK.curRoom.onLeaveRoom=null,this.SDK.curRoom.onRecvFromGameSvr=null,this.SDK.curRoom.onRecvFromClient=null,this.SDK.curGroup.onChangeCustomGroupPlayerStatus=null,this.SDK.curGroup.onChangeGroupPlayerNetworkState=null,this.SDK.curGroup.onRecvFromGroupClient=null,this.SDK.curGroup.onJoinGroup=null,this.SDK.curGroup.onLeaveGroup=null,this.SDK.curGroup.onDismissGroup=null,!t.uiControl){e.next=47;break}return t.uiControl.board=t.board,e.next=47,t.uiControl.initUI(t.board);case 47:t.initData(),t.setListener(),t.scene.getChildByName("UI").getChildByName("loading").active=!1,this.SDK.gameManager.MainBoard.board.active=!1,this.SDK.gameManager.GamingBoard.board.active=!1,this.SDK.gameManager.WaitLoverBoard.board.active=!1,this.SDK.gameManager.TeachingBoard.board.active=!1,this.SDK.gameManager.MatchingBoard.board.active=!1,this.SDK.gameManager.ResultBoard.board.active=!1,t.board.active=!0,a!=t&&a.destroy(),e.next=66;break;case 60:return e.next=63,t.destroy();case 63:return r=new c(a.scene,this.SDK,"网络出现问题,无法正常游戏",u.single,"确定"),e.next=66,r.show(this,(function(){this.SDK.curDialog.destroy()}));case 66:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()),i._RF.pop()}}}));

System.register("chunks:///UI/Board/WaitLoverBoard.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Const.js","../../Util.js","../Dialog/Dialog.js","./BaseBoard.js"],(function(e,t){var a,r,n,i,o,s,h,l,c,u,d,g,y,m,p,C,B,N,v,f,D,S,k,b,w,x,K,R,G,P,M;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){a=e.applyDecoratedDescriptor,r=e.inherits,n=e.classCallCheck,i=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.createClass,h=e.get,l=e.asyncToGenerator},function(e){c=e.cclegacy,u=e.SystemEventType,d=e.Label,g=e.HorizontalTextAlignment,y=e.tween,m=e.Vec3},function(e){p=e.log,C=e.StatisticsKey,B=e.NetState,N=e.GroupMessageType,v=e.GroupSysMessageType,f=e.PlayerState,D=e.DialogButtonType,S=e.LabelColor},function(e){k=e.throttle},function(e){b=e.Dialog},function(e){w=e.BaseBoard}],execute:function(){c._RF.push({},"638a0cfbatPTK9EkM3XiINe","WaitLoverBoard",void 0),M=function(){function e(t,a){n(this,e),this.board=null,this.SDK=null,this.team1=null,this.team2=null,this.board=t,this.SDK=a}var t,a;return s(e,[{key:"initUI",value:(a=l(regeneratorRuntime.mark((function e(t){var a,r,n,i,o,s,h,l,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.board=t,e.next=3,this.SDK.getPlayerInfo();case 3:return a=e.sent,e.next=6,this.SDK.getGroupInfo();case 6:if(r=e.sent,n=null,i=null,o=this.board.getChildByName("team1"),s=o.getChildByName("user1"),h=o.getChildByName("user2"),s.getChildByName("nickName").getComponent(d).string=a.name,this.SDK.gameManager.Util.loadRemoteImg(JSON.parse(a.profile).avatar_url,s.getChildByName("avatarBg").getChildByName("avatar")),s.getChildByName("state").getComponent(d).string=a.stateGroup==f.NotReady?"未准备":"已准备",s.getChildByName("state").getComponent(d).color=a.stateGroup==f.NotReady?S.NotReady:S.Ready,this.board.getChildByName("ready").getChildByName("Button-ready").getChildByName("Label").getComponent(d).string=a.stateGroup==f.NotReady?"准备":"取消准备",!r){e.next=33;break}i=r.owner,l=r.groupPlayerList,c=0;case 21:if(!(c<l.length)){e.next=29;break}if((u=l[c]).id==a.id){e.next=26;break}return n=u,e.abrupt("break",29);case 26:c++,e.next=21;break;case 29:p("capId: ",i,a.id),i==a.id?(null!=n?(this.board.getChildByName("ready").getChildByName("Button-invite").active=!1,this.board.getChildByName("ready").getChildByName("Button-match").active=!0):(this.board.getChildByName("ready").getChildByName("Button-invite").active=!0,this.board.getChildByName("ready").getChildByName("Button-match").active=!1),this.board.getChildByName("Cancel").active=!0,this.board.getChildByName("ready").getChildByName("Button-ready").active=!1,s.getChildByName("state").getComponent(d).string="已准备",h.getChildByName("state").getComponent(d).string="未准备",h.getChildByName("state").getComponent(d).color=S.NotReady,s.getChildByName("state").getComponent(d).color=S.Captain):(this.board.getChildByName("Cancel").active=!1,this.board.getChildByName("ready").getChildByName("Button-match").active=!1,this.board.getChildByName("ready").getChildByName("Button-invite").active=!1,this.board.getChildByName("ready").getChildByName("Button-ready").active=!0,h.getChildByName("state").getComponent(d).string="已准备",s.getChildByName("state").getComponent(d).string=a.stateGroup===f.Ready?"已准备":"未准备",s.getChildByName("state").getComponent(d).color=a.stateGroup===f.Ready?S.Ready:S.NotReady,h.getChildByName("state").getComponent(d).color=S.Captain),null!=n?(o.getChildByName("wait").active=!1,h.getChildByName("nickName").getComponent(d).string=n.name,h.getChildByName("state").getComponent(d).string=n.customGroupPlayerStatus==f.NotReady?n.id==i?"已准备":"未准备":"已准备",h.getChildByName("state").getComponent(d).color=n.customGroupPlayerStatus==f.NotReady?n.id==i?S.Ready:S.NotReady:S.Ready,this.SDK.gameManager.Util.loadRemoteImg(JSON.parse(n.customGroupPlayerProfile).avatar_url,h.getChildByName("avatarBg").getChildByName("avatar")),h.active=!0):(o.getChildByName("wait").active=!0,h.active=!1);case 33:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"initData",value:function(){}},{key:"playerReady",value:(t=l(regeneratorRuntime.mark((function e(t,a){var r,n,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getPlayerInfo();case 2:return r=e.sent,e.next=5,this.SDK.getGroupInfo();case 5:n=e.sent,i=null,i=t==r.id?this.board.getChildByName("team1").getChildByName("user1"):this.board.getChildByName("team1").getChildByName("user2"),t!=n.owner?(o=a===f.NotReady?{tip:"未准备",color:S.NotReady}:{tip:"已准备",color:S.Ready},i.getChildByName("state").getComponent(d).string=o.tip,i.getChildByName("state").getComponent(d).color=o.color):(s=this.board.getChildByName("ready").getChildByName("Button-match"),a===f.NotReady?s.active=!1:s.active=!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"playerJoin",value:function(e,t){for(var a=null,r=0;r<t.length;r++){var n=t[r];if(n.id==e){a=n;break}}var i=a.customGroupPlayerProfile?JSON.parse(a.customGroupPlayerProfile):JSON.parse(a.profile);this.SDK.gameManager.Util.loadRemoteImg(i.avatar_url,this.board.getChildByName("team1").getChildByName("user2").getChildByName("avatarBg").getChildByName("avatar")),this.board.getChildByName("ready").getChildByName("Button-invite").active=!1,this.board.getChildByName("ready").getChildByName("Button-match").active=!0,this.board.getChildByName("team1").getChildByName("wait").active=!1,this.board.getChildByName("team1").getChildByName("user2").active=!0,this.board.getChildByName("team1").getChildByName("user2").getChildByName("nickName").getComponent(d).string=a.name}},{key:"playerLeave",value:function(){this.board.getChildByName("team1").getChildByName("wait").active=!0,this.board.getChildByName("team1").getChildByName("user2").active=!1,this.board.getChildByName("ready").getChildByName("Button-invite").active=!0,this.board.getChildByName("ready").getChildByName("Button-match").active=!1}}]),e}(),e("WaitLoverBoard",(x=k(1e3),K=k(),R=k(),G=k(500),a((P=function(e){function t(e,a){var r;return n(this,t),(r=i(this,o(t).call(this,e,a))).uiControl=null,r.name="WaitLoverBoard",r.uiControl=new M(r.board,r.SDK),r}var a,c,S,k,w,x,K,R,G;return r(t,e),s(t,[{key:"setListener",value:function(){h(o(t.prototype),"setListener",this).call(this),this.SDK.curGroup.onChangeCustomGroupPlayerStatus=this.onChangeCustomGroupPlayerStatus.bind(this),this.SDK.curGroup.onChangeGroupPlayerNetworkState=this.onChangeGroupPlayerNetworkState.bind(this),this.SDK.curGroup.onRecvFromGroupClient=this.onRecvFromGroupClient.bind(this),this.SDK.curGroup.onJoinGroup=this.onJoinGroup.bind(this),this.SDK.curGroup.onLeaveGroup=this.onLeaveGroup.bind(this),this.SDK.curGroup.onDismissGroup=this.onDismissGroup.bind(this),this.SDK.gameManager.timerSingal&&(this.SDK.gameManager.timerSingal=null)}},{key:"onDismissGroup",value:(G=l(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.SDK.curGroup.initGroup(),e.next=4,this.ChangeBoard(this.SDK.gameManager.MainBoard);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return G.apply(this,arguments)})},{key:"onChangeCustomGroupPlayerStatus",value:(R=l(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p("玩家[",t.data.changePlayerId,"]准备状态有变化",t.data.customGroupPlayerStatus),e.next=3,this.uiControl.playerReady(t.data.changePlayerId,t.data.customGroupPlayerStatus);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"onChangeGroupPlayerNetworkState",value:(K=l(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p("玩家[",t.data.changePlayerId,"]在线状态有变化",t.data.networkState),e.next=3,this.SDK.isCaptain();case 3:if(e.sent){e.next=10;break}if(t.data.networkState!=B.Offline){e.next=8;break}return e.next=8,this.ChangeBoard(this.SDK.gameManager.MainBoard);case 8:e.next=14;break;case 10:return e.next=12,this.SDK.removePlayerInGroup(t.data.changePlayerId);case 12:0===e.sent?this.uiControl.playerLeave():p("踢出玩家失败:",t.data.changePlayerId);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return K.apply(this,arguments)})},{key:"onRecvFromGroupClient",value:(x=l(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=JSON.parse(t.data.msg)).type!=N.Sys){e.next=6;break}if(a.content!=v.Matching){e.next=6;break}return e.next=6,this.ChangeBoard(this.SDK.gameManager.MatchingBoard);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"onJoinGroup",value:function(e){p("有玩家加入队组:",e.data.joinPlayerId);var t=e.data.joinPlayerId,a=e.data.groupInfo.groupPlayerList;this.uiControl.playerJoin(t,a)}},{key:"onLeaveGroup",value:function(e){p("有人离开队组",e.data.leavePlayerId),this.uiControl.playerLeave()}},{key:"InitEvent",value:function(){h(o(t.prototype),"InitEvent",this).call(this);var e=this.board.getChildByName("ready").getChildByName("Button-ready"),a=this.board.getChildByName("ready").getChildByName("Button-match"),r=this.board.getChildByName("ready").getChildByName("Button-invite"),n=this.board.getChildByName("Cancel").getChildByName("Button");e.on(u.TOUCH_END,this.clickReady,this),n.on(u.TOUCH_END,this.clickLeave,this),a.on(u.TOUCH_END,this.clickMatch,this),r.on(u.TOUCH_END,this.clickInvite,this),document.addEventListener("visibilitychange",this.visibilityChange.bind(this))}},{key:"destroy",value:function(){h(o(t.prototype),"destroy",this).call(this);var e=this.board.getChildByName("ready").getChildByName("Button-ready"),a=this.board.getChildByName("ready").getChildByName("Button-match"),r=this.board.getChildByName("ready").getChildByName("Button-invite"),n=this.board.getChildByName("Cancel").getChildByName("Button");e.off(u.TOUCH_END),n.off(u.TOUCH_END),a.off(u.TOUCH_END),r.off(u.TOUCH_END)}},{key:"clickReady",value:(w=l(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getPlayerInfo();case 2:return t=e.sent,a=f.NotReady,r="准备",t.stateGroup===f.NotReady&&(a=f.Ready,r="取消准备"),e.next=8,this.SDK.setGroupPlayerStatus(a);case 8:e.sent,this.board.getChildByName("ready").getChildByName("Button-ready").getChildByName("Label").getComponent(d).string=r;case 10:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"clickLeave",value:(k=l(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b(this.scene,this.SDK,"确认取消后，游戏邀请自动失效，另一半无法进入。",D.multiple,"再想想","取消游戏邀请","取消游戏邀请",g.LEFT),e.next=3,t.show(this,(function(){a.SDK.curDialog.dead||a.SDK.curDialog.destroy()}),(function(){a.SDK.curDialog.dead||(a.SDK.curDialog.destroy(),a.playerLeave())}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"playerLeave",value:(S=l(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getGroupInfo();case 2:return t=e.sent,e.next=5,this.SDK.getPlayerInfo();case 5:if(a=e.sent,!t){e.next=26;break}if(r=t.owner,a.id!=r){e.next=22;break}return e.next=11,this.SDK.getTeammate();case 11:if(!e.sent){e.next=15;break}this.SDK.gameManager.Util.callTDGA(C.main_couple_cancel),e.next=16;break;case 15:this.SDK.gameManager.Util.callTDGA(C.main_wait_invite_cancel);case 16:return e.next=18,this.SDK.dismissGroup();case 18:return e.next=20,this.ChangeBoard(this.SDK.gameManager.MainBoard);case 20:e.next=24;break;case 22:return e.next=24,this.ChangeBoard(this.SDK.gameManager.MainBoard);case 24:e.next=28;break;case 26:return e.next=28,this.ChangeBoard(this.SDK.gameManager.MainBoard);case 28:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"clickMatch",value:(c=l(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getLoverInfo();case 2:if(!(t=e.sent)){e.next=27;break}if(t.stateGroup!==f.Ready){e.next=23;break}return e.next=7,this.SDK.matchingLover();case 7:if((a=e.sent)!=this.SDK.errorCode.EC_OK){e.next=16;break}return e.next=12,this.SDK.sendToGroup(N.Sys,v.Matching);case 12:return e.next=14,this.ChangeBoard(this.SDK.gameManager.MatchingBoard);case 14:e.next=21;break;case 16:return e.next=18,this.SDK.leaveRoom();case 18:return e.next=20,this.SDK.cancelMatchinig();case 20:this.SDK.gameManager.showToast("进入匹配失败(".concat(a,")"),2);case 21:e.next=25;break;case 23:this.SDK.gameManager.showToast("另一半还没准备好",2);case 25:e.next=37;break;case 27:return e.next=29,this.SDK.cancelMatchinig();case 29:return e.next=31,this.SDK.leaveGroup();case 31:return e.next=33,this.SDK.leaveRoom();case 33:return e.next=35,this.ChangeBoard(this.SDK.gameManager.MainBoard);case 35:this.SDK.gameManager.showToast("获取对象数据失败",2);case 37:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"clickInvite",value:(a=l(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.SDK.gameManager.Util.callTDGA(C.main_couple_wait_invite),(t=this.board.getChildByName("sharePlatform")).getChildByName("content").setPosition(0,-240,0),t.active=!0,y(t.getChildByName("content")).to(.3,{position:new m(0,-38,0)}).start(),t.getChildByName("content").getChildByName("inApp").on(u.TOUCH_END,this.shareToMessage,this),t.getChildByName("content").getChildByName("weChat").on(u.TOUCH_END,this.shareToWX,this),t.getChildByName("content").getChildByName("close").on(u.TOUCH_END,this.close,this),t.getChildByName("maskBg").on(u.TOUCH_END,this.close,this);case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"visibilityChange",value:function(){}},{key:"shareToMessage",value:function(){var e=this,t=navigator.userAgent.toLowerCase().indexOf("android")>-1;window.toldTA=function(){!t&&e.SDK.gameManager.showToast("发送成功",2),e.close(),e.SDK.gameManager.Util.callTDGA(C.game_share_chat)},window.sendLinkFail=function(){!t&&e.SDK.gameManager.showToast("邀请失败",2)},window.RunNative("shareURLToPlatform",{url:"lianaiji://open.minigame?name=jump&group=".concat(this.SDK.curGroup.groupInfo.id),title:"双人跳一跳",content:"亲爱的，和我一起玩双人跳一跳吧",imgUrl:"https://cdn1.didiapp.com/jump/banner.png",source:"双人跳一跳",platform:["chat"]},"toldTA","sendLinkFail")}},{key:"shareToWX",value:function(){var e=this;window.wxSuc=function(){e.close(),e.SDK.gameManager.Util.callTDGA(C.game_share_wechat)},window.wxErr=function(){};var t=this.SDK.gameManager.PlayerData.avatar_url;window.RunNative("shareURLToPlatform",{url:"https://kitty.didiapp.com/lovenote/miniGameinvite?from=jump&group=".concat(this.SDK.curGroup.groupInfo.id,"&avatar=").concat(t),title:"邀你一起玩双人跳一跳！点击链接进入游戏",content:"我们组队，和其他情侣PK，相信我们一定是最有默契的情侣！",imgUrl:"https://cdn1.didiapp.com/jump/banner.png",source:"恋爱记",platform:["wxsession"]},"wxSuc","wxErr")}},{key:"close",value:function(){var e=this.board.getChildByName("sharePlatform");e.active=!1,e.getChildByName("content").getChildByName("inApp").off(u.TOUCH_END),e.getChildByName("content").getChildByName("weChat").off(u.TOUCH_END),e.getChildByName("content").getChildByName("close").off(u.TOUCH_END),e.getChildByName("maskBg").off(u.TOUCH_END)}}]),t}(w)).prototype,"clickReady",[x],Object.getOwnPropertyDescriptor(P.prototype,"clickReady"),P.prototype),a(P.prototype,"clickLeave",[K],Object.getOwnPropertyDescriptor(P.prototype,"clickLeave"),P.prototype),a(P.prototype,"clickMatch",[R],Object.getOwnPropertyDescriptor(P.prototype,"clickMatch"),P.prototype),a(P.prototype,"clickInvite",[G],Object.getOwnPropertyDescriptor(P.prototype,"clickInvite"),P.prototype),P)),c._RF.pop()}}}));

System.register("chunks:///OtherPlayer.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Const.js"],(function(t,e){var i,n,s,o,a,r,u,h,l,m,p,c,d,g,_,f,y,v,j,x,R,P,w,B,b,k,C,D,M,T,z,S,N,Y,F;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inherits,s=t.classCallCheck,o=t.possibleConstructorReturn,a=t.getPrototypeOf,r=t.initializerDefineProperty,u=t.assertThisInitialized,h=t.createClass,l=t.asyncToGenerator},function(t){m=t.cclegacy,p=t._decorator,c=t.Vec3,d=t.Quat,g=t.CCFloat,_=t.Vec2,f=t.tween,y=t.Component,v=t.instantiate,j=t.loader,x=t.Prefab},function(t){R=t.log,P=t.JumpStatus,w=t.TeamColor}],execute:function(){m._RF.push({},"f514fFBUXpDva7Z4+Bu/z5l","OtherPlayer",void 0),N=p.ccclass,Y=p.property,new c,new c,F=new d,new d,t("OtherPlayer",(B=N("OtherPlayer"),b=Y({type:g}),k=Y({type:g}),C=Y({type:g}),B((T=i((M=function(t){function e(){var t,i;s(this,e);for(var n=arguments.length,h=new Array(n),l=0;l<n;l++)h[l]=arguments[l];return i=o(this,(t=a(e)).call.apply(t,[this].concat(h))),r(i,"jumpHeight",T,u(i)),r(i,"jumpDuration",z,u(i)),r(i,"max_time",S,u(i)),i.originPosY=0,i.originRotation=new d(0,1,0,0),i._isRunning=!1,i.curRotation=new d,i._cur_position=new c,i._jump_time=0,i.jumpResult={time:null,distance:null,offset:null,status:null},i._face=new _,i._axis=new c,i._stat_power=!1,i._stat_jump=!1,i.curBox=null,i.nextBox=null,i.control=!1,i.modelBody=null,i.modelHead=null,i.modelHeadPos=new c,i.modelTire=null,i.map=null,i.index=0,i}var i,m;return n(e,t),h(e,[{key:"onLoad",value:function(){}},{key:"start",value:function(){this.originPosY=this.node.position.y,this.node.getRotation(this.curRotation)}},{key:"initPlayer",value:function(){var t=new c(this.gameManager.otherTeam.pos[0],this.originPosY,this.gameManager.otherTeam.pos[1]);this._cur_position=t;new d;this.index=0,this.node.setPosition(t),this.node.setRotation(this.originRotation),this._jump_time=0,this._stat_power=!1,this._stat_jump=!1}},{key:"PowerEnd",value:function(t){if(0==this.control){this.curBox=this.map[this.index],this.nextBox=this.map[this.index+1],this._stat_power=!1;var e=new c;this.node.getPosition(e),e.y=this.originPosY,this.node.setPosition(e),this.start_jump(t)}}},{key:"start_jump",value:function(t){this._stat_power||(R("地图长度:",this.gameManager.map.length),this._stat_jump=!0,this._jump_time=0,this.getFace(this._face),this._axis=this.gameManager.Util.getJumpAxis(this.node,this.nextBox.node),this.node.getRotation(this.curRotation),this.node.getPosition(this._cur_position),this.jumpResult.distance=t.distance,this.jumpResult.offset=t.pos?t.pos:t.offset,this.jumpResult.status=t.status,this.jumpResult.time=t.time,t.index&&(this.index=t.index))}},{key:"action_jump",value:function(t){if(this._stat_jump){this._jump_time+=t;var e=0,i=0,n=0,s=!1;if(this._jump_time<this.jumpDuration){var o=-4*this.jumpHeight/(this.jumpDuration*this.jumpDuration),a=this.jumpDuration/2,r=this.jumpHeight;e=o*(this._jump_time-a)*(this._jump_time-a)+r+this.originPosY,i=t/this.jumpDuration*this.jumpResult.distance,n=this._jump_time/this.jumpDuration*360}else e=this.originPosY,n=0,this._stat_jump=!1,s=!0;var u=new c;this.node.getPosition(u);var h=this.gameManager.Util.getPosWithVec(u,this._face,i);h.y=e,d.rotateAround(F,this.curRotation,this._axis,3.1415*n/180),this.node.setPosition(h),this.node.setRotation(F),s&&this.action_jump_end()}}},{key:"action_jump_end",value:function(){var t=new c;if(this.node.getPosition(t),this.jumpResult.status==P.current){R("[敌人]原地跳,修正量:",this.jumpResult.offset);var e=new c;this.curBox.node.getPosition(e),e.x+=this.jumpResult.offset[0],e.z+=this.jumpResult.offset[1],e.y=this.originPosY,this.node.setPosition(e),this.node.getPosition(this._cur_position),this.node.setRotation(this.originRotation)}else if(this.jumpResult.status==P.next){R("[敌人]跳到下一块,修正量:",this.jumpResult.offset);var i=new c;this.nextBox.node.getPosition(i),i.x+=this.jumpResult.offset[0],i.z+=this.jumpResult.offset[1],i.y=this.originPosY,this.node.setPosition(i),this.node.getPosition(this._cur_position),this.index+=1,this.curBox=this.gameManager.map[this.index],this.nextBox=this.gameManager.map[this.index+1],this.node.setRotation(this.originRotation)}else if(this.jumpResult.status==P.dead){var n=new c;n.set(t),n.y=-.5,this.node.setRotation(this.originRotation),f(this.node).to(1,{position:n},{onComplete:this.jumpDead.bind(this)}).start()}"TeachingBoard"==this.gameManager.SDK.curBoard.name&&this.gameManager.teachJumpSingal(!0)}},{key:"jumpDead",value:function(){"TeachingBoard"==this.gameManager.SDK.curBoard.name&&this.gameManager.teachJumpSingal(!0),this.reset()}},{key:"reset",value:function(){this.node.setPosition(this._cur_position),this.node.setRotation(this.originRotation)}},{key:"update",value:function(t){(this.isRunning||this.gameManager.SDK&&this.gameManager.SDK.curBoard&&"TeachingBoard"==this.gameManager.SDK.curBoard.name)&&this.action_jump(t)}},{key:"setFace",value:function(){var t=this;if(this.nextBox){var e=f(this.node),i=new d;this.node.getRotation(i);var n=this.gameManager.Util.getRotaionQuat(this.node,this.nextBox.node),s=new d;e.to(.2,{},{onUpdate:function(e,o){s.set(i).slerp(n,o),t.node.setRotation(s)}}),e.start()}}},{key:"getFace",value:function(t){if(this.nextBox){new _;var e=new c,i=new c;this.node.getPosition(e),this.nextBox.node.getPosition(i),t.set(i.x-e.x,i.z-e.z)}else t.set(this._face.x,this._face.y)}},{key:"setModel",value:(m=l(regeneratorRuntime.mark((function t(e){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e==w.blue?i=this.gameManager.ChessPrefabEnemy.blue:e==w.red&&(i=this.gameManager.ChessPrefabEnemy.red),(n=this.node.getChildByName("Node"))&&this.node.removeChild(n),i&&v(i).setParent(this.node),t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"setTire",value:(i=l(regeneratorRuntime.mark((function t(e){var i,n,s,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=null,t.t0=e,t.next=1===t.t0?4:6;break;case 4:return i="vip",t.abrupt("break",6);case 6:if((n=this.node.getChildByName("Tire").getChildByName("Node_enemy"))&&this.node.getChildByName("Tire").removeChild(n),i){t.next=10;break}return t.abrupt("return",!1);case 10:return s="Model/Tire/"+i+"/Node_enemy",new Promise((function(t){j.loadRes(s,x,(function(e,i){var n=v(i);n.setParent(o.node.getChildByName("Tire")),o.modelTire=n,t(n)}))})),t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"isRunning",set:function(t){this._isRunning=t},get:function(){return this._isRunning}}]),e}(y)).prototype,"jumpHeight",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),z=i(M.prototype,"jumpDuration",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),S=i(M.prototype,"max_time",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),D=M))||D)),m._RF.pop()}}}));

System.register("chunks:///UI/avatar.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var i,s,n,r,a,o,c,l,u,h,p,v;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){i=e.inherits,s=e.classCallCheck,n=e.possibleConstructorReturn,r=e.getPrototypeOf,a=e.createClass},function(e){o=e.cclegacy,c=e._decorator,l=e.Sprite,u=e.Component}],execute:function(){o._RF.push({},"62231BivyRLC6qStdnthPWc","avatar",void 0),v=c.ccclass,c.property,e("Avatar",(h=v("Avatar"),h(p=function(e){function t(){var e,i;s(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(i=n(this,(e=r(t)).call.apply(e,[this].concat(o)))).run=!1,i.time=0,i.loopTime=5,i.isLeave=!1,i}return i(t,e),a(t,[{key:"timeStart",value:function(){this.isLeave||(this.run=!0)}},{key:"reset",value:function(){if(this.isLeave)return this.setOffline();this.run=!1,this.time=0;var e=this.node.getComponent(l).material.passes[0];e.setUniform(e.getHandle("precent"),100)}},{key:"setOffline",value:function(){this.isLeave=!0;var e=this.node.getComponent(l).material.passes[0];e.setUniform(e.getHandle("precent"),0)}},{key:"setOnline",value:function(){this.isLeave=!1,this.reset()}},{key:"update",value:function(e){if(this.run){var t=this.node.getComponent(l).material.passes[0];t.setUniform(t.getHandle("precent"),20*this.time),this.time+=e,this.time>=this.loopTime&&this.reset()}}}]),t}(u))||p)),o._RF.pop()}}}));

System.register("chunks:///UI/Board/GamingBoard.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Const.js","../../Util.js","../Dialog/Dialog.js","./BaseBoard.js","../avatar.js"],(function(e,t){var a,r,i,n,s,o,m,h,g,l,d,c,u,p,y,f,v,C,S,N,B,D,b,_,x,K,w,k,R,P,T,M,I,A,U,O,j,E,H,L,F,G,J,z,V;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){a=e.applyDecoratedDescriptor,r=e.inherits,i=e.classCallCheck,n=e.possibleConstructorReturn,s=e.getPrototypeOf,o=e.createClass,m=e.get,h=e.asyncToGenerator},function(e){g=e.cclegacy,l=e.tween,d=e.ProgressBar,c=e.Label,u=e.SystemEventType,p=e.Vec3,y=e.Node,f=e.UITransform,v=e.Sprite,C=e.loader,S=e.Prefab,N=e.UIOpacity,B=e.instantiate},function(e){D=e.TeamColor,b=e.StatisticsKey,_=e.DialogButtonType,x=e.ClientDataType,K=e.NetState,w=e.ServerDataType,k=e.log,R=e.PlayerState,P=e.AIDataType,T=e.RoomDataType,M=e.EmojiType},function(e){I=e.throttle},function(e){A=e.Dialog},function(e){U=e.BaseBoard},function(e){O=e.Avatar}],execute:function(){g._RF.push({},"5a91dy6sIFJ+IdMqEEFo6I0","GamingBoard",void 0),V=function(){function e(t,a){i(this,e),this.board=null,this.SDK=null,this.gameStart=!1,this.end=!1,this.curAvatar=null,this.selfAvatar=null,this.teammaterAvatar=null,this.timeNumberNode=null,this.time=0,this.messageList=[],this.selfSign="",this.top1=!0,this.board=t,this.SDK=a}var t,a,r,n,s,m,g;return o(e,[{key:"initUI",value:(g=h(regeneratorRuntime.mark((function e(t){var a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k("debug",this.board),this.board=t,this.gameStart=!1,this.changeSoundUI(!0),a=this.board.getChildByName("Header"),this.team1Node=this.board.getChildByName("Header").getChildByName("team0"),this.team2Node=this.board.getChildByName("Header").getChildByName("team1"),this.comp1=this.team1Node.getChildByName("avatar-1").getChildByName("avatar"),this.comp2=this.team1Node.getChildByName("avatar-2").getChildByName("avatar"),this.comp3=this.team2Node.getChildByName("avatar-1").getChildByName("avatar"),this.comp4=this.team2Node.getChildByName("avatar-2").getChildByName("avatar"),this.timeNumberNode=a.getChildByName("time").getChildByName("number"),a.getChildByName("tip").active=!1,a.getChildByName("wait").active=!1,a.getChildByName("end").active=!1,a.getChildByName("team0").getChildByName("avatar-1").getChildByName("offLine").active=!1,a.getChildByName("team0").getChildByName("avatar-2").getChildByName("offLine").active=!1,a.getChildByName("team1").getChildByName("avatar-1").getChildByName("offLine").active=!1,a.getChildByName("team1").getChildByName("avatar-2").getChildByName("offLine").active=!1,a.getChildByName("team0").getChildByName("avatar-1").getChildByName("avatar").getComponent(O).setOnline(),a.getChildByName("team0").getChildByName("avatar-2").getChildByName("avatar").getComponent(O).setOnline(),a.getChildByName("team1").getChildByName("avatar-1").getChildByName("avatar").getComponent(O).setOnline(),a.getChildByName("team1").getChildByName("avatar-2").getChildByName("avatar").getComponent(O).setOnline(),a.getChildByName("score").getChildByName("redScore").getComponent(c).string="0分",a.getChildByName("score").getChildByName("blueScore").getComponent(c).string="0分",e.next=27,this.SDK.getTeamId();case 27:return r=e.sent,e.next=30,this.SDK.getPlayerIndex();case 30:return i=e.sent,e.next=33,this.loadAvatar();case 33:r==D.red?(this.SDK.gameManager.Util.loadImg("Texture/UI/gaming/lingxian_2/spriteFrame",this.board.getParent().getParent().getChildByName("enemy1")),this.SDK.gameManager.Util.loadImg("Texture/UI/gaming/lingxian_2/spriteFrame",this.board.getParent().getParent().getChildByName("enemy2")),1==i?(this.selfAvatar=this.comp1,this.selfSign="1-1",this.teammaterAvatar=this.comp2):(this.selfAvatar=this.comp2,this.selfSign="1-2",this.teammaterAvatar=this.comp1)):(this.SDK.gameManager.Util.loadImg("Texture/UI/gaming/lingxian_1/spriteFrame",this.board.getParent().getParent().getChildByName("enemy1")),this.SDK.gameManager.Util.loadImg("Texture/UI/gaming/lingxian_1/spriteFrame",this.board.getParent().getParent().getChildByName("enemy2")),1==i?(this.selfAvatar=this.comp3,this.selfSign="2-1",this.teammaterAvatar=this.comp4):(this.selfAvatar=this.comp4,this.selfSign="2-2",this.teammaterAvatar=this.comp3)),this.SDK.gameManager.isReconnect?a.getChildByName("ready").active=!1:this.setReady();case 35:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"initData",value:function(){this.time=-100}},{key:"setTime",value:(m=h(regeneratorRuntime.mark((function e(t){var a,r,i,n,s,o,m,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.board){e.next=52;break}if(!(this.time!=t&&t<=this.SDK.gameManager.gameTime&&t>=0)){e.next=52;break}if(this.time=t,r=[],0==t){e.next=21;break}case 5:if(!(t>0)){e.next=19;break}return a=t%10,t=Math.floor(t/10),i=new y,n=i.addComponent(f),i.addComponent(v),n.setContentSize(42,56),n.setAnchorPoint(.5,.5),i.setScale(new p(.5,.5,1)),e.next=16,this.SDK.gameManager.Util.loadImg("Texture/number/"+a+"/spriteFrame",i);case 16:r.push(i),e.next=5;break;case 19:e.next=31;break;case 21:return a=0,i=new y,n=i.addComponent(f),i.addComponent(v),n.setContentSize(42,56),n.setAnchorPoint(.5,.5),i.setScale(new p(.5,.5,1)),e.next=30,this.SDK.gameManager.Util.loadImg("Texture/number/"+a+"/spriteFrame",i);case 30:r.push(i);case 31:for(s=this.timeNumberNode.children,o=0;o<s.length;o++)s[o].destroy();this.board.getChildByName("Header").getChildByName("time").getComponent(c).string="",e.t0=r.length,e.next=1===e.t0?37:2===e.t0?40:3===e.t0?43:47;break;case 37:return r[0].setPosition(new p(0,0,0)),a>0&&a<=5&&l(r[0]).to(.5,{scale:new p(1.5,1.5,1)}).start(),e.abrupt("break",51);case 40:return r[1].setPosition(new p(-10,0,0)),r[0].setPosition(new p(10,0,0)),e.abrupt("break",51);case 43:return r[2].setPosition(new p(-20,0,0)),r[1].setPosition(new p(0,0,0)),r[0].setPosition(new p(20,0,0)),e.abrupt("break",51);case 47:for(m=0;m<r.length;m++)r[m].destroy();return r=[],this.board.getChildByName("Header").getChildByName("time").getComponent(c).string=t,e.abrupt("break",51);case 51:for(h=0;h<r.length;h++)r[h].setParent(this.timeNumberNode);case 52:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"ControlStart",value:(s=h(regeneratorRuntime.mark((function e(t){var a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getTeamId();case 2:r=e.sent,i=r==D.red?this.board.getChildByName("Header").getChildByName("team0"):this.board.getChildByName("Header").getChildByName("team1"),(a=t?i.getChildByName("avatar-1").getChildByName("avatar"):i.getChildByName("avatar-2").getChildByName("avatar")).getComponent(O).timeStart(),this.curAvatar=a;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"ControlReset",value:(n=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.curAvatar.getComponent(O).reset();case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"refreshState",value:function(){if(!this.end||this.gameStart){var e=this.board.getChildByName("Header").getChildByName("tip"),t=this.board.getChildByName("Header").getChildByName("wait");this.SDK.gameManager.isControler?(e.active=!0,t.active=!1):(t.active=!0,e.active=!1)}}},{key:"gameEnd",value:function(){if(!this.end){this.end=!0;var e=this.board.getChildByName("Header").getChildByName("tip"),t=this.board.getChildByName("Header").getChildByName("wait");this.board.getChildByName("Header").getChildByName("end").active=!0,e.active=!1,t.active=!1}}},{key:"showEmoji",value:(r=h(regeneratorRuntime.mark((function e(){var t,a,r,i,n,s,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.messageList&&this.messageList.length){e.next=2;break}return e.abrupt("return");case 2:if(!(Date.now()-this.lastUpdate<1e3)){e.next=4;break}return e.abrupt("return");case 4:return this.lastUpdate=Date.now(),t=new p(260,-160,0),e.next=8,this.SDK.getRoomInfo();case 8:return r=e.sent,i=r.playerList,n=this.messageList[0],s=new Promise((function(e){var r="Prefab/Emoji/emoji_"+(n.data+1);C.loadRes(r,S,function(){var r=h(regeneratorRuntime.mark((function r(s,m){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!s){r.next=3;break}return r.abrupt("return");case 3:a=B(m),i.map((function(e){e.id===n.senderId&&o.SDK.gameManager.Util.loadRemoteImg(JSON.parse(e.customProfile).avatar_url,a.getChildByName("avatar"))})),a.getComponent(f).priority=99,a.setPosition(t),a.setScale(new p(.8,.8,.8)),a.setParent(o.board.getChildByName("Header")),l(a).to(3,{position:{x:-218,y:-160,z:0}},{onComplete:function(){a.destroy()}}).start(),o.messageList.shift(),e(!0);case 12:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())})),e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setReady",value:function(){this.board.getChildByName("Header").getChildByName("ready").setPosition(new p(-300,-200,0)),this.board.getChildByName("Header").getChildByName("ready").active=!0,l(this.board.getChildByName("Header").getChildByName("ready")).to(.3,{position:{x:0,y:-200,z:0},easing:"sineIn"},{onComplete:function(){var e=this;this.SDK.gameManager.Util.playAudio(this.SDK.gameManager.audio_ready),setTimeout((function(){var t;e.SDK.gameManager.Util.playAudio(e.SDK.gameManager.audio_go),l(e.board.getChildByName("Header").getChildByName("ready")).to(.3,{position:{x:300,y:-200,z:0},easing:"sineOut"},{onComplete:(t=h(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.board.getChildByName("Header").getChildByName("ready").active=!1,e.changePlayer(e.SDK.gameManager.curActionPlayer),t.next=4,e.SDK.gameManager.changeControler(e.SDK.gameManager.curActionPlayer);case 4:e.gameStart=!0,e.refreshState();case 6:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}).start()}),1500)}.bind(this)}).start()}},{key:"changePlayer",value:(a=h(regeneratorRuntime.mark((function e(t){var a,r,i,n,s,o,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getPlayerInfo();case 2:a=e.sent,r=this.board.getChildByName("Header").getChildByName("team0"),"2-1"!==this.selfSign&&"2-2"!==this.selfSign||(r=this.board.getChildByName("Header").getChildByName("team1")),i=t.findIndex((function(e){return e.id===a.id}))>-1,n=r.getChildByName("avatar-1"),s=r.getChildByName("avatar-2"),o=n.getComponent(N),m=s.getComponent(N),i&&("1-1"===this.selfSign||"2-1"===this.selfSign)||!i&&("1-2"===this.selfSign||"2-2"===this.selfSign)?(s.getComponent(f).priority=-1,n.getComponent(f).priority=1,l(s).to(.6,{position:"1-1"===this.selfSign||"1-2"===this.selfSign?new p(-95,-46,0):new p(95,-46,0),scale:new p(.9,.9,.9)}).start(),l(m).to(.6,{opacity:100}).start(),l(n).to(.6,{position:"1-1"===this.selfSign||"1-2"===this.selfSign?new p(-65,30,0):new p(65,30,0)}).start(),l(n).to(.3,{scale:new p(1.06,1.06,1.06)}).then(l(n).to(.3,{scale:new p(1,1,1)}).start()).start(),l(o).to(.6,{opacity:255}).start()):(n.getComponent(f).priority=-1,s.getComponent(f).priority=1,l(n).to(.6,{position:"1-1"===this.selfSign||"1-2"===this.selfSign?new p(-95,-46,0):new p(95,-46,0),scale:new p(.9,.9,.9)}).start(),l(o).to(.6,{opacity:100}).start(),l(s).to(.6,{position:"1-1"===this.selfSign||"1-2"===this.selfSign?new p(-65,30,0):new p(65,30,0)}).start(),l(s).to(.3,{scale:new p(1.06,1.06,1.06)}).then(l(s).to(.3,{scale:new p(1,1,1)}).start()),l(m).to(.6,{opacity:255}).start());case 11:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"loadAvatar",value:(t=h(regeneratorRuntime.mark((function e(){var t,a,r,i,n,s,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getRoomInfo();case 2:t=e.sent,a=this.SDK.gameManager.otherTeam.playerList,r=[],i=[],t.playerList.map((function(e){e.teamId===D.red&&(e.isRobot&&a.map((function(t){e.name===t.name&&(e.customProfile=JSON.stringify({nickname:e.name,avatar_url:t.avatar,gender:t.gender,isVip:t.isVip}))})),r.push(e)),e.teamId===D.blue&&(e.isRobot&&a.map((function(t){e.name===t.name&&(e.customProfile=JSON.stringify({nickname:e.name,avatar_url:t.avatar,gender:t.gender,isVip:t.isVip}))})),i.push(e))})),r.length&&r[0].customProfile&&((n=JSON.parse(r[0].customProfile).lover_id)>0&&n===JSON.parse(r[1].customProfile).lover_id?this.board.getChildByName("Header").getChildByName("team0").getChildByName("isLover").active=!0:this.board.getChildByName("Header").getChildByName("team0").getChildByName("isLover").active=!1),i.length&&i[0].customProfile&&((s=JSON.parse(i[0].customProfile).lover_id)>0&&s===JSON.parse(i[1].customProfile).lover_id?this.board.getChildByName("Header").getChildByName("team1").getChildByName("isLover").active=!0:this.board.getChildByName("Header").getChildByName("team1").getChildByName("isLover").active=!1),r.map(function(){var e=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.SDK.getPlayerIndex(t.id);case 2:if(1!==e.sent){e.next=8;break}return e.next=6,o.SDK.gameManager.Util.setAvatar(o.comp1,r[0],!0);case 6:e.next=10;break;case 8:return e.next=10,o.SDK.gameManager.Util.setAvatar(o.comp2,r[1],!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.map(function(){var e=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.SDK.getPlayerIndex(t.id);case 2:if(1!==e.sent){e.next=8;break}return e.next=6,o.SDK.gameManager.Util.setAvatar(o.comp3,i[0],!0);case 6:e.next=10;break;case 8:return e.next=10,o.SDK.gameManager.Util.setAvatar(o.comp4,i[1],!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changeSoundUI",value:function(e){this.SDK.gameManager.Util.loadImg(e?"/Texture/UI/gaming/kaiqi@2x/spriteFrame":"/Texture/UI/gaming/gianbi@2x/spriteFrame",this.board.getChildByName("nav").getChildByName("music"))}}]),e}(),e("GamingBoard",(j=I(500),E=I(500),H=I(500),L=I(500),F=I(100),G=I(),J=I(),a((z=function(e){function t(e,a){var r;return i(this,t),(r=n(this,s(t).call(this,e,a))).uiControl=null,r.controlTime=-100,r.AI_singal_time=3,r.heart_time=3,r.audio_last5s_tag=!1,r._remove_document_listener=null,r.name="GamingBoard",r.uiControl=new V(r.board,r.SDK),r}var a,g,p,y,f,v,C,S,N;return r(t,e),o(t,[{key:"initData",value:function(){m(s(t.prototype),"initData",this).call(this),this.controlTime=-100,this.AI_singal_time=6,this.heart_time=3,this.audio_last5s_tag=!1,this.uiControl.end=!1,this.SDK.gameManager.updateCenterNode(!1)}},{key:"setListener",value:function(){m(s(t.prototype),"setListener",this).call(this),this.SDK.curRoom.onRecvFromGameSvr=this.onRecvFromGameSvr.bind(this),this.SDK.curRoom.onRecvFromClient=this.onRecvFromClient.bind(this),this.SDK.gameManager.timerSingal=this.onTimerSingal.bind(this),this.SDK.gameManager.uiRefresh=this.onUIRefresh.bind(this),this.SDK.gameManager.avatarSingal=this.onAvatarSingal.bind(this)}},{key:"onLeaveRoom",value:(N=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.data.leavePlayerId,e.next=3,this.SDK.getLoverInfo();case 3:e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"onRecvFromGameSvr",value:(S=h(regeneratorRuntime.mark((function e(t){var a,r,i,n,s,o,m,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=null,r=-1;try{a=t.data.data,r=a.type}catch(e){}if(r!=w.Sync){e.next=9;break}return k("接收到数据同步信息",a.data),e.next=7,this.SDK.gameManager.syncData(a.data);case 7:e.next=44;break;case 9:if(r!=w.ChangeControler){e.next=16;break}k("接收到控制权转移信息",a.data),this.SDK.gameManager.changeControler(a.data.gameState.curActionPlayer),this.SDK.gameManager.Player.reset(),this.uiControl.changePlayer(a.data.gameState.curActionPlayer),e.next=44;break;case 16:if(r!=w.Map){e.next=21;break}k("接收到地图同步信息",a.data),this.SDK.gameManager.syncMap(a.data),e.next=44;break;case 21:if(r!=w.Result){e.next=34;break}k("接收到结算结果信息",a.data),this.SDK.leaveRoom(),this.SDK.setGroupPlayerStatus(R.NotReady),(i=this.SDK.gameManager.ResultBoard).setResult(a.data),this.ChangeBoard(i),this.board.getChildByName("Header").getChildByName("score").getComponent(d).progress=.5,this.board.getParent().getParent().getChildByName("enemy1").active=!1,this.board.getParent().getParent().getChildByName("enemy2").active=!1,e.next=44;break;case 34:if(r!=w.NetState){e.next=43;break}return k("接收到在线状态变更信息",a.data),e.next=38,this.SDK.getPlayerIndex(a.data.playerId);case 38:n=e.sent,a.data.teamId===D.red?((s=this.board.getChildByName("Header").getChildByName("team0").getChildByName("avatar-".concat(n))).getChildByName("offLine").active=0===a.data.state,0===a.data.state&&s.getChildByName("avatar").getComponent(O).setOffline(),1===a.data.state&&s.getChildByName("avatar").getComponent(O).setOnline()):((o=this.board.getChildByName("Header").getChildByName("team1").getChildByName("avatar-".concat(n))).getChildByName("offLine").active=0===a.data.state,0===a.data.state&&o.getChildByName("avatar").getComponent(O).setOffline(),1===a.data.state&&o.getChildByName("avatar").getComponent(O).setOnline()),e.next=44;break;case 43:r==w.AI&&(k("接收到AI控制消息",a.data),m=a.data.type,h=a.data.data,m==P.StartJump&&(this.SDK.gameManager.OtherTeam.index=this.SDK.gameManager.otherTeam.cur_cube,this.SDK.gameManager.OtherTeam.PowerEnd(h)));case 44:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"onRecvFromClient",value:(C=h(regeneratorRuntime.mark((function e(t){var a,r,i,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.parse(t.data.msg),r=a.type,i=a.data,n=t.data.sendPlayerId,r!=T.Power){e.next=10;break}this.SDK.gameManager.Player.teammatePower(),e.next=29;break;case 10:if(r!=T.PowerEnd){e.next=15;break}this.SDK.gameManager.Player.teammatePowerEnd(i),e.next=29;break;case 15:if(r!=T.EnemyPowerEnd){e.next=20;break}this.SDK.gameManager.OtherTeam.PowerEnd(i),e.next=29;break;case 20:if(r!=T.emoji){e.next=28;break}return e.next=24,this.SDK.getPlayerInfo();case 24:s=e.sent,n!=s.id&&this.uiControl.messageList.push({data:i,senderId:n}),e.next=29;break;case 28:T.SyncComplete;case 29:case 30:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"onTimerSingal",value:(v=h(regeneratorRuntime.mark((function e(){var t,a,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dead||!this.SDK.gameManager.isRunning){e.next=33;break}if(this.AI_singal_time-=.2,this.heart_time-=.2,!(this.heart_time<=0)){e.next=14;break}return this.heart_time=3,e.next=7,this.SDK.sendToServer(x.Heart,this.SDK.gameManager.serverTeam.id);case 7:if(e.sent==MGOBE.ErrCode.EC_OK){e.next=14;break}return this.SDK.gameManager.isRunning=!1,new A(this.scene,this.SDK,"已断开连接,请退出游戏重新进入",_.single,"知道了").show(this,(function(){r.SDK.curDialog.destroy(),window.RunNative("exitMiniGame",{},"","")})),e.abrupt("return");case 14:return e.next=16,this.SDK.gameManager.Util.IsRobotRoom();case 16:if(e.sent&&this.AI_singal_time<=0&&(this.AI_singal_time=1,this.SDK.sendToServer(x.SingalAI,null)),t=this.SDK.gameManager.Util.getLocalTime(),a=this.SDK.gameManager.gameTime-(t-this.SDK.gameManager.startTime),this.SDK.gameManager.startTime,this.uiControl.setTime(a),!(a<=0)){e.next=30;break}return this.SDK.gameManager.isRunning=!1,this.SDK.gameManager.isControler=!1,this.SDK.gameManager.timerSingal=null,this.uiControl.gameEnd(),e.next=29,this.SDK.sendToServer(x.End,t);case 29:this.SDK.gameManager.userTipNode.active=!1;case 30:5!=a||this.audio_last5s_tag||(this.audio_last5s_tag=!0,this.SDK.gameManager.Util.playAudio(this.SDK.gameManager.audio_last5s)),this.uiControl.showEmoji(),this.controlTime>0&&!this.SDK.gameManager.Player._stat_power&&!this.SDK.gameManager.Player._stat_jump?this.controlTime-=.2:this.controlTime<=0&&this.controlTime>=-10&&(this.controlTime=-100,this.SDK.gameManager.isControler=!1,this.onAvatarSingal(!0,!1),this.onUIRefresh(),this.SDK.sendToServer(x.ChangeControler));case 33:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"refreshScore",value:function(){var e,t=0,a=0,r=this.board.getChildByName("Header").getChildByName("score");this.SDK.gameManager.serverTeam.playerList.map((function(e){t+=e.score})),this.SDK.gameManager.otherTeam.playerList.map((function(e){a+=e.score})),(e=t+a===0?.5:t/(t+a))<.2&&(e=.2),e>.8&&(e=.8),e>.24&&e<.5&&(e*=.85),e>.5&&e<.6&&(e*=1.2),this.SDK.gameManager.serverTeam.id==D.red?(l(r.getComponent(d)).to(.3,{progress:e}).start(),r.getChildByName("redScore").getComponent(c).string="".concat(t,"分"),r.getChildByName("blueScore").getComponent(c).string="".concat(a,"分")):(l(r.getComponent(d)).to(.3,{progress:1-e}).start(),r.getChildByName("redScore").getComponent(c).string="".concat(a,"分"),r.getChildByName("blueScore").getComponent(c).string="".concat(t,"分"))}},{key:"onUIRefresh",value:function(){this.uiControl.refreshState(),this.refreshScore()}},{key:"onAvatarSingal",value:function(e,t){e?t?(this.controlTime=5,this.uiControl.selfAvatar.getComponent(O).timeStart()):(this.controlTime=-100,this.uiControl.selfAvatar.getComponent(O).reset()):t?this.uiControl.teammaterAvatar.getComponent(O).timeStart():this.uiControl.teammaterAvatar.getComponent(O).reset()}},{key:"InitEvent",value:(f=h(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(s(t.prototype),"InitEvent",this).call(this),(a=this.board.getChildByName("Interaction-ex")).getChildByName("emoji_1").on(u.TOUCH_END,this.sendEmoji_1,this),a.getChildByName("emoji_2").on(u.TOUCH_END,this.sendEmoji_2,this),a.getChildByName("emoji_3").on(u.TOUCH_END,this.sendEmoji_3,this),a.getChildByName("emoji_4").on(u.TOUCH_END,this.sendEmoji_4,this),this.board.getChildByName("nav").getChildByName("music").on(u.TOUCH_END,this.switchSound,this),this.board.getChildByName("nav").getChildByName("back").on(u.TOUCH_END,this.leave,this),r=this.visibilityChange.bind(this),document.addEventListener("visibilitychange",r,!0),this._remove_document_listener=function(){document.removeEventListener("visibilitychange",r,!0)};case 11:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"destroy",value:function(){m(s(t.prototype),"destroy",this).call(this);var e=this.board.getChildByName("Interaction-ex");e.getChildByName("emoji_1").off(u.TOUCH_END),e.getChildByName("emoji_2").off(u.TOUCH_END),e.getChildByName("emoji_3").off(u.TOUCH_END),e.getChildByName("emoji_4").off(u.TOUCH_END),this._remove_document_listener()}},{key:"sendEmoji_1",value:(y=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.SDK.gameManager.Util.callTDGA(b.game_start_emotion),e.next=3,this.SDK.getPlayerInfo();case 3:t=e.sent,this.uiControl.messageList.push({data:M.Angry,senderId:t.id}),this.SDK.sendToRoom(T.emoji,M.Angry);case 6:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"sendEmoji_2",value:(p=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.SDK.gameManager.Util.callTDGA(b.game_start_emotion),e.next=3,this.SDK.getPlayerInfo();case 3:t=e.sent,this.uiControl.messageList.push({data:M.Worship,senderId:t.id}),this.SDK.sendToRoom(T.emoji,M.Worship);case 6:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"sendEmoji_3",value:(g=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.SDK.gameManager.Util.callTDGA(b.game_start_emotion),e.next=3,this.SDK.getPlayerInfo();case 3:t=e.sent,this.uiControl.messageList.push({data:M.Unfortunately,senderId:t.id}),this.SDK.sendToRoom(T.emoji,M.Unfortunately);case 6:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"sendEmoji_4",value:(a=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.SDK.gameManager.Util.callTDGA(b.game_start_emotion),e.next=3,this.SDK.getPlayerInfo();case 3:t=e.sent,this.uiControl.messageList.push({data:M.Applause,senderId:t.id}),this.SDK.sendToRoom(T.emoji,M.Applause);case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"switchSound",value:function(){this.SDK.gameManager.Setting.switch_audio=!this.SDK.gameManager.Setting.switch_audio,this.uiControl.changeSoundUI(this.SDK.gameManager.Setting.switch_audio),this.SDK.gameManager.Util.callTDGA(b.game_voice_turn)}},{key:"leave",value:function(){var e=this;new A(this.scene,this.SDK,"退出本局游戏则视为认输，是否退出该局游戏？",_.multiple,"退出认输","再想想").show(this,this.confirmLeave,(function(){e.SDK.curDialog.destroy()}))}},{key:"confirmLeave",value:function(){this.SDK.curDialog.dead||(this.SDK.curDialog.destroy(),this.ChangeBoard(this.SDK.gameManager.MainBoard))}},{key:"visibilityChange",value:function(){"hidden"===document.visibilityState?this.SDK.sendToServer(x.ChangeNetState,K.Offline):(this.SDK.sendToServer(x.ChangeNetState,K.Online),this.SDK.sendToServer(x.RequestSyncData,{team:this.SDK.gameManager.serverTeam}))}}]),t}(U)).prototype,"sendEmoji_1",[j],Object.getOwnPropertyDescriptor(z.prototype,"sendEmoji_1"),z.prototype),a(z.prototype,"sendEmoji_2",[E],Object.getOwnPropertyDescriptor(z.prototype,"sendEmoji_2"),z.prototype),a(z.prototype,"sendEmoji_3",[H],Object.getOwnPropertyDescriptor(z.prototype,"sendEmoji_3"),z.prototype),a(z.prototype,"sendEmoji_4",[L],Object.getOwnPropertyDescriptor(z.prototype,"sendEmoji_4"),z.prototype),a(z.prototype,"switchSound",[F],Object.getOwnPropertyDescriptor(z.prototype,"switchSound"),z.prototype),a(z.prototype,"leave",[G],Object.getOwnPropertyDescriptor(z.prototype,"leave"),z.prototype),a(z.prototype,"confirmLeave",[J],Object.getOwnPropertyDescriptor(z.prototype,"confirmLeave"),z.prototype),z)),g._RF.pop()}}}));

System.register("chunks:///UI/Dialog/RulesDialog.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Const.js","../../DeployInfo.js"],(function(e,t){var n,i,s,r,o,a,u,l,c,d,h,g;return{setters:[function(e){n=e.createClass,i=e.classCallCheck,s=e.asyncToGenerator},function(e){r=e.cclegacy,o=e.tween,a=e.Vec3,u=e.loader,l=e.Prefab,c=e.instantiate,d=e.Label,h=e.SystemEventType},function(e){},function(e){g=e.DeployInfo}],execute:function(){r._RF.push({},"f1725lk6shAIZvaTtd6I/DQ","RulesDialog",void 0),e("RulesDialog",function(){function e(t,n){i(this,e),this.scene=null,this.node=null,this.SDK=null,this.dead=!1,this.scene=t,this.SDK=n}var t,r;return n(e,[{key:"InitBoard",value:(r=s(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise((function(e){u.loadRes("Prefab/Dialog/RulesDialog",l,(function(t,i){t?e(!1):(n.node=c(i),n.scene.getChildByName("UI").addChild(n.node),n.node.setSiblingIndex(100),e(!0))}))})),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"destroy",value:function(){if(!this.dead){if(!this.node)return void(this.SDK=null);this.dead=!0,this.scene=null,o(this.node.getChildByName("background")).to(.3,{scale:new a(0,0,0)},{onComplete:function(){this.SDK.curDialog=null,this.SDK=null,this.node.destroy(),this.node=null}.bind(this)}).start()}}},{key:"show",value:(t=s(regeneratorRuntime.mark((function e(t){var n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.SDK.curDialog){e.next=14;break}return this.SDK.curDialog=this,e.next=4,this.InitBoard();case 4:if(e.sent){e.next=8;break}return this.destroy(),e.abrupt("return");case 8:n=this.node.getChildByName("background").getChildByName("exit"),this.node.getChildByName("background").getChildByName("version").getComponent(d).string="v."+g.version,this.node.getChildByName("background").setScale(new a(0,0,0)),this.node.active=!0,o(this.node.getChildByName("background")).to(.3,{scale:new a(.5,.5,.5)},{easing:"sineOut"}).start(),n.on(h.TOUCH_END,(function(){i.SDK.curDialog.dead||i.SDK.curDialog.destroy()}),t);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()),r._RF.pop()}}}));

System.register("chunks:///UI/Board/MainBoard.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Config.js","../../Const.js","../../Util.js","../Dialog/Dialog.js","./BaseBoard.js","../Dialog/RulesDialog.js"],(function(e,t){var a,i,r,n,o,s,c,h,l,g,m,u,d,p,y,C,D,v,N,f,B,k,S,_,M,K,w,T,b,U,P,O;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_class:void 0}),{setters:[function(e){a=e.applyDecoratedDescriptor,i=e.inherits,r=e.classCallCheck,n=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.createClass,c=e.get,h=e.asyncToGenerator},function(e){l=e.cclegacy,g=e._decorator,m=e.SystemEventType,u=e.tween,d=e.Vec3,p=e.Label},function(e){y=e.UseTeaching},function(e){C=e.StatisticsKey,D=e.log,v=e.NetState,N=e.DialogButtonType},function(e){f=e.throttle},function(e){B=e.Dialog},function(e){k=e.BaseBoard},function(e){S=e.RulesDialog}],execute:function(){l._RF.push({},"253a4372BVD94kGBxFcROCR","MainBoard",void 0),g.ccclass,g.property,O=function(){function e(t,a){r(this,e),this.board=t,this.SDK=a}var t,a;return s(e,[{key:"initUI",value:(a=h(regeneratorRuntime.mark((function e(t){var a,i,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.board=t,e.next=3,this.initUserData();case 3:if(a=this.board.getChildByName("Header"),this.weekDataNode=a.getChildByName("career").getChildByName("weekData"),this.loverDataNode=a.getChildByName("top").getChildByName("bgHistory"),this.qqPopup=this.board.getChildByName("qq"),1===this.SDK.gameManager.PlayerData.gender?(this.selfAvatarNode=a.getChildByName("top").getChildByName("Avatar").getChildByName("Sprite"),this.otherAvatarNode=a.getChildByName("top").getChildByName("Avatar2").getChildByName("Sprite")):(this.selfAvatarNode=a.getChildByName("top").getChildByName("Avatar2").getChildByName("Sprite"),this.otherAvatarNode=a.getChildByName("top").getChildByName("Avatar").getChildByName("Sprite")),this.SDK.gameManager.PlayerData.isVip?(a.getChildByName("top").getChildByName("Avatar").getChildByName("isVip").active=!0,a.getChildByName("top").getChildByName("Avatar2").getChildByName("isVip").active=!0):(a.getChildByName("top").getChildByName("Avatar").getChildByName("isVip").active=!1,a.getChildByName("top").getChildByName("Avatar2").getChildByName("isVip").active=!1),this.SDK.gameManager.Util.loadRemoteImg(this.SDK.gameManager.PlayerData.avatar_url,this.selfAvatarNode),this.SDK.gameManager.loverData&&this.SDK.gameManager.loverData.avatar&&(i="https://".concat(this.SDK.gameManager.loverData.avatar.host,"/").concat(this.SDK.gameManager.loverData.avatar.path),this.SDK.gameManager.Util.loadRemoteImg(i,this.otherAvatarNode)),this.weekDataNode.getChildByName("num").getChildByName("value").getComponent(p).string="".concat(this.SDK.gameManager.PlayerData.playCountWeek),this.weekDataNode.getChildByName("rate").getChildByName("value").getComponent(p).string=this.SDK.gameManager.PlayerData.winCountWeek?"".concat((this.SDK.gameManager.PlayerData.winCountWeek/this.SDK.gameManager.PlayerData.playCountWeek*100).toFixed(0),"%"):"0%",this.weekDataNode.getChildByName("mvp").getChildByName("value").getComponent(p).string="".concat(this.SDK.gameManager.PlayerData.mvpCountWeek),this.loverDataNode.getChildByName("total").getComponent(p).string="".concat(this.SDK.gameManager.PlayerData.loverCount),this.loverDataNode.getChildByName("victory").getComponent(p).string="".concat(this.SDK.gameManager.PlayerData.loverWinCount),r=this.SDK.gameManager.Util.localGet("mg-jump-last-login"),n=this.SDK.gameManager.Util.getLocalDate(),!(r&&r>=n)){e.next=20;break}return e.abrupt("return");case 20:this.SDK.gameManager.Util.localSet("mg-jump-last-login",n),this.showQQPopup(!0);case 22:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"initData",value:function(){}},{key:"showQQPopup",value:function(e){this.qqPopup.active=e}},{key:"initUserData",value:(t=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.gameManager.Util.http(this.SDK.gameManager.Config.serverURL.gameInit,"GET",{},!1,this.SDK.gameManager.AccessToken);case 2:t=e.sent,this.SDK.gameManager.PlayerData.loverCount=t.lover_match_info.game_match_count?t.lover_match_info.game_match_count:0,this.SDK.gameManager.PlayerData.loverWinCount=t.lover_match_info.win_count?t.lover_match_info.win_count:0,this.SDK.gameManager.PlayerData.tacitScore=t.lover_match_info.tacit_score?t.lover_match_info.tacit_score:0,this.SDK.gameManager.PlayerData.playCountWeek=t.user_match_info.game_match_count?t.user_match_info.game_match_count:0,this.SDK.gameManager.PlayerData.mvpCountWeek=t.user_match_info.mvp_count?t.user_match_info.mvp_count:0,this.SDK.gameManager.PlayerData.winCountWeek=t.user_match_info.win_count?t.user_match_info.win_count:0,this.board.getChildByName("Header").getChildByName("top").getChildByName("Lv").getComponent(p).string="恋人Lv.".concat(this.SDK.gameManager.Util.loverLevel(this.SDK.gameManager.PlayerData.tacitScore)),this.board.getChildByName("Header").getChildByName("top").getChildByName("LvHeart").getChildByName("Lv").getComponent(p).string="".concat(this.SDK.gameManager.Util.loverLevel(this.SDK.gameManager.PlayerData.tacitScore));case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),e("MainBoard",(_=f(),M=f(500),K=f(500),w=f(),T=f(),b=f(200),U=f(200),a((P=function(e){function t(e,a){var i;return r(this,t),(i=n(this,o(t).call(this,e,a))).name="MainBoard",i.uiControl=new O(i.board,i.SDK),i}var a,l,g,p,f,k,_,M;return i(t,e),s(t,[{key:"setListener",value:function(){this.SDK.Room.onCancelMatch=this.onCancelMatch.bind(this),this.SDK.Room.onMatch=this.onMatch.bind(this)}},{key:"InitEvent",value:(M=h(regeneratorRuntime.mark((function e(){var a,i,r,n,s,h,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(o(t.prototype),"InitEvent",this).call(this),a=this.board.getChildByName("MatchButton").getChildByName("single"),i=this.board.getChildByName("MatchButton").getChildByName("lover"),r=this.board.getChildByName("Nav").getChildByName("exit"),n=this.board.getChildByName("Nav").getChildByName("rules"),s=this.board.getChildByName("Nav").getChildByName("feedback"),D("qqNode",this.board.getChildByName("qq")),h=this.board.getChildByName("qq").getChildByName("btnCopy"),l=this.board.getChildByName("qq").getChildByName("btnExit"),a.on(m.TOUCH_END,this.clickSingleMatch,this),i.on(m.TOUCH_END,this.clickLoverMatch,this),n.on(m.TOUCH_END,this.clickRules,this),s.on(m.TOUCH_END,this.clickFeedback,this),r.on(m.TOUCH_END,this.quitGame,this),h.on(m.TOUCH_END,this.clickPopupQQCopy,this),l.on(m.TOUCH_END,this.clickPopupQQExit,this);case 16:case"end":return e.stop()}}),e,this)}))),function(){return M.apply(this,arguments)})},{key:"destroy",value:function(){c(o(t.prototype),"destroy",this).call(this);var e=this.board.getChildByName("MatchButton").getChildByName("single"),a=this.board.getChildByName("MatchButton").getChildByName("lover"),i=this.board.getChildByName("Nav").getChildByName("exit"),r=this.board.getChildByName("Nav").getChildByName("rules"),n=this.board.getChildByName("qq").getChildByName("btnCopy"),s=this.board.getChildByName("qq").getChildByName("btnExit"),h=this.board.getChildByName("Nav").getChildByName("feedback");e.off(m.TOUCH_END),a.off(m.TOUCH_END),i.off(m.TOUCH_END),r.off(m.TOUCH_END),h.off(m.TOUCH_END,this.clickFeedback,this),n.off(m.TOUCH_END,this.clickPopupQQCopy,this),s.off(m.TOUCH_END,this.clickPopupQQExit,this)}},{key:"onCancelMatch",value:function(e){}},{key:"onMatch",value:function(e){}},{key:"teachProcess",value:(_=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.SDK.gameManager.PlayerData.totalCount<=1||y)||this.SDK.gameManager.isTeached){e.next=6;break}return this.SDK.gameManager.Util.callTDGA(C.Guidance_appear_clicked),e.next=5,this.ChangeBoard(this.SDK.gameManager.TeachingBoard);case 5:return e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"clickSingleMatch",value:(k=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.SDK.gameManager.isQuickMatching=!0,e.next=4,this.teachProcess();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return this.SDK.gameManager.Util.callTDGA(C.main_quick_clicked),e.next=9,this.SDK.matchingSingle();case 9:if(e.sent!=MGOBE.ErrCode.EC_OK){e.next=17;break}return e.next=15,this.ChangeBoard(this.SDK.gameManager.MatchingBoard);case 15:e.next=21;break;case 17:this.SDK.cancelMatchinig(),this.SDK.leaveGroup(),this.SDK.leaveRoom();case 21:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"clickLoverMatch",value:(f=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.SDK.gameManager.isQuickMatching=!1,e.next=3,this.teachProcess();case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return this.SDK.gameManager.Util.callTDGA(C.main_couple_clicked),e.next=8,this.SDK.gameManager.Util.http(this.SDK.gameManager.Config.serverURL.group,"GET",null,!1,this.SDK.gameManager.AccessToken);case 8:if(!(t=e.sent)){e.next=22;break}return t=t.other_group_id,e.next=14,this.SDK.joinGroup(t);case 14:if(e.sent!==MGOBE.ErrCode.EC_OK){e.next=22;break}return e.next=18,this.SDK.getTeammate();case 18:if(e.sent.commonNetworkState==v.Offline){e.next=22;break}return this.ChangeBoard(this.SDK.gameManager.WaitLoverBoard),e.abrupt("return");case 22:return e.next=24,this.SDK.createGroup();case 24:0===e.sent?this.showInvite():this.SDK.leaveGroup();case 26:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"clickRules",value:(p=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.SDK.curDialog||(this.SDK.gameManager.Util.callTDGA(C.main_rule_clicked),new S(this.scene,this.SDK).show(this));case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"clickFeedback",value:function(){this.uiControl.showQQPopup(!0)}},{key:"clickPopupQQCopy",value:function(){this.SDK.gameManager.Util.copyStr("571341045"),this.SDK.gameManager.showToast("复制成功",2)}},{key:"clickPopupQQExit",value:function(){this.uiControl.showQQPopup(!1)}},{key:"quitGame",value:(g=h(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.SDK.gameManager.Util.callTDGA(C.game_leave_clicked),t=new B(this.scene,this.SDK,"确定退出游戏？",N.multiple),e.next=4,t.show(this,(function(){a.SDK.curDialog.dead||(a.SDK.gameManager.Util.callTDGA(C.game_leave_confirmed),a.SDK.gameManager.Util.callTDGA(C.leave),a.SDK.curDialog.destroy(),window.RunNative("exitMiniGame",{},"",""))}),(function(){a.SDK.curDialog.dead||a.SDK.curDialog.destroy()}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"showInvite",value:function(){this.SDK.gameManager.Util.callTDGA(C.game_share_clicked);var e=this.board.getChildByName("sharePlatform");e.getChildByName("content").setPosition(0,-240,0),e.active=!0,u(e.getChildByName("content")).to(.3,{position:new d(0,-38,0)}).start(),e.getChildByName("content").getChildByName("inApp").on(m.TOUCH_END,this.shareToMessage,this),e.getChildByName("content").getChildByName("weChat").on(m.TOUCH_END,this.shareToWX,this),e.getChildByName("content").getChildByName("QQ").on(m.TOUCH_END,this.shareToQQ,this),e.getChildByName("content").getChildByName("close").on(m.TOUCH_END,this.maskClose,this),e.getChildByName("maskBg").on(m.TOUCH_END,this.maskClose,this)}},{key:"shareToMessage",value:function(){var e=this,t=navigator.userAgent.toLowerCase().indexOf("android")>-1;window.toldTA=function(){e.close(),e.SDK.gameManager.Util.callTDGA(C.game_share_chat),!t&&e.SDK.gameManager.showToast("发送成功",2)},window.sendLinkFail=function(){e.close(),!t&&e.SDK.gameManager.showToast("邀请失败",2)},window.RunNative("shareURLToPlatform",{url:"lianaiji://open.minigame?name=jump&group=".concat(this.SDK.curGroup.groupInfo.id),title:"双人跳一跳",content:"亲爱的，和我一起玩双人跳一跳吧",imgUrl:"https://cdn1.didiapp.com/jump/banner.png",source:"双人跳一跳",platform:["chat"]},"toldTA","sendLinkFail")}},{key:"shareToWX",value:function(){var e=this;window.wxSuc=function(){e.close(),e.SDK.gameManager.Util.callTDGA(C.game_share_wechat)},window.wxErr=function(){e.close()};var t=this.SDK.gameManager.PlayerData.avatar_url;window.RunNative("shareURLToPlatform",{url:"https://dev-kitty.didiapp.com/lovenote/miniGameinvite?from=jump&group=".concat(this.SDK.curGroup.groupInfo.id,"&avatar=").concat(t),title:"邀你一起玩双人跳一跳！点击链接进入游戏",content:"我们组队，和其他情侣PK，相信我们一定是最有默契的情侣！",imgUrl:"https://cdn1.didiapp.com/jump/banner.png",source:"恋爱记",platform:["wxsession"]},"wxSuc","wxErr"),setTimeout((function(){!0===e.board.getChildByName("sharePlatform").active&&e.close()}),500)}},{key:"shareToQQ",value:function(){var e=this;window.qqSuc=function(){e.close(),e.SDK.gameManager.Util.callTDGA(C.game_share_QQ)},window.qqErr=function(){e.close()};var t=this.SDK.gameManager.PlayerData.avatar_url;window.RunNative("shareURLToPlatform",{url:"https://dev-kitty.didiapp.com/lovenote/miniGameinvite?from=jump&group=".concat(this.SDK.curGroup.groupInfo.id,"&avatar=").concat(t),title:"邀你一起玩双人跳一跳！点击链接进入游戏",content:"我们组队，和其他情侣PK，相信我们一定是最有默契的情侣！",imgUrl:"https://cdn1.didiapp.com/jump/banner.png",source:"恋爱记",platform:["qq"]},"qqSuc","qqErr"),setTimeout((function(){!0===e.board.getChildByName("sharePlatform").active&&e.close()}),500)}},{key:"close",value:(l=h(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.board.getChildByName("sharePlatform")).getChildByName("content").getChildByName("inApp").off(m.TOUCH_END),t.getChildByName("content").getChildByName("weChat").off(m.TOUCH_END),t.getChildByName("content").getChildByName("QQ").off(m.TOUCH_END),t.getChildByName("content").getChildByName("close").off(m.TOUCH_END),t.getChildByName("maskBg").off(m.TOUCH_END),e.next=8,this.SDK.getGroupInfo();case 8:return a=e.sent,this.SDK.gameManager.Util.http(this.SDK.gameManager.Config.serverURL.group,"POST",{group_id:a.id},!1,this.SDK.gameManager.AccessToken),e.next=12,this.ChangeBoard(this.SDK.gameManager.WaitLoverBoard);case 12:t.active=!1;case 13:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"maskClose",value:(a=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.SDK.gameManager.Util.callTDGA(C.main_wait_invite_cancel),(t=this.board.getChildByName("sharePlatform")).active=!1,t.getChildByName("content").getChildByName("inApp").off(m.TOUCH_END),t.getChildByName("content").getChildByName("weChat").off(m.TOUCH_END),t.getChildByName("content").getChildByName("QQ").off(m.TOUCH_END),t.getChildByName("content").getChildByName("close").off(m.TOUCH_END),t.getChildByName("maskBg").off(m.TOUCH_END),e.next=10,this.SDK.dismissGroup();case 10:this.SDK.leaveGroup();case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})}]),t}(k)).prototype,"clickSingleMatch",[_],Object.getOwnPropertyDescriptor(P.prototype,"clickSingleMatch"),P.prototype),a(P.prototype,"clickLoverMatch",[M],Object.getOwnPropertyDescriptor(P.prototype,"clickLoverMatch"),P.prototype),a(P.prototype,"clickRules",[K],Object.getOwnPropertyDescriptor(P.prototype,"clickRules"),P.prototype),a(P.prototype,"clickFeedback",[w],Object.getOwnPropertyDescriptor(P.prototype,"clickFeedback"),P.prototype),a(P.prototype,"quitGame",[T],Object.getOwnPropertyDescriptor(P.prototype,"quitGame"),P.prototype),a(P.prototype,"close",[b],Object.getOwnPropertyDescriptor(P.prototype,"close"),P.prototype),a(P.prototype,"maskClose",[U],Object.getOwnPropertyDescriptor(P.prototype,"maskClose"),P.prototype),P)),l._RF.pop()}}}));

System.register("chunks:///UI/Board/MatchingBoard.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Const.js","../../Util.js","../Dialog/Dialog.js","./BaseBoard.js"],(function(e,t){var a,i,r,n,s,m,o,h,g,c,l,d,u,C,p,y,B,f,N,v,x,b,D,S,k,M,I,K;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){a=e.applyDecoratedDescriptor,i=e.inherits,r=e.classCallCheck,n=e.possibleConstructorReturn,s=e.getPrototypeOf,m=e.createClass,o=e.get,h=e.asyncToGenerator},function(e){g=e.cclegacy,c=e.SystemEventType,l=e.Label,d=e.Color,u=e.ProgressBar,C=e.Sprite,p=e.tween},function(e){y=e.ClientDataType,B=e.log,f=e.RoomDataType,N=e.ServerDataType,v=e.StatisticsKey,x=e.DialogButtonType,b=e.TeamColor},function(e){D=e.throttle},function(e){S=e.Dialog},function(e){k=e.BaseBoard}],execute:function(){g._RF.push({},"b8dbbjBDbxP+YYY37doxtEY","MatchingBoard",void 0),K=function(){function e(t,a){r(this,e),this.board=null,this.SDK=null,this.team1=null,this.team2=null,this.time=null,this.board=t,this.SDK=a}var t,a,i,n,s;return m(e,[{key:"initUI",value:(s=h(regeneratorRuntime.mark((function e(t){var a,i,r,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.board=t,this.team1=this.board.getChildByName("team1"),this.team2=this.board.getChildByName("team2"),this.time=this.board.getChildByName("guide").getChildByName("Label"),e.next=6,this.SDK.getGroupInfo();case 6:return a=e.sent,e.next=9,this.SDK.getPlayerInfo();case 9:return i=e.sent,r=null,this.team1.getChildByName("card").getChildByName("user2").active=!1,this.team1.getChildByName("card").getChildByName("user2_wait").active=!0,this.team2.getChildByName("card").getChildByName("user1").active=!1,this.team2.getChildByName("card").getChildByName("user2").active=!1,this.team2.getChildByName("card").getChildByName("user1_wait").active=!0,this.team2.getChildByName("card").getChildByName("user2_wait").active=!0,this.team1.getChildByName("card").getChildByName("Lover").active=!1,this.team2.getChildByName("card").getChildByName("Lover").active=!1,this.board.getChildByName("CancelMatchButton").active=!0,this.board.getChildByName("expectedTime").active=!0,this.board.getChildByName("guide").active=!0,this.board.getChildByName("ProgressBar").getComponent(u).progress=0,this.board.getChildByName("ProgressBar").active=!1,this.time.getComponent(l).string="正在匹配 (00:00)",e.next=27,this.initCard();case 27:if(!a){e.next=34;break}return e.next=30,this.showLoverUI();case 30:for(r=a.groupPlayerList,n=0;n<r.length;n++)(s=r[n]).id==i.id?this.setPlayer(1,1,{id:s.id,teamId:"1",profile:s.customGroupPlayerProfile}):this.setPlayer(1,2,{id:s.id,teamId:"1",profile:s.customGroupPlayerProfile});e.next=35;break;case 34:this.setPlayer(1,1,{id:i.id,teamId:i.teamId,profile:i.profile});case 35:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"initCard",value:(n=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.team1.getComponent(C).enabled=!1,this.team2.getComponent(C).enabled=!1,this.team1.getChildByName("card").getChildByName("user1").getComponent(C).enabled=!1,this.team1.getChildByName("card").getChildByName("user2").getComponent(C).enabled=!1,e.next=6,this.SDK.gameManager.Util.teammaterIsLover();case 6:if(!e.sent){e.next=13;break}return e.next=10,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-0/spriteFrame",this.team1);case 10:this.team1.getComponent(C).enabled=!0,e.next=19;break;case 13:return e.next=15,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-0/spriteFrame",this.team1.getChildByName("card").getChildByName("user1"));case 15:return e.next=17,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-0/spriteFrame",this.team1.getChildByName("card").getChildByName("user2"));case 17:this.team1.getChildByName("card").getChildByName("user1").getComponent(C).enabled=!0,this.team1.getChildByName("card").getChildByName("user2").getComponent(C).enabled=!0;case 19:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"initData",value:function(){}},{key:"matchSuccess",value:(i=h(regeneratorRuntime.mark((function e(t){var a,i,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoverUI(),e.next=3,this.SDK.getPlayerInfo();case 3:for(a=e.sent,i=1,r=0;r<t.length;r++)(n=t[r]).teamId==a.teamId?n.id==a.id?this.setPlayer(1,1,{id:n.id,teamId:n.teamId,profile:n.profile}):this.setPlayer(1,2,{id:n.id,teamId:n.teamId,profile:n.profile}):(this.setPlayer(2,i,{id:n.id,teamId:n.teamId,profile:n.profile}),i+=1);this.board.getChildByName("expectedTime").active=!1,this.board.getChildByName("guide").active=!1,this.board.getChildByName("ProgressBar").active=!0,p(this.board.getChildByName("ProgressBar").getComponent(u)).to(2,{progress:1}).start(),this.time.getComponent(l).string="匹配成功,等待进入游戏";case 11:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"setTime",value:function(e){if(this.board){var t=Math.floor(e/60),a=Math.floor(e-60*t);this.time.getComponent(l).string="正在匹配 (".concat(t>9?t:"0"+t,":").concat(a>9?a:"0"+a,")")}}},{key:"setPlayer",value:function(e,t,a){var i=null,r=null,n=null,s=JSON.parse(a.profile);if(i=this.team1,2==e&&(i=this.team2),r=i.getChildByName("card").getChildByName("user1"),n=i.getChildByName("card").getChildByName("user1_wait"),2==t&&(r=i.getChildByName("card").getChildByName("user2"),n=i.getChildByName("card").getChildByName("user2_wait")),a){r.getChildByName("nickName").getComponent(l).string=s.nickname.length>6?s.nickname.slice(0,5):s.nickname,s.isVip?(r.getChildByName("nickName").getComponent(l).color=new d(240,190,37,255),r.getChildByName("nickName").getChildByName("vip").active=!0):(r.getChildByName("nickName").getComponent(l).color=new d(51,51,51,255),r.getChildByName("nickName").getChildByName("vip").active=!1);var m=r.getChildByName("avatarBg").getChildByName("avatar");this.SDK.gameManager.Util.setAvatar(m,a,!1),this.SDK.gameManager.Util.loadImg(1===s.gender?"Texture/UI/result/boy/spriteFrame":"Texture/UI/result/girl/spriteFrame",r.getChildByName("avatarBg").getChildByName("avatar").getChildByName("gender")),r.active=!0,n&&(n.active=!1)}else r.active=!1,n&&(n.active=!0)}},{key:"showLoverUI",value:(a=h(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.gameManager.Util.teammaterIsLover();case 2:return t=e.sent,e.next=5,this.SDK.gameManager.Util.enemyIsLover();case 5:a=e.sent,this.team1.getChildByName("card").getChildByName("Lover").active=!!t,this.team2.getChildByName("card").getChildByName("Lover").active=!!a;case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"changeMatchStatus",value:(t=h(regeneratorRuntime.mark((function e(){var t,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getTeamId();case 2:return t=e.sent,e.next=5,this.SDK.gameManager.Util.teammaterIsLover();case 5:return a=e.sent,e.next=8,this.SDK.gameManager.Util.enemyIsLover();case 8:if(i=e.sent,t!=b.blue){e.next=40;break}if(!a){e.next=18;break}return this.team1.getChildByName("card").getChildByName("user1").getComponent(C).enabled=!1,this.team1.getChildByName("card").getChildByName("user2").getComponent(C).enabled=!1,e.next=15,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-2/spriteFrame",this.team1);case 15:this.team1.getComponent(C).enabled=!0,e.next=25;break;case 18:return this.team1.getComponent(C).enabled=!1,e.next=21,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-2/spriteFrame",this.team1.getChildByName("card").getChildByName("user1"));case 21:return e.next=23,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-2/spriteFrame",this.team1.getChildByName("card").getChildByName("user2"));case 23:this.team1.getChildByName("card").getChildByName("user1").getComponent(C).enabled=!0,this.team1.getChildByName("card").getChildByName("user2").getComponent(C).enabled=!0;case 25:if(!i){e.next=33;break}return this.team2.getChildByName("card").getChildByName("user1").getComponent(C).enabled=!1,this.team2.getChildByName("card").getChildByName("user2").getComponent(C).enabled=!1,e.next=30,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-1/spriteFrame",this.team2);case 30:this.team2.getComponent(C).enabled=!0,e.next=40;break;case 33:return this.team2.getComponent(C).enabled=!1,e.next=36,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-1/spriteFrame",this.team2.getChildByName("card").getChildByName("user1"));case 36:return e.next=38,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-1/spriteFrame",this.team2.getChildByName("card").getChildByName("user2"));case 38:this.team2.getChildByName("card").getChildByName("user1").getComponent(C).enabled=!0,this.team2.getChildByName("card").getChildByName("user2").getComponent(C).enabled=!0;case 40:if(t!=b.red){e.next=71;break}if(!a){e.next=49;break}return this.team1.getChildByName("card").getChildByName("user1").getComponent(C).enabled=!1,this.team1.getChildByName("card").getChildByName("user2").getComponent(C).enabled=!1,e.next=46,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-1/spriteFrame",this.team1);case 46:this.team1.getComponent(C).enabled=!0,e.next=56;break;case 49:return this.team1.getComponent(C).enabled=!1,e.next=52,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-1/spriteFrame",this.team1.getChildByName("card").getChildByName("user1"));case 52:return e.next=54,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-1/spriteFrame",this.team1.getChildByName("card").getChildByName("user2"));case 54:this.team1.getChildByName("card").getChildByName("user1").getComponent(C).enabled=!0,this.team1.getChildByName("card").getChildByName("user2").getComponent(C).enabled=!0;case 56:if(!i){e.next=64;break}return this.team2.getChildByName("card").getChildByName("user1").getComponent(C).enabled=!1,this.team2.getChildByName("card").getChildByName("user2").getComponent(C).enabled=!1,e.next=61,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-2/spriteFrame",this.team2);case 61:this.team2.getComponent(C).enabled=!0,e.next=71;break;case 64:return this.team2.getComponent(C).enabled=!1,e.next=67,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-2/spriteFrame",this.team2.getChildByName("card").getChildByName("user1"));case 67:return e.next=69,this.SDK.gameManager.Util.loadImg("Texture/UI/matching/2-2/spriteFrame",this.team2.getChildByName("card").getChildByName("user2"));case 69:this.team2.getChildByName("card").getChildByName("user1").getComponent(C).enabled=!0,this.team2.getChildByName("card").getChildByName("user2").getComponent(C).enabled=!0;case 71:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),e("MatchingBoard",(M=D(),a((I=function(e){function t(e,a){var i;return r(this,t),(i=n(this,s(t).call(this,e,a))).uiControl=null,i.matchingTime=0,i.initTime=-100,i.waitInit=!1,i.name="MatchingBoard",i.uiControl=new K(i.board,i.SDK),i}var a,g,l,d,u,C,p,b;return i(t,e),m(t,[{key:"setListener",value:function(){o(s(t.prototype),"setListener",this).call(this),this.SDK.Room.onCancelMatch=this.onCancelMatch.bind(this),this.SDK.Room.onMatch=this.onMatch.bind(this),this.SDK.curRoom.onRecvFromClient=this.onRecvFromClient.bind(this),this.SDK.curRoom.onLeaveRoom=this.onLeaveRoom.bind(this),this.SDK.curRoom.onRecvFromGameSvr=this.onRecvFromGameSvr.bind(this),this.SDK.gameManager.timerSingal=this.onTimerSingal.bind(this)}},{key:"initData",value:function(){o(s(t.prototype),"initData",this).call(this),this.matchingTime=0,this.initTime=0,this.waitInit=!1,this.SDK.gameManager.Util.isRobotRoomCache=void 0}},{key:"onTimerSingal",value:(b=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dead){e.next=19;break}if(this.waitInit){e.next=6;break}this.uiControl.setTime(this.matchingTime),this.matchingTime+=.2,e.next=19;break;case 6:if(this.initTime+=.2,!(this.initTime>=2&&this.initTime<2.3)){e.next=11;break}return e.next=11,this.SDK.sendToServer(y.RequestInitData,1);case 11:if(B("inittime",this.initTime),!(this.initTime>10)){e.next=19;break}return this.initTime=0,this.waitInit=!1,this.SDK.gameManager.timerSingal=null,this.SDK.gameManager.showToast("加载游戏失败",2),e.next=19,this.ChangeBoard(this.SDK.gameManager.MainBoard);case 19:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"onCancelMatch",value:(p=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.leaveMatchingBoard();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"onMatch",value:(C=h(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data.errCode!==this.SDK.errorCode.EC_OK){e.next=25;break}return B("匹配成功",t.data),this.SDK.curRoom.initRoom(t.data.roomInfo),this.SDK.Listener.add(this.SDK.curRoom),this.waitInit=!0,this.SDK.gameManager.Util.IsRobotRoom(),e.next=9,this.SDK.getGroupInfo();case 9:if(e.sent){e.next=24;break}return e.next=13,this.SDK.getPlayerIndex();case 13:if(1!=e.sent){e.next=24;break}return e.next=17,this.SDK.createGroup();case 17:if(e.sent!=MGOBE.ErrCode.EC_OK){e.next=24;break}return e.next=21,this.SDK.getGroupInfo();case 21:return a=e.sent,e.next=24,this.SDK.sendToRoom(f.MatchedJoinGroup,a.id);case 24:return e.abrupt("return");case 25:return this.SDK.gameManager.showToast("匹配超时",2),e.next=29,this.SDK.getGroupInfo();case 29:return i=e.sent,e.next=32,this.ChangeBoard(i?this.SDK.gameManager.WaitLoverBoard:this.SDK.gameManager.MainBoard);case 32:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"onLeaveRoom",value:(u=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.dead||(this.dead=!0,this.SDK.gameManager.showToast("有玩家离开了",2),this.ChangeBoard(this.SDK.gameManager.MainBoard));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"onRecvFromGameSvr",value:(d=h(regeneratorRuntime.mark((function e(t){var a,i,r,n,s,m,o,g,c,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B("接收到实时服务器的数据:",t.data),a=t.data.data,(i=a.type)!=N.Init){e.next=33;break}return this.initTime=2.4,r=a.data,this.SDK.gameManager.node.emit("GameInit",r.init),e.next=10,this.SDK.getPlayerInfo();case 10:for(n=e.sent,s=!1,m=0;m<r.playerList.length;m++)(o=r.playerList[m]).isRobot&&(this.SDK.gameManager.robotInfo[o.id]=o,o.teamId==n.teamId&&(s=!0));if(!s){e.next=18;break}this.SDK.gameManager.showToast("匹配失败",1.5),this.ChangeBoard(this.SDK.gameManager.MainBoard),e.next=31;break;case 18:return e.t0=this.SDK.gameManager.Util,e.next=21,this.SDK.gameManager.Util.teammaterIsLover();case 21:if(!e.sent){e.next=25;break}e.t1=v.main_couple_match,e.next=26;break;case 25:e.t1=v.main_quick_match;case 26:return e.t2=e.t1,e.t0.callTDGA.call(e.t0,e.t2),e.next=30,this.uiControl.changeMatchStatus();case 30:this.uiControl.matchSuccess(r.playerList);case 31:e.next=51;break;case 33:if(i!=N.Start){e.next=47;break}this.initTime=0,this.waitInit=!1,this.SDK.gameManager.timerSingal=null,this.SDK.gameManager.isRunning=!0,g=a.data,this.SDK.gameManager.startTime=g.startTime,c=this.SDK.gameManager.Util.getLocalTime(),Math.abs(c-g.startTime)>5&&new S(this.scene,this.SDK,"检测到您本地时间有误,可能导致游戏倒计时显示错误",x.single,"知道了").show(this,(function(){l.SDK.curDialog.destroy()})),"dev"==this.SDK.gameManager.Config.env?this.SDK.gameManager.gameTime=this.SDK.gameManager.Config.DebugGameTime>0?this.SDK.gameManager.Config.DebugGameTime:a.data.gameTime:this.SDK.gameManager.gameTime=a.data.gameTime,setTimeout(h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ChangeBoard(l.SDK.gameManager.GamingBoard);case 2:case"end":return e.stop()}}),e)}))),2e3),e.next=51;break;case 47:if(i!=N.NetState){e.next=51;break}if(!this.dead){e.next=50;break}return e.abrupt("return");case 50:B("[matching]接收到在线状态变更信息",a.data);case 51:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"onRecvFromClient",value:(l=h(regeneratorRuntime.mark((function e(t){var a,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.parse(t.data.msg),i=a.type,r=a.data,t.data.sendPlayerId,i!=f.MatchedJoinGroup){e.next=8;break}return e.next=8,this.SDK.joinGroup(r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"InitEvent",value:function(){o(s(t.prototype),"InitEvent",this).call(this),this.board.getChildByName("CancelMatchButton").getChildByName("Button").on(c.TOUCH_END,this.clickCancelMatch,this)}},{key:"destroy",value:function(){o(s(t.prototype),"destroy",this).call(this),this.board.getChildByName("CancelMatchButton").getChildByName("Button").off(c.TOUCH_END)}},{key:"clickCancelMatch",value:(g=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dead){e.next=2;break}return e.abrupt("return");case 2:return this.dead=!0,e.next=5,this.SDK.cancelMatchinig();case 5:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"leaveMatchingBoard",value:(a=h(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getGroupInfo();case 2:if(t=e.sent,e.t0=t,!e.t0){e.next=8;break}return e.next=7,this.SDK.gameManager.Util.teammaterIsLover();case 7:e.t0=e.sent;case 8:if(!e.t0){e.next=12;break}e.t1=v.main_couple_cancel,e.next=13;break;case 12:e.t1=v.main_quick_cancel;case 13:return a=e.t1,this.SDK.gameManager.Util.callTDGA(a),e.next=17,this.ChangeBoard(this.SDK.gameManager.MainBoard);case 17:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})}]),t}(k)).prototype,"clickCancelMatch",[M],Object.getOwnPropertyDescriptor(I.prototype,"clickCancelMatch"),I.prototype),I)),g._RF.pop()}}}));

System.register("chunks:///UI/Board/ResultBoard.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Const.js","../../Util.js","./BaseBoard.js","../avatar.js"],(function(e,t){var a,r,i,n,o,s,l,d,g,m,c,h,y,u,p,C,B,v,N,f,M,b,S,D,I,k,K,x,U,R,_,w;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){a=e.applyDecoratedDescriptor,r=e.inherits,i=e.classCallCheck,n=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.createClass,l=e.get,d=e.asyncToGenerator},function(e){g=e.cclegacy,m=e.SystemEventType,c=e.Animation,h=e.Label,y=e.ProgressBar,u=e.AudioSource,p=e.Vec3,C=e.tween,B=e.Color,v=e.Sprite},function(e){N=e.log,f=e.TeamColor,M=e.PlayerState,b=e.GroupMessageType,S=e.GroupSysMessageType,D=e.StatisticsKey},function(e){I=e.throttle},function(e){k=e.BaseBoard},function(e){K=e.Avatar}],execute:function(){g._RF.push({},"8a67cE5ERBGL6NMmCPaURz2","ResultBoard",void 0),w=function(){function e(t,a){i(this,e),this.board=null,this.SDK=null,this.isLover=!1,this.redTeam=[],this.blueTeam=[],this.players=[],this.result=null,this.board=t,this.SDK=a}var t,a,r;return s(e,[{key:"initData",value:(r=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getTeammate();case 2:e.sent?this.setOnceMore(0):this.setOnceMore(4);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"initUI",value:(a=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.board=t,e.next=3,this.SDK.gameManager.Util.teammaterIsLover();case 3:return this.isLover=e.sent,e.next=6,this.initBoardData(this.result);case 6:this.changeTeammater=this.board.getChildByName("other"),this.homepage=this.board.getChildByName("back"),this.isLover?(this.onceMore=this.board.getChildByName("loverOnceMore"),this.board.getChildByName("other").active=!1,this.board.getChildByName("onceMore").active=!1,this.board.getChildByName("loverOnceMore").active=!0):(this.onceMore=this.board.getChildByName("onceMore"),this.board.getChildByName("other").active=!0,this.board.getChildByName("onceMore").active=!0,this.board.getChildByName("loverOnceMore").active=!1),this.SDK.gameManager.Util.loadImg("Texture/UI/result/anniu_1/spriteFrame",this.onceMore);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"initBoardData",value:(t=d(regeneratorRuntime.mark((function e(t){var a,r,i,n,o,s,l,g,m,N,M,b,S,D,I,k,x,U,R,_=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.board.getChildByName("scoreBoard").getChildByName("cup")).getChildByName("win").active=!1,a.getChildByName("draw").active=!1,a.getChildByName("default").active=!1,this.board.getChildByName("scoreBoard").getChildByName("mvp").active=!1,e.next=7,this.SDK.getPlayerInfo();case 7:if(this.playerInfo=e.sent,t.winnerTeam||(a.getChildByName("draw").active=!0),!(this.SDK.gameManager.serverPlayer.teamId==f.red&&t.winnerTeam==f.red||this.SDK.gameManager.serverPlayer.teamId==f.blue&&t.winnerTeam==f.blue)){e.next=14;break}return e.next=12,this.SDK.gameManager.Util.loadImg("Texture/UI/result/ying/spriteFrame",this.board.getChildByName("scoreBoard"));case 12:a.getChildByName("win").active=!0,this.SDK.gameManager.getComponent(u).playOneShot(this.SDK.gameManager.audio_win,1);case 14:if(!(this.SDK.gameManager.serverPlayer.teamId==f.red&&t.winnerTeam==f.blue||this.SDK.gameManager.serverPlayer.teamId==f.blue&&t.winnerTeam==f.red)){e.next=19;break}return e.next=17,this.SDK.gameManager.Util.loadImg("Texture/UI/result/shu/spriteFrame",this.board.getChildByName("scoreBoard"));case 17:a.getChildByName("default").active=!0,this.SDK.gameManager.Util.playAudio(this.SDK.gameManager.audio_failed);case 19:if(r=null,!this.isLover){e.next=38;break}return this.board.getChildByName("scoreBoard").getChildByName("loverBoard").active=!0,this.board.getChildByName("scoreBoard").getChildByName("strengerBoard").active=!1,r=this.board.getChildByName("scoreBoard").getChildByName("loverBoard"),e.next=26,this.SDK.getLoverInfo();case 26:(i=e.sent)||Object.keys(t.teamList).map((function(e){t.teamList[e].playerList.map((function(a){t.teamList[e].id===_.playerInfo.teamId&&a.id!==_.playerInfo.id&&(i=a)}))})),n=JSON.parse(this.playerInfo.profile),o=i.profile?JSON.parse(i.profile):i,s=r.getChildByName("top").getChildByName("Avatar").getChildByName("boyAvatar"),l=r.getChildByName("top").getChildByName("Avatar2").getChildByName("girlAvatar"),1===n.gender?(this.SDK.gameManager.Util.loadRemoteImg(n.avatar_url,s),this.SDK.gameManager.Util.loadRemoteImg(o.avatar_url?o.avatar_url:o.avatar,l)):(this.SDK.gameManager.Util.loadRemoteImg(o.avatar_url?o.avatar_url:o.avatar,s),this.SDK.gameManager.Util.loadRemoteImg(n.avatar_url,l)),n.isVip?(s.getChildByName("isVip").active=!0,l.getChildByName("isVip").active=!0):(s.getChildByName("isVip").active=!1,l.getChildByName("isVip").active=!1),g=r.getChildByName("top").getChildByName("ProgressBar"),t.tacit_score_info&&t.tacit_score_info.length&&(m=t.tacit_score_info.filter((function(e){return e.lover_id===JSON.parse(_.playerInfo.profile).lover_id}))[0],r.getChildByName("top").getChildByName("Lv").getComponent(h).string="恋人Lv.".concat(this.SDK.gameManager.Util.loverLevel(m.original_tacit_score)),r.getChildByName("top").getChildByName("LvHeart").getChildByName("Lv").getComponent(h).string="".concat(this.SDK.gameManager.Util.loverLevel(m.original_tacit_score)),r.getChildByName("top").getChildByName("desc").getChildByName("score").getComponent(h).string="+".concat(m.add_tacit_score),N=m.original_tacit_score,M=m.original_tacit_score+m.add_tacit_score,this.progressBarScore(g,N),b=[50,150,350,850,1850,3850,6850,11850,18850,28850],setTimeout((function(){var e=setInterval((function(){if(N>=M)return r.getChildByName("top").getChildByName("Lv").getComponent(h).string="恋人Lv.".concat(_.SDK.gameManager.Util.loverLevel(M)),r.getChildByName("top").getChildByName("LvHeart").getChildByName("Lv").getComponent(h).string="".concat(_.SDK.gameManager.Util.loverLevel(M)),void clearInterval(e);N<M&&(N++,b.indexOf(N)>-1&&N<M?g.getComponent(y).progress=0:_.progressBarScore(g,N))}),10)}),t.mvp===this.playerInfo.id?3500:500)),e.next=42;break;case 38:this.board.getChildByName("scoreBoard").getChildByName("loverBoard").active=!1,this.board.getChildByName("scoreBoard").getChildByName("strengerBoard").active=!0,(r=this.board.getChildByName("scoreBoard").getChildByName("strengerBoard")).getChildByName("players").children.map((function(e,t){e.getChildByName("avatar").getChildByName("onceMore").active=!1,e.getChildByName("avatar").getChildByName("leave").active=!1}));case 42:S=0,D=0,I=this.board.getChildByName("scoreBoard").getChildByName("mvp"),k=I.getComponent(c),x=new p,this.players=[],this.redTeam=[],this.blueTeam=[],k.onLoad(),Object.keys(t.teamList).map((function(e){t.teamList[e].id==f.red&&t.teamList[e].playerList.map(function(){var e=d(regeneratorRuntime.mark((function e(a,i){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.players.find((function(e){return e.id===a.id}))||_.players.push(a),_.redTeam.push({player:a,node:"avatar".concat(i+1)}),S+=a.score,_.isLover?((n=r.getChildByName("teamRed").getChildByName("avatars").getChildByName("avatar".concat(i+1))).getChildByName("score").getComponent(h).string="".concat(a.score,"分"),n.getChildByName("onceMore").active=!1,n.getChildByName("leave").active=!1,1===a.gender?_.SDK.gameManager.Util.loadImg("/Texture/UI/result/boy/spriteFrame",n.getChildByName("avatar").getChildByName("gender")):_.SDK.gameManager.Util.loadImg("/Texture/UI/result/girl/spriteFrame",n.getChildByName("avatar").getChildByName("gender")),0===a.status?(n.getChildByName("offLine").active=!0,n.getChildByName("avatar").getComponent(K).setOffline()):(n.getChildByName("offLine").active=!1,n.getChildByName("avatar").getComponent(K).setOnline()),a.isVip?n.getChildByName("avatar").getChildByName("isVip").active=!0:n.getChildByName("avatar").getChildByName("isVip").active=!1,_.SDK.gameManager.Util.loadRemoteImg(a.avatar,n.getChildByName("avatar")),a.id===t.mvp&&(x=new p(n.getPosition().x-190,n.getPosition().y-150,0))):(n=r.getChildByName("top").getChildByName("teamRed").getChildByName("avatar".concat(i+1)),_.SDK.gameManager.Util.loadRemoteImg(a.avatar,n),1===a.gender&&_.SDK.gameManager.Util.loadImg("/Texture/UI/result/boy/spriteFrame",n.getChildByName("gender")),2===a.gender&&_.SDK.gameManager.Util.loadImg("/Texture/UI/result/girl/spriteFrame",n.getChildByName("gender")),a.isVip?n.getChildByName("isVip").active=!0:n.getChildByName("isVip").active=!1);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t.teamList[e].id==f.blue&&t.teamList[e].playerList.map((function(e,a){var i;_.players.find((function(t){return t.id===e.id}))||_.players.push(e),_.blueTeam.push({player:e,node:"avatar".concat(a+1)}),D+=e.score,_.isLover?((i=r.getChildByName("teamBlue").getChildByName("avatars").getChildByName("avatar".concat(a+1))).getChildByName("score").getComponent(h).string="".concat(e.score,"分"),i.getChildByName("onceMore").active=!1,i.getChildByName("leave").active=!1,1===e.gender?_.SDK.gameManager.Util.loadImg("/Texture/UI/result/boy/spriteFrame",i.getChildByName("avatar").getChildByName("gender")):_.SDK.gameManager.Util.loadImg("/Texture/UI/result/girl/spriteFrame",i.getChildByName("avatar").getChildByName("gender")),0===e.status?(i.getChildByName("offLine").active=!0,i.getChildByName("avatar").getComponent(K).setOffline()):(i.getChildByName("offLine").active=!1,i.getChildByName("avatar").getComponent(K).setOnline()),e.isVip?i.getChildByName("avatar").getChildByName("isVip").active=!0:i.getChildByName("avatar").getChildByName("isVip").active=!1,_.SDK.gameManager.Util.loadRemoteImg(e.avatar,i.getChildByName("avatar")),e.id===t.mvp&&(x=new p(i.getPosition().x+120,i.getPosition().y-150,0))):(i=r.getChildByName("top").getChildByName("teamBlue").getChildByName("avatar".concat(a+1)),_.SDK.gameManager.Util.loadRemoteImg(e.avatar,i),1===e.gender&&_.SDK.gameManager.Util.loadImg("/Texture/UI/result/boy/spriteFrame",i.getChildByName("gender")),2===e.gender&&_.SDK.gameManager.Util.loadImg("/Texture/UI/result/girl/spriteFrame",i.getChildByName("gender")),e.isVip?i.getChildByName("isVip").active=!0:i.getChildByName("isVip").active=!1)}))})),this.isLover||((U=this.board.getChildByName("scoreBoard").getChildByName("strengerBoard").getChildByName("top")).getChildByName("scoreBar").getComponent(y).progress=.5,U.getChildByName("scoreBar").getChildByName("Bar").getChildByName("vs").position=new p(240,5,0),(R=S+D!==0?S/(S+D):.5)<.2&&(R=.2),R>.8&&(R=.8),setTimeout((function(){C(U.getChildByName("scoreBar").getComponent(y)).to(.3,{progress:R}).start(),C(U.getChildByName("scoreBar").getChildByName("Bar").getChildByName("vs")).to(.3,{position:new p(480*R,5,0)}).start()}),100),U.getChildByName("scoreBar").getChildByName("redScore").getComponent(h).string="".concat(S),U.getChildByName("scoreBar").getChildByName("blueScore").getComponent(h).string="".concat(D),this.players.sort((function(e,t){return t.score-e.score})),this.players.map((function(e,a){var i=r.getChildByName("players").getChildByName("player".concat(a+1));_.SDK.gameManager.Util.loadRemoteImg(e.avatar,i.getChildByName("avatar")),i.getChildByName("nickName").getComponent(h).string=e.name.length>6?e.name.slice(0,5):e.name,i.getChildByName("score").getComponent(h).string="".concat(e.score,"分"),e.isVip?(i.getChildByName("nickName").getComponent(h).color=new B(240,190,37,255),i.getChildByName("nickName").getChildByName("vip").active=!0):(i.getChildByName("nickName").getComponent(h).color=new B(51,51,51,255),i.getChildByName("nickName").getChildByName("vip").active=!1),_.playerInfo.id===e.id?(i.getComponent(v).color=new B(255,246,237,255),i.getChildByName("nickName").getComponent(h).color=new B(210,107,0,255),i.getChildByName("score").getComponent(h).color=new B(210,107,0,255)):(i.getComponent(v).color=new B(255,255,255,255),i.getChildByName("score").getComponent(h).color=new B(51,51,51,255),e.isVip||(i.getChildByName("nickName").getComponent(h).color=new B(51,51,51,255))),0===e.status?(i.getChildByName("avatar").getChildByName("offLine").active=!0,i.getChildByName("avatar").getComponent(K).setOffline()):(i.getChildByName("avatar").getChildByName("offLine").active=!1,i.getChildByName("avatar").getComponent(K).setOnline()),1===e.gender?_.SDK.gameManager.Util.loadImg("/Texture/UI/result/boy/spriteFrame",i.getChildByName("avatar").getChildByName("gender")):_.SDK.gameManager.Util.loadImg("/Texture/UI/result/girl/spriteFrame",i.getChildByName("avatar").getChildByName("gender")),_.isLover||e.id!==t.mvp||(x=new p(i.getChildByName("avatar").getPosition().x-35,i.getChildByName("avatar").getPosition().y+65,0))}))),t.mvp&&(t.mvp===this.playerInfo.id?setTimeout((function(){I.active=!0,k.on(c.EventType.FINISHED,(function(){C(I).to(.3,{position:x,scale:new p(.2,.2,.2)}).start()})),k.play()}),300):(I.setScale(.2,.2,.2),I.setPosition(x),I.active=!0));case 54:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setOnceMore",value:function(e){var t=this;switch(this.onceMore||(this.onceMore=this.board.getChildByName("onceMore")),e){case 1:this.SDK.gameManager.Util.loadImg("Texture/UI/result/anniu_3/spriteFrame",this.onceMore),this.onceMore.off(m.TOUCH_END),this.onceMore.getChildByName("Label").getComponent(h).string="等待队友准备";break;case 2:this.SDK.gameManager.Util.loadImg("Texture/UI/result/anniu_1/spriteFrame",this.onceMore),this.onceMore.getChildByName("Label").getComponent(h).string="队友已准备好,立即开始";break;case 3:this.SDK.gameManager.Util.loadImg("Texture/UI/result/anniu_1/spriteFrame",this.onceMore),this.onceMore.getChildByName("Label").getComponent(h).string="再来一局";break;case 4:this.SDK.gameManager.Util.loadImg("Texture/UI/result/anniu_3/spriteFrame",this.onceMore),this.onceMore.getChildByName("Label").getComponent(h).string="队友已离开";break;default:this.SDK.gameManager.Util.loadImg("Texture/UI/result/anniu_1/spriteFrame",this.onceMore),this.onceMore.getChildByName("Label").getComponent(h).string="再来一局"}var a=this.board.getChildByName("scoreBoard").getChildByName("loverBoard").getChildByName("teamRed").getChildByName("avatars"),r=this.board.getChildByName("scoreBoard").getChildByName("loverBoard").getChildByName("teamBlue").getChildByName("avatars"),i=this.board.getChildByName("scoreBoard").getChildByName("strengerBoard");this.playerInfo.teamId===f.red?this.redTeam.map((function(r){switch(e){case 0:case 3:case 4:a.getChildByName("".concat(r.node)).getChildByName("onceMore").active=!1,i.getChildByName("players").getChildByName("player".concat(t.players.findIndex((function(e){return e.id===r.player.id}))+1)).getChildByName("avatar").getChildByName("onceMore").active=!1;break;case 1:if(r.player.id!==t.playerInfo.id)break;a.getChildByName("".concat(r.node)).getChildByName("onceMore").active=!0,i.getChildByName("players").getChildByName("player".concat(t.players.findIndex((function(e){return e.id===r.player.id}))+1)).getChildByName("avatar").getChildByName("onceMore").active=!0;break;case 2:if(r.player.id===t.playerInfo.id)break;a.getChildByName("".concat(r.node)).getChildByName("onceMore").active=!0,i.getChildByName("players").getChildByName("player".concat(t.players.findIndex((function(e){return e.id===r.player.id}))+1)).getChildByName("avatar").getChildByName("onceMore").active=!0}})):this.blueTeam.map((function(a){switch(e){case 0:case 3:case 4:r.getChildByName("".concat(a.node)).getChildByName("onceMore").active=!1,i.getChildByName("players").getChildByName("player".concat(t.players.findIndex((function(e){return e.id===a.player.id}))+1)).getChildByName("avatar").getChildByName("onceMore").active=!1;break;case 1:if(a.player.id!==t.playerInfo.id)break;r.getChildByName("".concat(a.node)).getChildByName("onceMore").active=!0,i.getChildByName("players").getChildByName("player".concat(t.players.findIndex((function(e){return e.id===a.player.id}))+1)).getChildByName("avatar").getChildByName("onceMore").active=!0;break;case 2:if(a.player.id===t.playerInfo.id)break;r.getChildByName("".concat(a.node)).getChildByName("onceMore").active=!0,i.getChildByName("players").getChildByName("player".concat(t.players.findIndex((function(e){return e.id===a.player.id}))+1)).getChildByName("avatar").getChildByName("onceMore").active=!0}}))}},{key:"progressBarScore",value:function(e,t){var a;a=t<=50?t/50:t>50&&t<=150?(t-50)/100:t>150&&t<=350?(t-150)/200:t>350&&t<=850?(t-350)/500:t>850&&t<=1850?(t-850)/1e3:t>1850&&t<=3850?(t-1850)/2e3:t>3850&&t<=6850?(t-3850)/3e3:t>6850&&t<=11850?(t-6850)/5e3:t>11850&&t<=18850?(t-11850)/7e3:t>18850&&t<=28850?(t-18850)/1e4:0,e.getComponent(y).progress=a}}]),e}(),e("ResultBoard",(x=I(),U=I(500),R=I(),a((_=function(e){function t(e,a){var r;return i(this,t),(r=n(this,o(t).call(this,e,a))).uiControl=null,r.result=null,r.name="ResultBoard",r.uiControl=new w(r.board,r.SDK),r}var a,g,h,y,u,p,C;return r(t,e),s(t,[{key:"setResult",value:function(e){e&&(this.uiControl.result=e)}},{key:"initData",value:function(){l(o(t.prototype),"initData",this).call(this),this.SDK.gameManager.robotInfo={}}},{key:"setListener",value:function(){l(o(t.prototype),"setListener",this).call(this),this.SDK.curGroup.onChangeCustomGroupPlayerStatus=this.onChangeCustomGroupPlayerStatus.bind(this),this.SDK.curGroup.onRecvFromGroupClient=this.onRecvFromGroupClient.bind(this),this.SDK.curGroup.onLeaveGroup=this.onLeaveGroup.bind(this),this.SDK.Room.onCancelMatch=this.onCancelMatch.bind(this),this.SDK.Room.onMatch=this.onMatch.bind(this),this.SDK.gameManager.timerSingal&&(this.SDK.gameManager.timerSingal=null)}},{key:"onChangeCustomGroupPlayerStatus",value:(C=d(regeneratorRuntime.mark((function e(t){var a,r,i,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getTeammate();case 2:return a=e.sent,e.next=5,this.SDK.getPlayerInfo();case 5:if(r=e.sent,i=r.stateGroup,n=M.NotReady,a&&(n=a.customPlayerStatus,t.data.changePlayerId==a.id&&(n=t.data.customGroupPlayerStatus,i==M.Ready?n==M.Ready||this.uiControl.setOnceMore(1):n==M.Ready?this.uiControl.setOnceMore(2):this.uiControl.setOnceMore(3))),i!=M.Ready||n!=M.Ready){e.next=28;break}return e.next=13,this.SDK.getGroupInfo();case 13:if(o=e.sent,N("都准备完毕,进入匹配",o.owner,this.uiControl.playerInfo.id),o.owner!=this.uiControl.playerInfo.id){e.next=28;break}return e.next=18,this.SDK.matchingLover();case 18:if(e.sent!=MGOBE.ErrCode.EC_OK){e.next=27;break}return e.next=22,this.SDK.sendToGroup(b.Sys,S.Matching);case 22:this.initBoardElements(),this.ChangeBoard(this.SDK.gameManager.MatchingBoard),this.SDK.gameManager.Util.callTDGA(D.game_over_again),e.next=28;break;case 27:case 28:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"onRecvFromGroupClient",value:(p=d(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=JSON.parse(t.data.msg)).type!=b.Sys){e.next=7;break}if(a.content!=S.Matching){e.next=7;break}return this.initBoardElements(),e.next=7,this.ChangeBoard(this.SDK.gameManager.MatchingBoard);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"onChangeGroupPlayerNetworkState",value:(u=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N("玩家[",t.data.changePlayerId,"]在线状态有变化",t.data.networkState);case 1:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"onJoinGroup",value:function(e){N("有玩家加入队组:",e.data.joinPlayerId)}},{key:"onCancelMatch",value:function(e){}},{key:"onMatch",value:function(e){}},{key:"onLeaveGroup",value:function(e){var t=this;N("有人离开队组",e.data.leavePlayerId);var a,r=this.uiControl.blueTeam.concat(this.uiControl.redTeam);this.uiControl.isLover?(a=this.board.getChildByName("scoreBoard").getChildByName("loverBoard"),r.map((function(t){t.player.id===e.data.leavePlayerId&&(t.player.teamId===f.red?a.getChildByName("teamRed").getChildByName("avatars").getChildByName("".concat(t.node)).getChildByName("leave").active=!0:a.getChildByName("teamBlue").getChildByName("avatars").getChildByName("".concat(t.node)).getChildByName("leave").active=!0)}))):(a=this.board.getChildByName("scoreBoard").getChildByName("strengerBoard"),r.map((function(r){r.player.id===e.data.leavePlayerId&&(a.getChildByName("players").getChildByName("player".concat(t.uiControl.players.findIndex((function(e){return e.id===r.player.id}))+1)).getChildByName("avatar").getChildByName("leave").active=!0)}))),this.uiControl.setOnceMore(4)}},{key:"InitEvent",value:(y=d(regeneratorRuntime.mark((function e(){var a,r,i,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(o(t.prototype),"InitEvent",this).call(this),e.next=3,this.SDK.gameManager.Util.teammaterIsLover();case 3:e.sent?(a=this.board.getChildByName("back"),r=this.board.getChildByName("loverOnceMore"),a.on(m.TOUCH_END,this.clickHomepage,this),r.on(m.TOUCH_END,this.clickOnceMore,this)):(i=this.board.getChildByName("back"),n=this.board.getChildByName("onceMore"),s=this.board.getChildByName("other"),i.on(m.TOUCH_END,this.clickHomepage,this),n.on(m.TOUCH_END,this.clickOnceMore,this),s.on(m.TOUCH_END,this.clickOther,this));case 5:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"destroy",value:function(){l(o(t.prototype),"destroy",this).call(this);var e=this.board.getChildByName("back"),a=this.board.getChildByName("onceMore"),r=this.board.getChildByName("other");e.off(m.TOUCH_END),a.off(m.TOUCH_END),r.off(m.TOUCH_END)}},{key:"clickHomepage",value:(h=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initBoardElements(),e.next=3,this.ChangeBoard(this.SDK.gameManager.MainBoard);case 3:this.SDK.gameManager.Util.callTDGA(D.game_over_back);case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"clickOnceMore",value:(g=d(regeneratorRuntime.mark((function e(){var t,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getTeammate();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a=this.uiControl.playerInfo.stateGroup,r=t.customPlayerStatus,(i=a==M.Ready?M.NotReady:M.Ready)==M.Ready?r==M.Ready||this.uiControl.setOnceMore(1):r==M.Ready?this.uiControl.setOnceMore(2):this.uiControl.setOnceMore(3),this.uiControl.playerInfo.stateGroup=i,this.SDK.setGroupPlayerStatus(i);case 11:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"clickOther",value:(a=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.leaveGroup();case 2:return e.next=4,this.SDK.leaveRoom();case 4:return this.initBoardElements(),e.next=7,this.SDK.matchingSingle();case 7:if(e.sent!=MGOBE.ErrCode.EC_OK){e.next=14;break}return this.SDK.gameManager.Util.callTDGA(D.game_over_replace),e.next=12,this.ChangeBoard(this.SDK.gameManager.MatchingBoard);case 12:e.next=16;break;case 14:return e.next=16,this.ChangeBoard(this.SDK.gameManager.MainBoard);case 16:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"initBoardElements",value:function(){this.board.getChildByName("scoreBoard").getChildByName("mvp").getComponent(c).onDestroy(),this.board.getChildByName("scoreBoard").getChildByName("mvp").active=!1,this.board.getChildByName("scoreBoard").getChildByName("mvp").setPosition(0,0,0),this.board.getChildByName("scoreBoard").getChildByName("mvp").setScale(1.2,1.2,1.2)}}]),t}(k)).prototype,"clickHomepage",[x],Object.getOwnPropertyDescriptor(_.prototype,"clickHomepage"),_.prototype),a(_.prototype,"clickOnceMore",[U],Object.getOwnPropertyDescriptor(_.prototype,"clickOnceMore"),_.prototype),a(_.prototype,"clickOther",[R],Object.getOwnPropertyDescriptor(_.prototype,"clickOther"),_.prototype),_)),g._RF.pop()}}}));

System.register("chunks:///UI/highLightMask.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,s){var e,i,n,a,o,h,r,c,u,g,p,l,d,f,m;return t({_dec:void 0,_class:void 0}),{setters:[function(t){e=t.inherits,i=t.createClass,n=t.classCallCheck,a=t.possibleConstructorReturn,o=t.getPrototypeOf},function(t){h=t.cclegacy,r=t._decorator,c=t.Sprite,u=t.view,g=t.Vec3,p=t.UITransform,l=t.Component}],execute:function(){h._RF.push({},"25f14P49k9O0ZDlm2Ne6KtT","highLightMask",void 0),m=r.ccclass,r.property,t("HighLightMask",(d=m("HighLightMask"),d(f=function(t){function s(){return n(this,s),a(this,o(s).apply(this,arguments))}return e(s,t),i(s,[{key:"reset",value:function(){this.pass=this.node.getComponent(c).material.passes[0],this.pass.setUniform(this.pass.getHandle("radius"),0)}},{key:"setFocus",value:function(t,s){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;if(t&&t.components&&!(t.components.length<=0)){this.focus=t,this.camera=s,this.radius=e;var i=this.node,n=u.getFrameSize(),a=new g,o=new g;if(t&&t.getComponent(p)){t.getPosition(o);for(var h,r=t,c=new g;(r=r.getParent())&&"UI"!=r.name;)h=r.getScale(),o.x*=h.x,o.y*=h.y,r.getPosition(c),o.x+=c.x,o.y+=c.y;a.x=o.x+n.width/2,a.y=-o.y+n.height/2}else t.getPosition(o),s.convertToUINode(o,i,a),a.x+=n.width/2,a.y=-a.y+n.height/2;this.pass.setUniform(this.pass.getHandle("centerX"),a.x),this.pass.setUniform(this.pass.getHandle("centerY"),a.y),this.pass.setUniform(this.pass.getHandle("radius"),e),this.pass.setUniform(this.pass.getHandle("height"),n.height),this.pass.setUniform(this.pass.getHandle("width"),n.width)}}},{key:"update",value:function(t){this.focus&&this.setFocus(this.focus,this.camera,this.radius)}}]),s}(l))||f)),h._RF.pop()}}}));

System.register("chunks:///UI/Board/TeachingBoard.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Box.js","../../Const.js","../../Util.js","../Dialog/Dialog.js","./BaseBoard.js","../avatar.js","../highLightMask.js"],(function(e,t){var a,i,n,r,o,s,h,c,u,d,g,l,m,p,y,C,f,N,x,v,S,B,D,b,w,M,_,P,k,K,T,O,j,E,I,U,R,A,H,L,z,G,F,Y,J,W,V,q,Q,X,Z;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_class:void 0,_temp:void 0,TeachState:void 0,TeachStage:void 0}),{setters:[function(e){a=e.applyDecoratedDescriptor,i=e.inherits,n=e.classCallCheck,r=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.assertThisInitialized,h=e.createClass,c=e.get,u=e.asyncToGenerator},function(e){d=e.cclegacy,g=e.Vec3,l=e.systemEvent,m=e.SystemEvent,p=e.SystemEventType,y=e.Label,C=e.tween,f=e.ProgressBar,N=e.Vec2,x=e.randomRange,v=e.Node,S=e.UITransform,B=e.Sprite,D=e.loader,b=e.Prefab,w=e.UIOpacity,M=e.instantiate},function(e){_=e.Box},function(e){P=e.log,k=e.StatisticsKey,K=e.DialogButtonType,T=e.NetState,O=e.JumpStatus,j=e.EmojiType},function(e){E=e.throttle},function(e){I=e.Dialog},function(e){U=e.BaseBoard},function(e){R=e.Avatar},function(e){A=e.HighLightMask}],execute:function(){d._RF.push({},"f4ca8JWOD5I16+qzhkrFKPI","TeachingBoard",void 0),Q=function(){function e(t,a){n(this,e),this.board=null,this.SDK=null,this.end=!1,this.emojiList=[],this.selfAvatar=null,this.teammaterAvatar=null,this.timeNumberNode=null,this.time=0,this.selfSign="1-2",this.top1=!0,this.board=t,this.SDK=a}var t,a,i,r,o;return h(e,[{key:"initUI",value:(o=u(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.board=t,this.changeSoundUI(this.SDK.gameManager.Setting.switch_audio),this.headerNode=this.board.getChildByName("Header"),this.selfAvatar=this.headerNode.getChildByName("team0").getChildByName("avatar-2").getChildByName("avatar"),this.teammaterAvatar=this.headerNode.getChildByName("team0").getChildByName("avatar-1").getChildByName("avatar"),this.timeNumberNode=this.headerNode.getChildByName("time").getChildByName("number"),this.tipNode_tip=this.board.getChildByName("tip"),this.tipNode_wait=this.board.getChildByName("wait"),this.team1Node=this.board.getChildByName("Header").getChildByName("team0"),this.introduceTitleNode=this.board.getChildByName("introduce-title"),this.introduceBoxNode=this.board.getChildByName("introduce-box"),this.introduceBoxNode1=this.board.getChildByName("introduce-box1"),this.interactionNode=this.board.getChildByName("Interaction-ex"),this.touch=this.board.getChildByName("touch-tech"),this.mask=this.board.getChildByName("mask").getComponent(A),this.board.getChildByName("mask2").active=!1,this.introduceBoxNode.active=!1,this.introduceBoxNode1.active=!1,this.tipNode_tip.active=!1,this.tipNode_wait.active=!1,this.board.getChildByName("emojiTip").active=!1,this.headerNode.getChildByName("team0").getChildByName("avatar-1").getChildByName("offLine").active=!1,this.headerNode.getChildByName("team0").getChildByName("avatar-2").getChildByName("offLine").active=!1,this.headerNode.getChildByName("team1").getChildByName("avatar-1").getChildByName("offLine").active=!1,this.headerNode.getChildByName("team1").getChildByName("avatar-2").getChildByName("offLine").active=!1,this.teammaterAvatar.getComponent(R).setOnline(),this.selfAvatar.getComponent(R).setOnline(),this.headerNode.getChildByName("team1").getChildByName("avatar-1").getChildByName("avatar").getComponent(R).setOnline(),this.headerNode.getChildByName("team1").getChildByName("avatar-2").getChildByName("avatar").getComponent(R).setOnline(),e.next=31,this.SDK.getPlayerInfo();case 31:a=e.sent,i=JSON.parse(a.profile),this.SDK.gameManager.Util.loadRemoteImg(i.avatar_url,this.selfAvatar),this.selfAvatar.getChildByName("name").getComponent(y).string=a.name;case 35:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"initData",value:function(){this.time=-100}},{key:"setTime",value:(r=u(regeneratorRuntime.mark((function e(t){var a,i,n,r,o,s,h,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.board){e.next=51;break}if(!(this.time!=t&&t<=20)){e.next=51;break}if(this.time=t,i=[],0==t){e.next=21;break}case 5:if(!(t>0)){e.next=19;break}return a=t%10,t=Math.floor(t/10),n=new v,r=n.addComponent(S),n.addComponent(B),r.setContentSize(42,56),r.setAnchorPoint(.5,.5),n.setScale(new g(.5,.5,1)),e.next=16,this.SDK.gameManager.Util.loadImg("Texture/number/"+a+"/spriteFrame",n);case 16:i.push(n),e.next=5;break;case 19:e.next=31;break;case 21:return a=0,n=new v,r=n.addComponent(S),n.addComponent(B),r.setContentSize(42,56),r.setAnchorPoint(.5,.5),n.setScale(new g(.5,.5,1)),e.next=30,this.SDK.gameManager.Util.loadImg("Texture/number/"+a+"/spriteFrame",n);case 30:i.push(n);case 31:e.t0=i.length,e.next=1===e.t0?34:2===e.t0?37:3===e.t0?40:44;break;case 34:return i[0].setPosition(new g(0,0,0)),a>0&&a<=5&&C(i[0]).to(.5,{scale:new g(1.5,1.5,1)}).start(),e.abrupt("break",48);case 37:return i[1].setPosition(new g(-10,0,0)),i[0].setPosition(new g(10,0,0)),e.abrupt("break",48);case 40:return i[2].setPosition(new g(-20,0,0)),i[1].setPosition(new g(0,0,0)),i[0].setPosition(new g(20,0,0)),e.abrupt("break",48);case 44:for(o=0;o<i.length;o++)i[o].destroy();return i=[],this.board.getChildByName("Header").getChildByName("time").getComponent(y).string=t,e.abrupt("break",48);case 48:for(s=this.timeNumberNode.children,h=0;h<s.length;h++)s[h].destroy();for(c=0;c<i.length;c++)i[c].setParent(this.timeNumberNode);case 51:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"showEmoji",value:(i=u(regeneratorRuntime.mark((function e(t,a){var i,n,r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new g(260,206,0),r=new Promise((function(e){var a="Prefab/Emoji/emoji_"+(t+1);D.loadRes(a,b,function(){var t=u(regeneratorRuntime.mark((function t(a,r){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=3;break}return t.abrupt("return");case 3:return n=M(r),t.next=6,o.SDK.getPlayerInfo();case 6:s=t.sent,o.SDK.gameManager.Util.loadRemoteImg(JSON.parse(s.profile).avatar_url,n.getChildByName("avatar")),n.getComponent(S).priority=99,n.setPosition(i),n.setScale(new g(.8,.8,.8)),n.setParent(o.board),C(n).to(3,{position:{x:-218,y:206,z:0}},{onComplete:function(){n.destroy()}}).start(),e(!0);case 14:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())})),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"changePlayer",value:(a=u(regeneratorRuntime.mark((function e(t){var a,i,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.board.getChildByName("Header").getChildByName("team0"),"2-1"!==this.selfSign&&"2-2"!==this.selfSign||(a=this.board.getChildByName("Header").getChildByName("team1")),i=a.getChildByName("avatar-1"),n=a.getChildByName("avatar-2"),r=i.getComponent(w),o=n.getComponent(w),t?(this.tipNode_tip.active=!0,this.tipNode_wait.active=!1):(this.tipNode_tip.active=!1,this.tipNode_wait.active=!0),t&&("1-1"===this.selfSign||"2-1"===this.selfSign)||!t&&("1-2"===this.selfSign||"2-2"===this.selfSign)?(n.getComponent(S).priority=-1,i.getComponent(S).priority=1,C(n).to(.6,{position:"1-1"===this.selfSign||"1-2"===this.selfSign?new g(-95,-46,0):new g(95,-46,0),scale:new g(.9,.9,.9)}).start(),C(o).to(.6,{opacity:122}).start(),C(i).to(.6,{position:"1-1"===this.selfSign||"1-2"===this.selfSign?new g(-65,30,0):new g(65,30,0)}).start(),C(i).to(.3,{scale:new g(1.06,1.06,1.06)}).then(C(i).to(.3,{scale:new g(1,1,1)}).start()).start(),C(r).to(.6,{opacity:255}).start()):(i.getComponent(S).priority=-1,n.getComponent(S).priority=1,C(i).to(.6,{position:"1-1"===this.selfSign||"1-2"===this.selfSign?new g(-95,-46,0):new g(95,-46,0),scale:new g(.9,.9,.9)}).start(),C(r).to(.6,{opacity:122}).start(),C(n).to(.6,{position:"1-1"===this.selfSign||"1-2"===this.selfSign?new g(-65,30,0):new g(65,30,0)}).start(),C(n).to(.3,{scale:new g(1.06,1.06,1.06)}).then(C(n).to(.3,{scale:new g(1,1,1)}).start()),C(o).to(.6,{opacity:255}).start());case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"setTipAvatar",value:(t=u(regeneratorRuntime.mark((function e(t){var a,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new g,n=this.board,(a=this.SDK.gameManager.Player.node.getPosition()).y+=2.2,this.SDK.gameManager.camera.convertToUINode(a,n,i),this.SDK.gameManager.userTipNode.setPosition(i),!t){e.next=11;break}return e.next=9,this.SDK.gameManager.Util.loadImg("Texture/UI/gaming/me-001/spriteFrame",this.SDK.gameManager.userTipNode.getChildByName("avatar"));case 9:e.next=13;break;case 11:return e.next=13,this.SDK.gameManager.Util.loadImg("Texture/UI/main/banner@2x (3)/spriteFrame",this.SDK.gameManager.userTipNode.getChildByName("avatar"));case 13:this.SDK.gameManager.userTipNode.active=!0;case 14:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setIntroduce",value:function(e,t){e&&(this.introduceTitleNode.getComponent(y).string=e),t&&(this.introduceBoxNode.getChildByName("Label").getComponent(y).string=t)}},{key:"refreshScore",value:function(e,t){var a,i=e,n=t,r=this.board.getChildByName("Header").getChildByName("score");(a=i+n===0?.5:i/(i+n))<.2&&(a=.2),a>.8&&(a=.8),a>.24&&a<.5&&(a*=.85),a>.5&&a<.6&&(a*=1.2),C(r.getComponent(f)).to(.3,{progress:a}).start(),r.getChildByName("redScore").getComponent(y).string="".concat(i,"分"),r.getChildByName("blueScore").getComponent(y).string="".concat(n,"分")}},{key:"setFocus",value:function(e,t){this.mask.setFocus(e,this.SDK.gameManager.camera,t)}},{key:"changeSoundUI",value:function(e){this.SDK.gameManager.Util.loadImg(e?"/Texture/UI/gaming/kaiqi@2x/spriteFrame":"/Texture/UI/gaming/gianbi@2x/spriteFrame",this.board.getChildByName("nav").getChildByName("music"))}}]),e}(),function(e){e[e.normal=0]="normal",e[e.try=1]="try",e[e.wait=2]="wait"}(X||(X={})),function(e){e[e.single=0]="single",e[e.multiple=1]="multiple",e[e.gaming=2]="gaming",e[e.end=3]="end"}(Z||(Z={})),e("TeachingBoard",(H=E(),L=E(),z=E(),G=E(),F=E(),Y=E(),J=E(),W=E(),V=E(),a((q=function(e){function t(e,a){var i;return n(this,t),(i=r(this,o(t).call(this,e,a))).TeachState={0:i.action_1.bind(s(i)),1:i.action_2.bind(s(i)),2:i.action_3.bind(s(i)),3:i.action_4.bind(s(i)),4:i.action_5.bind(s(i)),5:i.action_6.bind(s(i))},i.uiControl=null,i.name="TeachingBoard",i.uiControl=new Q(s(i),i.SDK),i}var a,d,f,v,S,B,D,b,w,M;return i(t,e),h(t,[{key:"initData",value:function(){c(o(t.prototype),"initData",this).call(this),this.teachMap=[[1,2.5,4,0,0,{x:0,y:0,z:0}],[1,2.5,4,0,3,{x:0,y:0,z:0}]],this.SDK.gameManager.updateCenterNode(!1),this.teachIndex=0,this.curBoxIndex=0,this.score=0,this.enemyScore=0,this.perfectCount=0,this.jumpCount=0,this.time=0,this.teachState=X.normal,this.teachStage=Z.single,this.Player=this.SDK.gameManager.Player,this.OtherPlayer=this.SDK.gameManager.OtherTeam,this.uiControl.mask.reset(),this.uiControl.refreshScore(0,0),this.SDK.gameManager.camera.node.setPosition(this.SDK.gameManager._origin_camera_pos),this.SDK.gameManager.plane.setPosition(new g(0,0,0)),this.action_1()}},{key:"setListener",value:function(){c(o(t.prototype),"setListener",this).call(this),this.SDK.gameManager.timerSingal=this.onTimerSingal.bind(this),this.SDK.gameManager.teachJumpSingal=this.jumpEnd.bind(this),this.SDK.Room.onCancelMatch=this.onCancelMatch.bind(this),this.SDK.Room.onMatch=this.onMatch.bind(this)}},{key:"onCancelMatch",value:function(e){}},{key:"onMatch",value:function(e){}},{key:"onTimerSingal",value:(M=u(regeneratorRuntime.mark((function e(){var t,a,i,n,r,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.teachStage==Z.gaming&&(this.time-=.2,this.uiControl.setTime(Math.floor(this.time)),Math.floor(5*this.time)%8==0&&(t=this.OtherPlayer.node.getPosition(),a=this.OtherPlayer.nextBox.node.getPosition(),i=new N(a.x-t.x,a.z-t.z),n=x(-1,1),r=N.distance(new N(t.x,t.z),new N(a.x,a.z))+n,o=this.SDK.gameManager.Util.getPosWithVec(t,i,r),s={time:0,status:O.next,offset:[o.x-a.x,o.z-a.z],perfect:Math.abs(n)<.325,distance:r},this.SDK.gameManager.OtherTeam.PowerEnd(s)),this.time<=0&&this.nextState());case 1:case"end":return e.stop()}}),e,this)}))),function(){return M.apply(this,arguments)})},{key:"onAvatarSingal",value:function(e,t){e?t?this.uiControl.selfAvatar.getComponent(R).timeStart():this.uiControl.selfAvatar.getComponent(R).reset():t?this.uiControl.teammaterAvatar.getComponent(R).timeStart():this.uiControl.teammaterAvatar.getComponent(R).reset()}},{key:"InitEvent",value:(w=u(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(o(t.prototype),"InitEvent",this).call(this),a=this.board.getChildByName("Interaction-ex"),this.board.getChildByName("nav").getChildByName("music").on(p.TOUCH_END,this.switchSound,this),this.board.getChildByName("nav").getChildByName("back").on(p.TOUCH_END,this.leave,this),this.board.getChildByName("introduce-box").getChildByName("next").on(p.TOUCH_END,this.nextStateAction,this),this.board.getChildByName("introduce-box").getChildByName("again").on(p.TOUCH_END,this.againAction,this),l.on(m.EventType.TOUCH_START,this.onTouchDown,this),l.on(m.EventType.TOUCH_END,this.onTouchUp,this),a.getChildByName("emoji_1").on(p.TOUCH_END,this.sendEmoji_1,this),a.getChildByName("emoji_2").on(p.TOUCH_END,this.sendEmoji_2,this),a.getChildByName("emoji_3").on(p.TOUCH_END,this.sendEmoji_3,this),a.getChildByName("emoji_4").on(p.TOUCH_END,this.sendEmoji_4,this);case 12:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"destroy",value:function(){c(o(t.prototype),"destroy",this).call(this),l.off(m.EventType.TOUCH_START),l.off(m.EventType.TOUCH_END);var e=this.board.getChildByName("Interaction-ex");this.board.getChildByName("nav").getChildByName("music").off(p.TOUCH_END),this.board.getChildByName("nav").getChildByName("back").off(p.TOUCH_END),this.board.getChildByName("introduce-box").getChildByName("next").off(p.TOUCH_END),this.board.getChildByName("introduce-box").getChildByName("again").off(p.TOUCH_END),e.getChildByName("emoji_1").off(p.TOUCH_END),e.getChildByName("emoji_2").off(p.TOUCH_END),e.getChildByName("emoji_3").off(p.TOUCH_END),e.getChildByName("emoji_4").off(p.TOUCH_END)}},{key:"switchSound",value:function(){this.SDK.gameManager.Setting.switch_audio=!this.SDK.gameManager.Setting.switch_audio,this.uiControl.changeSoundUI(this.SDK.gameManager.Setting.switch_audio)}},{key:"nextStateAction",value:function(){this.nextState()}},{key:"againAction",value:function(){this.board.getChildByName("mask").active=!1;var e=this.teachIndex-1;if(P("教学流程","回到上一步",this.teachIndex),this.TeachState[e])return this.TeachState[e](),this.teachIndex=e,!0}},{key:"clearScoreNode",value:function(){for(var e=0;e<this.SDK.gameManager.scoreNodeList.length;e++){var t=this.SDK.gameManager.scoreNodeList[e];t.node.destroy(),t.perfect&&t.perfect.destroy()}this.SDK.gameManager.scoreNodeList=[]}},{key:"leave",value:function(){var e=this;P("教学流程","点击退出演示,弹出选择框",this.SDK.gameManager.scoreNodeList),this.SDK.gameManager.Util.callTDGA(k.Guidance_skip_clicked),new I(this.scene,this.SDK,"确认要跳过游戏演示吗?",K.multiple,"开始游戏","我再看看").show(this,u(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.SDK.curDialog.dead){t.next=2;break}return t.abrupt("return");case 2:if(e.SDK.curDialog.destroy(),e.SDK.gameManager.isTeached=!0,e.clearScoreNode(),e.SDK.gameManager.Util.callTDGA(k.Guidance_skip_confirmed),!e.SDK.gameManager.isQuickMatching){t.next=21;break}return t.next=10,e.SDK.matchingSingle();case 10:if(t.sent!=MGOBE.ErrCode.EC_OK){t.next=16;break}return t.next=14,e.ChangeBoard(e.SDK.gameManager.MatchingBoard);case 14:t.next=19;break;case 16:return e.SDK.cancelMatchinig(),t.next=19,e.ChangeBoard(e.SDK.gameManager.MainBoard);case 19:t.next=48;break;case 21:return t.next=23,e.SDK.gameManager.Util.http(e.SDK.gameManager.Config.serverURL.group,"GET",null,!1,e.SDK.gameManager.AccessToken);case 23:if(!(a=t.sent)){t.next=36;break}return a=a.other_group_id,t.next=28,e.SDK.joinGroup(a);case 28:if(t.sent!==MGOBE.ErrCode.EC_OK){t.next=36;break}return t.next=32,e.SDK.getTeammate();case 32:if(t.sent.commonNetworkState==T.Offline){t.next=36;break}return e.ChangeBoard(e.SDK.gameManager.WaitLoverBoard),t.abrupt("return");case 36:return t.next=38,e.SDK.createGroup();case 38:if(0!==t.sent){t.next=47;break}return t.next=42,e.SDK.getGroupInfo();case 42:i=t.sent,e.SDK.gameManager.Util.http(e.SDK.gameManager.Config.serverURL.group,"POST",{group_id:i.id},!1,e.SDK.gameManager.AccessToken),e.ChangeBoard(e.SDK.gameManager.WaitLoverBoard),t.next=48;break;case 47:e.ChangeBoard(e.SDK.gameManager.MainBoard);case 48:case"end":return t.stop()}}),t)}))),(function(){e.SDK.curDialog.dead||e.SDK.curDialog.destroy()}))}},{key:"endActionYes",value:function(){var e=this;this.board.getChildByName("dialog-end").active=!1,this.SDK.gameManager.isTeached=!0,this.SDK.gameManager.Util.callTDGA(k.Guidance_pass_start),setTimeout(u(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.SDK.gameManager.isQuickMatching){t.next=14;break}return t.next=3,e.SDK.matchingSingle();case 3:if(t.sent!=MGOBE.ErrCode.EC_OK){t.next=9;break}return t.next=7,e.ChangeBoard(e.SDK.gameManager.MatchingBoard);case 7:t.next=12;break;case 9:return e.SDK.cancelMatchinig(),t.next=12,e.ChangeBoard(e.SDK.gameManager.MainBoard);case 12:t.next=41;break;case 14:return t.next=16,e.SDK.gameManager.Util.http(e.SDK.gameManager.Config.serverURL.group,"GET",null,!1,e.SDK.gameManager.AccessToken);case 16:if(!(a=t.sent)){t.next=29;break}return a=a.other_group_id,t.next=21,e.SDK.joinGroup(a);case 21:if(t.sent!==MGOBE.ErrCode.EC_OK){t.next=29;break}return t.next=25,e.SDK.getTeammate();case 25:if(t.sent.commonNetworkState==T.Offline){t.next=29;break}return e.ChangeBoard(e.SDK.gameManager.WaitLoverBoard),t.abrupt("return");case 29:return t.next=31,e.SDK.createGroup();case 31:if(0!==t.sent){t.next=40;break}return t.next=35,e.SDK.getGroupInfo();case 35:i=t.sent,e.SDK.gameManager.Util.http(e.SDK.gameManager.Config.serverURL.group,"POST",{group_id:i.id},!1,e.SDK.gameManager.AccessToken),e.ChangeBoard(e.SDK.gameManager.WaitLoverBoard),t.next=41;break;case 40:e.ChangeBoard(e.SDK.gameManager.MainBoard);case 41:case"end":return t.stop()}}),t)}))),500)}},{key:"endActionNo",value:function(){this.board.getChildByName("dialog-end").active=!1,this.SDK.gameManager.Util.callTDGA(k.Guidance_pass_again),this.ChangeBoard(this.SDK.gameManager.TeachingBoard)}},{key:"nextState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.teachIndex+1;return P("教学流程","进入下一步",this.teachIndex),this.TeachState[t]?(this.TeachState[t](e),this.teachIndex=t,!0):(this.teachState=X.normal,this.teachStage=Z.end,this.board.getChildByName("dialog-end").active=!0,this.board.getChildByName("dialog-end").getChildByName("content").getChildByName("replay").on(p.TOUCH_END,this.endActionNo,this),this.board.getChildByName("dialog-end").getChildByName("content").getChildByName("next").on(p.TOUCH_END,this.endActionYes,this),!1)}},{key:"onTouchDown",value:function(e){switch(this.teachState){case X.try:this.Player._stat_power=!0,this.Player.jumpResult.time=0,this.Player.particleOpen(!0),this.SDK.gameManager.Util.playAudio(this.SDK.gameManager.audio_touch_down)}}},{key:"jumpEnd",value:(b=u(regeneratorRuntime.mark((function e(t){var a,i,n,r,o,s,h,c,u,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,a=t?this.OtherPlayer:this.Player,i=a.jumpResult.status,n=a.jumpResult.perfect,r=null,i!=O.next){e.next=32;break}if(o=new g,s=new g,h=new g,t){e.next=26;break}return a.nextBox.node.getPosition(s),a.nextBox.node.getPosition(h),h.y=0,this.curBoxIndex+=1,a.curBox=this.SDK.gameManager.map[this.curBoxIndex],this.SDK.gameManager.curBox=a.curBox,a.nextBox=this.SDK.gameManager.map[this.curBoxIndex+1],this.SDK.gameManager.nextBox=a.nextBox,n?this.perfectCount+=1:this.perfectCount=0,c=this.SDK.gameManager.Util.getScore(this.perfectCount),this.score+=c,e.next=23,this.SDK.gameManager.showScore(c,this.perfectCount);case 23:r=e.sent,e.next=29;break;case 26:this.enemyScore+=n?2:1,a.curBox=this.SDK.gameManager.map[this.OtherPlayer.index],a.nextBox=this.SDK.gameManager.map[this.OtherPlayer.index+1];case 29:a.nextBox?t||(u=new g,a.nextBox.node.getPosition(u),s.x=(s.x+u.x)/2,s.z=(s.z+u.z)/2,g.add(o,s,this.SDK.gameManager._origin_camera_pos),C(this.SDK.gameManager.camera.node).to(.5,{position:o},{}).start(),C(this.SDK.gameManager.plane).to(.5,{position:h},{}).start()):(this.teachMap.push([1,2.8,4,0,0,{x:0,y:0,z:0}]),this.SDK.gameManager.drawMap(this.teachMap)),e.next=33;break;case 32:t||(this.perfectCount=0);case 33:this.uiControl.refreshScore(this.score,this.enemyScore),t||(this.teachStage==Z.multiple?(this.jumpCount+=1,this.jumpCount>=4?this.nextState({jumpInfo:this.Player.jumpResult,scoreNode:r}):(this.isControler=!this.isControler,this.uiControl.changePlayer(this.isControler),this.uiControl.setTipAvatar(this.isControler),this.Player.setModel(this.isControler?1:2),this.isControler?this.teachState=X.try:(this.teachState=X.wait,setTimeout((function(){d.Player.AI=!0}),2e3)))):this.teachStage==Z.gaming?(this.isControler=!this.isControler,this.uiControl.changePlayer(this.isControler),this.uiControl.setTipAvatar(this.isControler),this.Player.setModel(this.isControler?1:2),this.isControler?this.teachState=X.try:(this.teachState=X.wait,setTimeout((function(){d.teachStage==Z.gaming&&(d.Player.AI=!0)}),2e3))):this.nextState({jumpInfo:this.Player.jumpResult,scoreNode:r}));case 35:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"onTouchUp",value:function(e){if(this.teachState==X.try&&this.Player._stat_power){this.Player._stat_power=!1,this.Player.function_getJumpInfo(),this.Player.modelBody.setScale(new g(1,1,1)),this.Player.modelHead.setPosition(this.Player.modelHeadPos),this.Player.modelTire&&this.Player.modelTire.setPosition(new g(0,0,0));var t=new g;this.Player.node.getPosition(t),t.y=this.Player.originPosY,this.Player.node.setPosition(t),this.Player.node.getPosition(this.Player.curPostion),this.Player.curBox.node.getComponent(_).startElastic(),this.Player.particleOpen(!1),this.Player._axis=this.Player.gameManager.Util.getJumpAxis(this.Player.node,this.Player.nextBox.node),this.Player.getFace(),this.Player._stat_jump=!0,this.teachState=X.normal}}},{key:"action_1",value:(D=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.SDK.gameManager,this.teachMap=[[1,2.5,4,0,0,{x:0,y:0,z:0}],[1,2.5,4,0,3,{x:0,y:0,z:0}]],e.next=5,this.SDK.gameManager.drawMap(this.teachMap,!0);case 5:return this.Player.curBox=this.SDK.gameManager.map[0],this.Player.nextBox=this.SDK.gameManager.map[1],e.next=9,t.Player.setModel(1);case 9:return e.next=11,t.OtherTeam.setModel(-1);case 11:t.Player.node.setPosition(new g(0,t.Player.originPosY,0)),this.Player.node.getPosition(this.Player.curPostion),this.jumpCount=0,this.perfectCount=0,this.uiControl.introduceBoxNode.active=!1,this.uiControl.introduceTitleNode.getComponent(y).string="先来一把单人跳一跳让我看看你的实力吧",this.uiControl.introduceBoxNode1.getChildByName("Label").getComponent(y).string="长按蓄力,松手控制向前跳",this.uiControl.introduceBoxNode1.active=!0,this.uiControl.touch.active=!0,this.uiControl.introduceTitleNode.active=!0,this.uiControl.interactionNode.active=!1,this.uiControl.headerNode.active=!1,this.uiControl.introduceBoxNode.getChildByName("again").active=!1,this.uiControl.introduceBoxNode.getChildByName("next").active=!1,this.uiControl.introduceBoxNode.getChildByName("next").getChildByName("Label").getComponent(y).string="下一步",this.uiControl.tipNode_tip.active=!1,this.uiControl.tipNode_wait.active=!1,this.SDK.gameManager.userTipNode.active=!1,this.isControler=!0,this.teachStage=Z.single,this.teachState=X.try;case 32:case"end":return e.stop()}}),e,this)}))),function(){return D.apply(this,arguments)})},{key:"action_2",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(this.uiControl.touch.active=!1,this.uiControl.introduceBoxNode1.active=!1,this.uiControl.introduceBoxNode.active=!1,this.teachState=X.normal,this.uiControl.introduceTitleNode.active=!1,this.board.getChildByName("mask").active=!0,this.uiControl.introduceBoxNode.getChildByName("next").getChildByName("arrow").active=!0,e.jumpInfo.status){case O.next:e.jumpInfo.perfect?this.uiControl.setIntroduce("","太棒了\n那相信双人的跳一跳\n你也没问题"):this.uiControl.setIntroduce("","你已经掌握跳一跳的精髓了\n那相信双人的跳一跳\n你也没问题");break;case O.dead:case O.current:this.uiControl.setIntroduce("","好遗憾\n有点担心双人的跳一跳\n对你来说会不会太难"),this.uiControl.introduceBoxNode.getChildByName("again").active=!0,this.uiControl.introduceBoxNode.getChildByName("next").getChildByName("arrow").active=!1,this.uiControl.introduceBoxNode.getChildByName("again").getChildByName("arrow").active=!0}this.uiControl.introduceBoxNode.active=!0,this.uiControl.introduceBoxNode.getChildByName("next").active=!0}},{key:"action_3",value:(B=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.uiControl.introduceBoxNode.active=!1,this.uiControl.introduceBoxNode.getChildByName("again").active=!1,this.uiControl.introduceBoxNode.getChildByName("next").active=!1,this.uiControl.interactionNode.active=!1,this.uiControl.headerNode.active=!1,this.uiControl.setIntroduce("","两个人共同控制棋子\n一人跳完后另一人再跳"),this.board.getChildByName("emojiTip").active=!0,this.teachStage=Z.multiple,this.uiControl.interactionNode.active=!0,this.uiControl.introduceBoxNode.active=!0,this.isControler=!1,this.uiControl.changePlayer(this.isControler),this.uiControl.setTipAvatar(this.isControler),this.uiControl.mask.node.active=!0;case 15:case"end":return e.stop()}}),e,this)}))),function(){return B.apply(this,arguments)})},{key:"action_4",value:function(){var e=this;this.uiControl.mask.node.active=!1,this.teachState=X.wait,setTimeout((function(){e.Player.AI=!0,setTimeout((function(){e.uiControl.setIntroduce("","头像和提示变更为“我“\n就是到你跳了"),e.board.getChildByName("emojiTip").active=!1}),1e3)}),2e3)}},{key:"action_5",value:function(){this.uiControl.introduceBoxNode.active=!1,this.uiControl.tipNode_tip.active=!1,this.uiControl.tipNode_wait.active=!1,this.uiControl.introduceBoxNode.getChildByName("next").getChildByName("Label").getComponent(y).string="接受挑战",this.uiControl.setIntroduce("","看来你已经适应了轮流跳了\n给你加个对手怎么样\n要加油超过他们呢"),this.board.getChildByName("mask").active=!0,this.uiControl.introduceBoxNode.active=!0,this.uiControl.introduceBoxNode.getChildByName("again").active=!1,this.uiControl.introduceBoxNode.getChildByName("again").getChildByName("arrow").active=!1,this.uiControl.introduceBoxNode.getChildByName("next").active=!0,this.uiControl.introduceBoxNode.getChildByName("next").getChildByName("arrow").active=!0}},{key:"action_6",value:(S=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.uiControl.introduceBoxNode.active=!1,this.uiControl.introduceTitleNode.active=!1,this.uiControl.headerNode.active=!0,this.board.getChildByName("mask").active=!1,this.score=0,this.time=20,this.perfectCount=0,this.curBoxIndex=0,this.isControler=!0,this.uiControl.setTime(this.time),this.uiControl.refreshScore(0,0),this.uiControl.changePlayer(this.isControler),this.uiControl.setTipAvatar(this.isControler),this.teachStage=Z.gaming,this.teachState=X.try,this.OtherPlayer.index=0,t=this.SDK.gameManager,this.teachMap=[[1,2.5,4,0,0,{x:0,y:0,z:0}],[1,2.5,4,0,3,{x:0,y:0,z:0}]],e.next=21,this.SDK.gameManager.drawMap(this.teachMap,!0);case 21:return this.Player.curBox=this.SDK.gameManager.map[0],this.Player.nextBox=this.SDK.gameManager.map[1],this.OtherPlayer.curBox=this.SDK.gameManager.map[0],this.OtherPlayer.nextBox=this.SDK.gameManager.map[1],e.next=27,t.Player.setModel(1);case 27:return e.next=29,t.OtherTeam.setModel(1);case 29:t.Player.node.setPosition(new g(.7,t.Player.originPosY,0)),t.OtherTeam.node.setPosition(new g(-.7,t.Player.originPosY,0)),this.Player.node.getPosition(this.Player.curPostion),this.SDK.gameManager.camera.node.setPosition(this.SDK.gameManager._origin_camera_pos),this.SDK.gameManager.plane.setPosition(new g(0,0,0));case 34:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"sendEmoji_1",value:(v=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getPlayerInfo();case 2:t=e.sent,this.uiControl.showEmoji(j.Angry,t.id),2==this.teachIndex&&this.nextState();case 5:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"sendEmoji_2",value:(f=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getPlayerInfo();case 2:t=e.sent,this.uiControl.showEmoji(j.Worship,t.id),2==this.teachIndex&&this.nextState();case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"sendEmoji_3",value:(d=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getPlayerInfo();case 2:t=e.sent,this.uiControl.showEmoji(j.Unfortunately,t.id),2==this.teachIndex&&this.nextState();case 5:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"sendEmoji_4",value:(a=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.getPlayerInfo();case 2:t=e.sent,this.uiControl.showEmoji(j.Applause,t.id),2==this.teachIndex&&this.nextState();case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})}]),t}(U)).prototype,"nextStateAction",[H],Object.getOwnPropertyDescriptor(q.prototype,"nextStateAction"),q.prototype),a(q.prototype,"againAction",[L],Object.getOwnPropertyDescriptor(q.prototype,"againAction"),q.prototype),a(q.prototype,"leave",[z],Object.getOwnPropertyDescriptor(q.prototype,"leave"),q.prototype),a(q.prototype,"endActionYes",[G],Object.getOwnPropertyDescriptor(q.prototype,"endActionYes"),q.prototype),a(q.prototype,"endActionNo",[F],Object.getOwnPropertyDescriptor(q.prototype,"endActionNo"),q.prototype),a(q.prototype,"sendEmoji_1",[Y],Object.getOwnPropertyDescriptor(q.prototype,"sendEmoji_1"),q.prototype),a(q.prototype,"sendEmoji_2",[J],Object.getOwnPropertyDescriptor(q.prototype,"sendEmoji_2"),q.prototype),a(q.prototype,"sendEmoji_3",[W],Object.getOwnPropertyDescriptor(q.prototype,"sendEmoji_3"),q.prototype),a(q.prototype,"sendEmoji_4",[V],Object.getOwnPropertyDescriptor(q.prototype,"sendEmoji_4"),q.prototype),q)),d._RF.pop()}}}));

System.register("chunks:///UI/toast.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var o,n,s,i,a,c,r,h,l,u,p,d,v,f;return t({_dec:void 0,_class:void 0}),{setters:[function(t){o=t.inherits,n=t.createClass,s=t.classCallCheck,i=t.possibleConstructorReturn,a=t.getPrototypeOf},function(t){c=t.cclegacy,r=t._decorator,h=t.Label,l=t.tween,u=t.Sprite,p=t.Component}],execute:function(){c._RF.push({},"33b70jRWeBFZqBft8IjVWL7","toast",void 0),f=r.ccclass,r.property,t("Toast",(d=f("Toast"),d(v=function(t){function e(){return s(this,e),i(this,a(e).apply(this,arguments))}return o(e,t),n(e,[{key:"start",value:function(){this.isShow=!1}},{key:"show",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;this.isShow||(this.node.active=!0,this.isShow=!0,this.node.getChildByName("Label").getComponent(h).string=t,l(this.node).to(e,{},{onComplete:this.onComplete.bind(this),onUpdate:this.onUpdate.bind(this)}).start())}},{key:"onComplete",value:function(){this.node.active=!1,this.isShow=!1}},{key:"onUpdate",value:function(t,e){this.node.getComponent(u).color.set(255,255,255,230*(1-e))}}]),e}(p))||v)),c._RF.pop()}}}));

System.register("chunks:///UI/loadingBar.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var s,i,r,o,a,n,h,c,u,l,p,d;return t({_dec:void 0,_class:void 0}),{setters:[function(t){s=t.inherits,i=t.createClass,r=t.classCallCheck,o=t.possibleConstructorReturn,a=t.getPrototypeOf},function(t){n=t.cclegacy,h=t._decorator,c=t.ProgressBar,u=t.Component}],execute:function(){n._RF.push({},"96263H2xxlKi5TOCG4Qi7hA","loadingBar",void 0),d=h.ccclass,h.property,t("LoadingBar",(l=d("LoadingBar"),l(p=function(t){function e(){return r(this,e),o(this,a(e).apply(this,arguments))}return s(e,t),i(e,[{key:"start",value:function(){this.bar=this.node.getComponent(c),this.bar.progress=0}},{key:"run",value:function(){this.time=0,this.rate=0,this.dt_rate=0,this.isComplete=!1,this.bar=this.node.getComponent(c),this.bar.progress=0}},{key:"complete",value:function(){this.isComplete=!0,this.dt_rate=100-this.rate}},{key:"update",value:function(t){this.time+=t,this.isComplete?(this.rate+=this.dt_rate*t,this.rate>=100&&(this.rate=100)):this.rate=90*(-1/(this.time/2+1)+1),this.bar.progress=this.rate/100}}]),e}(u))||p)),n._RF.pop()}}}));

System.register("chunks:///GameManager.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Box.js","./Config.js","./Const.js","./Player.js","./Util.js","./SDK.js","./UI/Dialog/Dialog.js","./UI/Board/WaitLoverBoard.js","./OtherPlayer.js","./UI/Board/GamingBoard.js","./UI/Board/MainBoard.js","./UI/Board/MatchingBoard.js","./UI/Board/ResultBoard.js","./UI/Board/TeachingBoard.js","./UI/toast.js","./UI/loadingBar.js"],(function(e,t){var r,n,i,a,o,s,u,l,c,h,d,m,p,g,f,v,y,x,_,b,P,B,w,k,D,S,C,T,R,K,I,N,U,M,z,G,j,O,L,A,W,E,J,F,V,q,H,Q,X,Z,Y,$,ee,te,re,ne,ie,ae,oe,se,ue,le,ce,he,de,me,pe,ge,fe,ve,ye,xe,_e,be,Pe,Be,we,ke,De,Se,Ce,Te,Re,Ke,Ie,Ne,Ue,Me,ze,Ge,je,Oe,Le,Ae,We,Ee,Je,Fe,Ve,qe,He,Qe,Xe,Ze;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_dec15:void 0,_dec16:void 0,_dec17:void 0,_dec18:void 0,_dec19:void 0,_dec20:void 0,_dec21:void 0,_dec22:void 0,_dec23:void 0,_dec24:void 0,_dec25:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_descriptor14:void 0,_descriptor15:void 0,_descriptor16:void 0,_descriptor17:void 0,_descriptor18:void 0,_descriptor19:void 0,_descriptor20:void 0,_descriptor21:void 0,_descriptor22:void 0,_descriptor23:void 0,_descriptor24:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inherits,i=e.classCallCheck,a=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.assertThisInitialized,u=e.initializerDefineProperty,l=e.createClass,c=e.asyncToGenerator},function(e){h=e.cclegacy,d=e._decorator,m=e.Node,p=e.Camera,g=e.Prefab,f=e.AudioClip,v=e.Texture2D,y=e.Vec3,x=e.tween,_=e.MeshRenderer,b=e.view,P=e.Component,B=e.instantiate,w=e.UITransform,k=e.Label,D=e.Color},function(e){S=e.Box},function(e){C=e.Config},function(e){T=e.log,R=e.ClientDataType,K=e.RoomDataType,I=e.BoxSize,N=e.TeamColor,U=e.DialogButtonType,M=e.NetState,z=e.ServerDataType,G=e.StatisticsKey,j=e.BoxShape},function(e){O=e.Player},function(e){L=e.Util},function(e){A=e.SDK},function(e){W=e.Dialog},function(e){E=e.WaitLoverBoard},function(e){J=e.OtherPlayer},function(e){F=e.GamingBoard},function(e){V=e.MainBoard},function(e){q=e.MatchingBoard},function(e){H=e.ResultBoard},function(e){Q=e.TeachingBoard},function(e){X=e.Toast},function(e){Z=e.LoadingBar}],execute:function(){h._RF.push({},"1a8f1+varZBzIr09OsNwJXt","GameManager",void 0),Qe=d.ccclass,Xe=d.property,Ze=function e(){i(this,e),this.switch_audio=!0},e("GameManager",(Y=Qe("GameManager"),$=Xe({type:O}),ee=Xe({type:J}),te=Xe({type:m}),re=Xe({type:m}),ne=Xe({type:p}),ie=Xe({type:m}),ae=Xe({type:X}),oe=Xe({type:g}),se=Xe({type:f}),ue=Xe({type:f}),le=Xe({type:f}),ce=Xe({type:f}),he=Xe({type:f}),de=Xe({type:f}),me=Xe({type:f}),pe=Xe({type:f}),ge=Xe({type:f}),fe=Xe({type:f}),ve=Xe({type:v}),ye=Xe({type:v}),xe=Xe({type:v}),_e=Xe({type:v}),be=Xe({type:m}),Pe=Xe({type:Z}),Y((ke=r((we=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(r=a(this,(e=o(t)).call.apply(e,[this].concat(l)))).SDK=new A,r.Setting=new Ze,r.Debug=null,r.Util=new L(r.SDK,s(r)),u(r,"Player",ke,s(r)),u(r,"OtherTeam",De,s(r)),u(r,"CenterNode",Se,s(r)),u(r,"plane",Ce,s(r)),u(r,"camera",Te,s(r)),u(r,"UI",Re,s(r)),u(r,"toast",Ke,s(r)),u(r,"rangeShowPrefab",Ie,s(r)),u(r,"audio_failed",Ne,s(r)),u(r,"audio_complete",Ue,s(r)),u(r,"audio_dead",Me,s(r)),u(r,"audio_perfect",ze,s(r)),u(r,"audio_last5s",Ge,s(r)),u(r,"audio_ready",je,s(r)),u(r,"audio_relife",Oe,s(r)),u(r,"audio_touch_down",Le,s(r)),u(r,"audio_win",Ae,s(r)),u(r,"audio_go",We,s(r)),u(r,"background_1",Ee,s(r)),u(r,"background_2",Je,s(r)),u(r,"background_3",Fe,s(r)),u(r,"background_4",Ve,s(r)),u(r,"userTipNode",qe,s(r)),u(r,"loadingBar",He,s(r)),r._origin_camera_pos=new y,r.map=[],r.curActionPlayer=null,r.scoreNodeList=[],r.curBox=null,r.nextBox=null,r.planeIndex=1,r._isControler=!1,r.startTime=0,r.gameTime=0,r.isTeached=!1,r._isRunning=!1,r.diaDead=!1,r.AccessToken=null,r.clearTime=0,r.teammaterIsLover=void 0,r.enemyIsLover=void 0,r.isReconnect=!1,r.isQuickMatching=!1,r.robotInfo={},r.BoxPrefab={f1:[null,null,null,null,null,null],f2:[null,null,null,null,null,null],f3:[null,null,null,null,null,null],f4:[null,null,null,null,null,null],f5:[null,null,null,null,null,null],y1:[null,null,null,null,null,null],y2:[null,null,null,null,null,null],y3:[null,null,null,null,null,null],y4:[null,null,null,null,null,null],y5:[null,null,null,null,null,null]},r.ChessPrefab=[null,null,null,null],r.ChessPrefabEnemy={red:null,blue:null},r}var r,h,d,p,g,f,v,P,O,J,X,Z,Y,$,ee,te,re;return n(t,e),l(t,[{key:"initPrefab",value:(re=c(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,u,l,c,h,d,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this.node.getParent(),this.MainBoard=new V(t,this.SDK),this.WaitLoverBoard=new E(t,this.SDK),this.MatchingBoard=new q(t,this.SDK),this.GamingBoard=new F(t,this.SDK),this.ResultBoard=new H(t,this.SDK),this.TeachingBoard=new Q(t,this.SDK),this.MainBoard.board=t.getChildByName("UI").getChildByName("board").getChildByName("MainBoard"),this.GamingBoard.board=t.getChildByName("UI").getChildByName("board").getChildByName("GamingBoard"),this.MatchingBoard.board=t.getChildByName("UI").getChildByName("board").getChildByName("MatchingBoard"),this.WaitLoverBoard.board=t.getChildByName("UI").getChildByName("board").getChildByName("WaitLoverBoard"),this.TeachingBoard.board=t.getChildByName("UI").getChildByName("board").getChildByName("TeachingBoard"),this.ResultBoard.board=t.getChildByName("UI").getChildByName("board").getChildByName("ResultBoard"),n=1;n<=5;n++)for(i=1;i<=6;i++)a="Model/Box/f"+n+"0"+i+"/f"+n+"0"+i,o="f"+n.toString(),this.Util.loadBoxPrefab(a,o,i-1);for(s=1;s<=5;s++)for(u=1;u<=6;u++)l="Model/Box/y"+s+"0"+u+"/y"+s+"0"+u,c="y"+s.toString(),this.Util.loadBoxPrefab(l,c,u-1);for(T("盒子预制件",this.BoxPrefab),h=["red_1","red_2","blue_1","blue_2"],d=0;d<h.length;d++)m="Model/qizi/"+h[d]+"/Node",this.Util.loadChessPrefab(m,d);return this.Util.loadEnemyChessPrefab("Model/qizi/enemy_blue/Node",N.blue),this.Util.loadEnemyChessPrefab("Model/qizi/enemy_red/Node",N.red),e.next=22,this.Util.loadPrefab("Prefab/UI/perfect");case 22:(r=e.sent)&&(this.PerfectPrefab=r);case 24:case"end":return e.stop()}}),e,this)}))),function(){return re.apply(this,arguments)})},{key:"initData",value:(te=c(regeneratorRuntime.mark((function e(t){var r,n,i,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SDK.init(t,this);case 2:if(r=e.sent,n=this.node.getParent(),!r){e.next=19;break}return T("初始化SDK成功",MGOBE.Player.id),e.next=8,this.SDK.inRunningRoom();case 8:if(!e.sent){e.next=15;break}return i=new W(n,this.SDK,"游戏仍在进行中,是否要进行重连?",U.multiple,"重连","不重连"),e.next=13,i.show(this,this.reconnection_yes,this.reconnection_no);case 13:e.next=17;break;case 15:this.loadingBar.complete(),setTimeout(c(regeneratorRuntime.mark((function e(){var t,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.Util.localGet("userContent")||!o.Util.localGet("userContent").group){e.next=28;break}return r=o.Util.localGet("userContent").group,e.next=4,o.SDK.getGroupInfo();case 4:if((i=(i=e.sent)||{id:"111"}).id==r){e.next=23;break}return e.next=9,o.SDK.leaveGroup();case 9:return e.next=11,o.SDK.joinGroup(r);case 11:if(e.sent!==MGOBE.ErrCode.EC_OK){e.next=19;break}return e.next=15,o.SDK.getTeammate();case 15:e.sent.commonNetworkState!=M.Offline?(t=o.WaitLoverBoard,(a=o.Util.localGet("userContent")).group="",o.Util.localSet("userContent",a)):(t=o.MainBoard,o.showToast("游戏邀请已失效，请重新邀请",2)),e.next=21;break;case 19:t=o.MainBoard,o.showToast("游戏邀请已失效，请重新邀请",2);case 21:e.next=26;break;case 23:o.SDK.Listener.add(o.SDK.curGroup),o.SDK.curGroup.initGroup(i),t=o.WaitLoverBoard;case 26:e.next=29;break;case 28:t=o.MainBoard;case 29:return e.next=31,t.ChangeBoard(t);case 31:n.getChildByName("UI").getChildByName("loading").active=!1;case 32:case"end":return e.stop()}}),e)}))),1e3);case 17:e.next=22;break;case 19:return a=new W(n,this.SDK,"登录失败,请重新开启游戏",U.single,"知道了"),e.next=22,a.show(this,(function(){o.SDK.curDialog.dead||(o.SDK.curDialog.destroy(),window.RunNative("exitMiniGame",{},"",""))}));case 22:case"end":return e.stop()}}),e,this)}))),function(e){return te.apply(this,arguments)})},{key:"reconnection_yes",value:(ee=c(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.diaDead){e.next=2;break}return e.abrupt("return");case 2:return this.diaDead=!0,this.SDK.curDialog.destroy(),e.next=7,this.SDK.reconnect();case 7:return e.next=9,this.SDK.getRoomInfo();case 9:return t=e.sent,e.next=12,this.SDK.getPlayerInfo();case 12:if(r=e.sent,!t){e.next=42;break}i=t.playerList,a=0;case 16:if(!(a<i.length)){e.next=24;break}if((o=i[a]).id!=r.id){e.next=21;break}return n=o.teamId,e.abrupt("break",24);case 21:a++,e.next=16;break;case 24:return this.SDK.curRoom.onRecvFromGameSvr=this.onRecvFromGameSvr.bind(this),e.next=27,this.SDK.sendToServer(R.Reconnect,n);case 27:if(e.sent==MGOBE.ErrCode.EC_OK){e.next=40;break}return e.next=32,this.SDK.leaveGroup();case 32:return e.next=34,this.SDK.leaveRoom();case 34:return e.next=36,this.SDK.cancelMatchinig();case 36:return s=this.node.getParent(),u=new W(s,this.SDK,"房间已关闭,无法重连",U.single,"回到首页"),e.next=40,u.show(this,this.backMainBoard);case 40:e.next=43;break;case 42:case 43:case"end":return e.stop()}}),e,this)}))),function(){return ee.apply(this,arguments)})},{key:"reconnection_no",value:($=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.SDK.curDialog.dead){e.next=2;break}return e.abrupt("return");case 2:return this.node.getParent(),e.next=6,this.SDK.leaveGroup();case 6:return e.next=8,this.SDK.leaveRoom();case 8:return e.next=10,this.SDK.cancelMatchinig();case 10:return this.SDK.curDialog.destroy(),e.next=14,this.MainBoard.ChangeBoard(this.MainBoard);case 14:case"end":return e.stop()}}),e,this)}))),function(){return $.apply(this,arguments)})},{key:"onRecvFromGameSvr",value:(Y=c(regeneratorRuntime.mark((function e(t){var r,n,i,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T("接收到实时服务器的数据:",t.data),r=this.node.getParent(),n=t.data.data,(i=n.type)!=z.Reconnect){e.next=17;break}return this.isReconnect=!0,this.SDK.curRoom.onRecvFromGameSvr=null,e.next=9,this.reconnectSyncData(n.data);case 9:return this.isRunning=!0,e.next=12,this.GamingBoard.ChangeBoard(this.GamingBoard);case 12:this.SDK.sendToServer(R.ReconnectComplete,this.serverTeam.id),this.SDK.sendToServer(R.ChangeControler),this.changeControler(this.curActionPlayer),e.next=28;break;case 17:if(i!=z.ReconnectFailed){e.next=28;break}return e.next=21,this.SDK.leaveGroup();case 21:return e.next=23,this.SDK.leaveRoom();case 23:return e.next=25,this.SDK.cancelMatchinig();case 25:return a=new W(r,this.SDK,"游戏已结束",U.single,"知道了"),e.next=28,a.show(this,(function(){o.SDK.curDialog.dead||(o.MainBoard.ChangeBoard(o.MainBoard),o.SDK.curDialog.destroy())}));case 28:case"end":return e.stop()}}),e,this)}))),function(e){return Y.apply(this,arguments)})},{key:"backMainBoard",value:(Z=c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.SDK.curDialog.dead){e.next=2;break}return e.abrupt("return");case 2:return this.SDK.curDialog.destroy(),t=this.MainBoard,e.next=6,t.ChangeBoard(t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return Z.apply(this,arguments)})},{key:"onLoad",value:function(){this.Config=new C}},{key:"start",value:(X=c(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Player.gameManager=this,this.OtherTeam.gameManager=this,this.camera.node.getPosition(this._origin_camera_pos),this.loadingBar.run(),t=window.location.search,r=this.Util.localGet("userContent")?this.Util.localGet("userContent").appToken:"",n=null,this.AccessToken=r,"dev"==this.Config.env&&(n=this.Util.getPara("user_id",t)),this.registerEvent(),this.Player.onJumpComplete=this.onJumpComplete.bind(this),this.Player.onJumpDead=this.onJumpDead.bind(this),this.Player.onPowerDown=this.onPowerDown.bind(this),this.Player.onPowerUp=this.onPowerUp.bind(this),this.schedule(this.timerSingalAction.bind(this),.2),e.next=17,this.initPrefab();case 17:return this.node.parent.getChildByName("UI").getChildByName("Debug").destroy(),e.next=20,this.login(n);case 20:this.Util.callTDGA(G.login,this.PlayerData);case 21:case"end":return e.stop()}}),e,this)}))),function(){return X.apply(this,arguments)})},{key:"login",value:(J=c(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,u,l,c,h,d,m,p,g=this,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:null,r={nickname:"",avatar_url:"",user_id:0,lover_id:0,gender:0,totalCount:0,playCountWeek:0,winCountWeek:0,mvpCountWeek:0,loverCount:0,loverWinCount:0,tacitScore:0,isVip:!1},!t){e.next=19;break}return r.nickname=t,r.avatar_url="",r.user_id=t,r.lover_id=0,r.gender=1,r.playCountWeek=0,r.mvpCountWeek=0,r.winCountWeek=0,r.loverCount=0,r.loverWinCount=0,r.tacitScore=0,r.isVip=!1,this.PlayerData=r,this.initData(t),T("登录完成","user_id","玩家数据:",this.PlayerData),e.abrupt("return");case 19:if(!this.AccessToken){e.next=72;break}return e.next=22,this.Util.http(this.Config.serverURL.gameInit,"GET",{},!1,this.AccessToken);case 22:return n=e.sent,e.next=25,this.Util.http(this.Config.serverURL.accountInit,"GET",{},!1,this.AccessToken);case 25:return i=e.sent,e.next=28,this.Util.http(this.Config.serverURL.loverInfo,"GET",{},!1,this.AccessToken);case 28:return a=e.sent,e.next=31,this.Util.http(this.Config.serverURL.vipInfo,"GET",{},!1,this.AccessToken);case 31:if(o=e.sent,!n||!i.kiwi_user_info){e.next=66;break}return s=i.kiwi_user_info,u=n,s&&1===s.gender?(this.loverData=a.lover_info.female_user_info,this.loverData.avatar=a.lover_info.female_user_info.avatar_info?a.lover_info.female_user_info.avatar_info:{host:"didi-static.oss-cn-hangzhou.aliyuncs.com",path:"/kitty/girl.jpg"}):(this.loverData=a.lover_info.male_user_info,this.loverData.avatar=a.lover_info.male_user_info.avatar_info?a.lover_info.male_user_info.avatar_info:{host:"didi-static.oss-cn-hangzhou.aliyuncs.com",path:"/kitty/boy.jpg"}),r.nickname=s.nickname?s.nickname:s.id.toString(),r.avatar_url=s.avatar_info?"https://"+s.avatar_info.host+"/"+s.avatar_info.path:"",r.user_id=s.id,r.lover_id=s.lovers_id,r.gender=s.gender,r.totalCount=u.user_match_info.total_game_match?u.user_match_info.total_game_match:0,r.playCountWeek=u.user_match_info.game_match_count?u.user_match_info.game_match_count:0,r.mvpCountWeek=u.user_match_info.mvp_count?u.user_match_info.mvp_count:0,r.winCountWeek=u.user_match_info.win_count?u.user_match_info.win_count:0,r.loverCount=u.lover_match_info.game_match_count?u.lover_match_info.game_match_count:0,r.loverWinCount=u.lover_match_info.win_count?u.lover_match_info.win_count:0,r.tacitScore=u.lover_match_info.tacit_score?u.lover_match_info.tacit_score:0,e.next=53,this.Util.loadRemoteImg(r.avatar_url,null);case 53:return l=e.sent,e.next=56,this.Util.loadRemoteImg("https://".concat(this.loverData.avatar.host,"/").concat(this.loverData.avatar.path),null);case 56:return c=e.sent,l||(1===r.gender&&(r.avatar_url="https://didi-static.oss-cn-hangzhou.aliyuncs.com/kitty/boy.jpg"),2===r.gender&&(r.avatar_url="https://didi-static.oss-cn-hangzhou.aliyuncs.com/kitty/girl.jpg")),c||(1===this.loverData.gender&&(this.loverData.avatar={host:"didi-static.oss-cn-hangzhou.aliyuncs.com",path:"/kitty/boy.jpg"}),2===this.loverData.gender&&(this.loverData.avatar={host:"didi-static.oss-cn-hangzhou.aliyuncs.com",path:"/kitty/girl.jpg"})),this.PlayerData=r,this.PlayerData.isVip=!!o&&1e3*o.vip_info.end_date_at>(new Date).getTime(),this.initData(this.PlayerData.user_id),T("登录完成","token","玩家数据:",this.PlayerData),e.abrupt("return");case 66:return h=this.node.getParent(),d=new W(h,this.SDK,"登录失败,未获取到玩家信息",U.single,"知道了"),e.next=70,d.show(this,(function(){g.SDK.curDialog.dead||g.SDK.curDialog.destroy()}));case 70:e.next=76;break;case 72:return m=this.node.getParent(),p=new W(m,this.SDK,"登录失败,无登录数据",U.single,"知道了"),e.next=76,p.show(this,(function(){g.SDK.curDialog.dead||g.SDK.curDialog.destroy()}));case 76:case"end":return e.stop()}}),e,this)}))),function(){return J.apply(this,arguments)})},{key:"registerEvent",value:function(){this.node.on("GameInit",this.gameInit,this),this.node.on("SyncData",this.syncGameData,this)}},{key:"gameInit",value:(O=c(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Player.AI=!1,this.isReconnect=!1,r=t.map,n=t.gameState,this.CenterNode.setParent(this.node.getParent()),this.camera.node.setPosition(this._origin_camera_pos),this.plane.setPosition(new y(0,0,0)),e.next=12,this.drawMap(r,!0);case 12:return e.next=14,this.syncGameData(n.teamList,!0);case 14:return this.Player.initPlayer(),this.OtherTeam.initPlayer(),e.next=18,this.SDK.getPlayerInfo();case 18:return i=e.sent,e.next=21,this.SDK.getPlayerIndex();case 21:return o=e.sent,a=this.Util.isControler(n.curActionPlayer,i)?o:1==o?2:1,this.serverPlayer.teamId==N.red?(s=1,u=N.blue):(s=3,u=N.red),s+=a-1,e.next=27,this.Player.setModel(s);case 27:return e.next=29,this.OtherTeam.setModel(u);case 29:return e.next=31,this.Player.setTire(this.PlayerData.isVip?1:0);case 31:return e.next=33,this.Util.enemyIsVip();case 33:return l=e.sent,e.next=36,this.OtherTeam.setTire(l?1:0);case 36:return this.OtherTeam.map=this.map,this.OtherTeam.index=0,this.Player.curBox=this.map[0],this.Player.nextBox=this.map[1],this.OtherTeam.curBox=this.map[0],this.OtherTeam.nextBox=this.map[1],this.curActionPlayer=n.curActionPlayer,e.next=45,this.SDK.sendToServer(R.Ready,{avatar:this.PlayerData.avatar_url,user_id:this.PlayerData.user_id,gender:this.PlayerData.gender,lover_id:this.PlayerData.lover_id});case 45:e.sent,this.SDK.errorCode.EC_OK;case 47:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"reconnectSyncData",value:(P=c(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"dev"==this.Config.env?this.gameTime=this.Config.DebugGameTime>0?this.Config.DebugGameTime:t.gameTime:this.gameTime=t.gameTime,this.startTime=t.startTime,e.next=5,this.drawMap(t.map,!0);case 5:return e.next=7,this.syncGameData(t.gameState.teamList,!0);case 7:return e.next=9,this.SDK.getGroupInfo();case 9:return(r=e.sent)&&(this.SDK.Listener.add(this.SDK.curGroup),this.SDK.curGroup.initGroup(r)),e.next=13,this.SDK.getPlayerInfo();case 13:return n=e.sent,e.next=16,this.SDK.getPlayerIndex();case 16:return a=e.sent,i=this.Util.isControler(t.gameState.curActionPlayer,n)?a:1==a?2:1,this.serverPlayer.teamId==N.red?(o=1,s=N.blue):(o=3,s=N.red),o+=i-1,e.next=22,this.Player.setModel(o);case 22:return e.next=24,this.OtherTeam.setModel(s);case 24:if(!this.PlayerData.isVip){e.next=27;break}return e.next=27,this.Player.setTire(1);case 27:return e.next=29,this.Util.enemyIsVip();case 29:if(!e.sent){e.next=33;break}return e.next=33,this.OtherTeam.setTire(1);case 33:this.Player.reset(this.serverTeam),this.OtherTeam.reset(),this.curActionPlayer=t.gameState.curActionPlayer;case 36:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"syncData",value:(v=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncGameData(t);case 2:return this.uiRefresh(),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"changeControler",value:(f=c(regeneratorRuntime.mark((function e(t){var r,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.SDK.getPlayerInfo();case 3:r=e.sent,n=this.Util.isControler(t,r),setTimeout(c(regeneratorRuntime.mark((function e(){var t,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="xxx",e.next=3,i.SDK.getPlayerIndex();case 3:if(a=e.sent,!n){e.next=8;break}t=a,e.next=12;break;case 8:return t=1==a?2:1,e.next=11,i.Util.getTeammaterAvatar();case 11:r=e.sent;case 12:return o=i.serverPlayer.teamId==N.red?1:3,o+=t-1,e.next=16,i.Player.setModel(o);case 16:i.isControler=n,i.uiRefresh(),i.avatarSingal(n,!0),i.isRunning&&(r&&"xxx"!=r?i.Util.loadRemoteImg(r,i.userTipNode.getChildByName("avatar")):i.Util.loadImg("Texture/UI/gaming/me-001/spriteFrame",i.userTipNode.getChildByName("avatar")),i.userTipNode.active=!0);case 20:case"end":return e.stop()}}),e)}))),1);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"syncMap",value:(g=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.drawMap(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"onJumpComplete",value:function(e,t){if("GamingBoard"==this.SDK.curBoard.name){if(this.isControler=!1,this.Player.jumpResult.perfect?this.serverTeam.perfectJump+=1:this.serverTeam.perfectJump=0,this.avatarSingal(!1,!1),e){T("跳跃完成","完美跳跃次数:",this.serverTeam.perfectJump);var r=this.Util.getScore(this.serverTeam.perfectJump);this.showScore(r,this.serverTeam.perfectJump);var n=new y,i=new y,a=new y;if(this.nextBox.node.getPosition(i),this.nextBox.node.getPosition(a),a.y=0,t&&(this.serverPlayer.score+=r),this.serverTeam.cur_cube+=1,this.serverTeam.pos=this.Player.jumpResult.offset,T("跳跃完成","最新的下标:",this.serverTeam.cur_cube),T("跳跃完成","地图长度:",this.map.length),this.serverTeam.cur_cube%10==0&&this.changePlane(),this.Player.curBox=this.map[this.serverTeam.cur_cube],this.Player.nextBox=this.map[this.serverTeam.cur_cube+1],this.curBox=this.Player.curBox,this.nextBox=this.Player.nextBox,this.updateCenterNode(this.serverTeam.perfectJump>0),this.nextBox){var o=new y;this.nextBox.node.getPosition(o),i.x=(i.x+o.x)/2,i.z=(i.z+o.z)/2,y.add(n,i,this._origin_camera_pos),x(this.camera.node).to(.5,{position:n},{}).start(),x(this.plane).to(.5,{position:a},{}).start()}}else this.updateCenterNode(!1),this.serverTeam.pos=this.Player.jumpResult.offset;t?this.SDK.sendToServer(R.JumpComplete,{team:this.serverTeam}):this.SDK.sendToServer(R.RequestSyncData,{team:this.SDK.gameManager.serverTeam})}else"TeachingBoard"==this.SDK.curBoard.name&&this.teachJumpSingal(!1)}},{key:"onJumpDead",value:function(){this.serverTeam?(this.serverTeam.perfectJump=0,this.updateCenterNode(!1),this.avatarSingal(!1,!1),this.isControler?this.SDK.sendToServer(R.JumpComplete,{team:this.serverTeam}):this.SDK.sendToServer(R.RequestSyncData,{team:this.serverTeam}),this.isControler=!1):"TeachingBoard"==this.SDK.curBoard.name&&this.teachJumpSingal(!1)}},{key:"onPowerDown",value:function(){this.SDK.sendToRoom(K.Power,1),this.avatarSingal(!0,!1)}},{key:"onPowerUp",value:function(){var e={distance:this.Player.jumpResult.distance,pos:this.Player.jumpResult.offset,status:this.Player.jumpResult.status,time:this.Player.jumpResult.time,index:this.serverTeam.cur_cube,perfect:this.Player.jumpResult.perfect};this.SDK.sendToRoom(K.PowerEnd,e),this.SDK.sendToRoom(K.EnemyPowerEnd,e)}},{key:"timerSingalAction",value:function(){this.timerSingal&&this.timerSingal()}},{key:"drawMap",value:(p=c(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,u,l,c,h,d,m,p,g,f,v,_,b,P,B=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(B.length>1&&void 0!==B[1]&&B[1])){e.next=26;break}if(this.map.length>0){for(r=0;r<this.map.length;r++)(n=this.map[r].node)&&n.destroy();this.map=[]}return e.next=5,this.createBox(t[0]);case 5:i=e.sent,a={node:i,size:t[0][2],shape:t[0][3],index:t[0][4],centerPos:t[0][5]},this.map.push(a),o=null,s=a,u=1;case 11:if(!(u<t.length)){e.next=22;break}return l=t[u],e.next=15,this.createBox(l,s);case 15:o=e.sent,c={node:o,size:l[2],shape:l[3],index:l[4],centerPos:l[5]},this.map.push(c),s=c;case 19:u++,e.next=11;break;case 22:this.nextBox=this.map[1],this.curBox=this.map[0],e.next=45;break;case 26:if(!(t.length>this.map.length)){e.next=45;break}h=t.length-this.map.length>1,T("绘制地图","检测到有新的地图数据",this.map.length,"--\x3e",t.length),d=this.map[this.map.length-1],m=null,p=this.map.length;case 32:if(!(p<t.length)){e.next=45;break}return g=t[p],e.next=37,this.createBox(g,d,!h);case 37:m=e.sent,f={node:m,size:g[2],shape:g[3],index:g[4],centerPos:g[5]},this.map.push(f),d=f,p==t.length-1&&(this.OtherTeam.nextBox||(this.OtherTeam.nextBox=this.map[this.OtherTeam.index+1]),this.nextBox||(this.nextBox=f,this.Player.nextBox=f,this.Player.reset(),v=new y,_=new y,this.curBox.node.getPosition(v),b=new y,P=new y,this.nextBox.node.getPosition(b),this.nextBox.node.getPosition(P),P.y=0,v.x=(v.x+b.x)/2,v.z=(v.z+b.z)/2,y.add(_,v,this._origin_camera_pos),x(this.camera.node).to(.5,{position:_}).start(),x(this.plane).to(.5,{position:P},{}).start()));case 42:p++,e.next=32;break;case 45:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"syncGameData",value:(d=c(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,u,l,c,h,d,m,p,g,f,v,x,_,b,P,B=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=B.length>1&&void 0!==B[1]&&B[1],e.next=3,this.SDK.getPlayerInfo();case 3:if(n=e.sent,i=null,a=null,o="",s="",u=null,r?u=t:(u=t.data,o=t.teamId,s=t.senderId),l=n.teamId==o,c=n.id==s,n.teamId==N.red?(i=u[0],a=u[1]):(i=u[1],a=u[0]),!r){e.next=30;break}this.serverTeam=i,this.otherTeam=a,h=0;case 18:if(!(h<i.playerList.length)){e.next=26;break}if((d=i.playerList[h]).id!=n.id){e.next=23;break}return this.serverPlayer=d,e.abrupt("break",26);case 23:h++,e.next=18;break;case 26:for(m=0;m<a.playerList.length;m++)(p=a.playerList[m]).isRobot&&(g={nickname:p.name,avatar_url:p.avatar,user_id:p.user_id,lover_id:p.lover_id,gender:p.gender,playCountWeek:0,winCountWeek:0,mvpCountWeek:0,loverCount:0,loverWinCount:0,tacitScore:0,isVip:p.isVip},f={id:p.id,isRobot:!0,profile:JSON.stringify(g),teamId:p.teamId},this.robotInfo[p.id]=f);T("重连设置robot信息",this.robotInfo),e.next=44;break;case 30:if(!l||!c){e.next=43;break}this.serverTeam=i,v=0;case 33:if(!(v<i.playerList.length)){e.next=41;break}if((x=i.playerList[v]).id!=n.id){e.next=38;break}return this.serverPlayer=x,e.abrupt("break",41);case 38:v++,e.next=33;break;case 41:e.next=44;break;case 43:this.otherTeam=a;case 44:r?(this.OtherTeam.map=this.map,this.curBox=this.map[i.cur_cube],this.nextBox=this.map[i.cur_cube+1],this.Player.curBox=this.curBox,this.Player.nextBox=this.nextBox,this.OtherTeam.curBox=this.map[a.cur_cube],this.OtherTeam.nextBox=this.map[a.cur_cube+1],_=new y,b=new y,P=new y,this.curBox.node.getPosition(_),this.curBox.node.getPosition(P),P.y=0,y.add(b,_,this._origin_camera_pos),b.y=this._origin_camera_pos.y,this.camera.node.setPosition(b),this.plane.setPosition(P)):l&&c&&(this.SDK.sendToServer(R.SyncComplete,this.serverTeam.id),T("同步游戏数据","当前Map长度:",this.map.length),T("同步游戏数据","当前位置下标:",this.serverTeam.cur_cube),this.curBox=this.map[this.serverTeam.cur_cube],this.nextBox=this.map[this.serverTeam.cur_cube+1],this.Player.curBox=this.curBox,this.Player.nextBox=this.nextBox,this.curBox&&this.Player.reset(this.serverTeam)),T("同步游戏数据","完成","ServerPlayer:",this.serverPlayer,"ServerTeam:",this.serverTeam);case 46:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"createBox",value:(h=c(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,u,l,c,h,d,m,p,g,f,v,x=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=x.length>0&&void 0!==x[0]?x[0]:null,r=x.length>1&&void 0!==x[1]?x[1]:null,n=x.length>2&&void 0!==x[2]&&x[2],i=new y,a=new y,o=t[0],s=t[1],u=t[2],l=t[3],c="",c=l==j.circle?"y":"f",c+=(u+1).toString(),(h=this.BoxPrefab[c][t[4]])||(h=this.BoxPrefab[c][0]),d=B(h),m=d.getChildByName("RootNode"),p=0;p<m.children.length;p++)g=m.children[p],(f=g.getComponent(_))&&(f.shadowCastingMode=1);if(v=d.addComponent(S),!r){e.next=34;break}if(r.node.getPosition(i),(a=i.clone()).y=0,s+=(I[r.size]+I[u])/2,1==o?a.z-=s:a.x+=s,n?d.setPosition(new y(a.x,7,a.z)):d.setPosition(new y(a.x,0,a.z)),d.setParent(this.Player.node.parent),!n){e.next=31;break}return v.startFall(),e.abrupt("return",d);case 31:return e.abrupt("return",d);case 32:e.next=37;break;case 34:return d.setPosition(new y(0,0,0)),d.setParent(this.Player.node.parent),e.abrupt("return",d);case 37:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"clearMap",value:function(){var e=(this.serverTeam.cur_cube>this.otherTeam.cur_cube?this.otherTeam.cur_cube:this.serverTeam.cur_cube)-4;if(e>0)for(var t=e;t>=0;t--){var r=this.map[t];if(!r.node)break;T("地图定时清除",t,r.node),r.node.destroy(),r.node=null}}},{key:"showToast",value:function(e,t){this.toast.show(e,t)}},{key:"changePlane",value:function(){var e=this.plane.getComponent(_).material;this.planeIndex+=1,this.planeIndex>4&&(this.planeIndex=1);var t,r=this.planeIndex%2==0;switch(this.planeIndex){case 1:t=this.background_2;break;case 2:t=this.background_3;break;case 3:t=this.background_4;break;case 4:t=this.background_1;break;default:return}x(this.plane).to(2,{},{onComplete:function(){r?e.setProperty("Texture1",t):e.setProperty("Texture2",t)},onUpdate:function(t,n){e.passes[0].setUniform(e.passes[0].getHandle("rate"),r?n:1-n)}}).start()}},{key:"showScore",value:(r=c(regeneratorRuntime.mark((function e(t,r){var n,i=this,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:1,e.abrupt("return",new Promise(function(){var e=c(regeneratorRuntime.mark((function e(a){var o,s,u,l,c,h,d,p,g,f,v,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.node.parent.getChildByName("UI"),s=new m,l=new y,i.Player.node.getPosition(l),l.y+=1,c=new y,i.camera.convertToUINode(l,o,c),h=s.addComponent(w),d=s.addComponent(k),h.setContentSize(35,25),d.string="+"+t,d.fontSize=20,d.color=new D(102,102,102),s.setPosition(c),s.setParent(o),s.active=!0,!(r>0)){e.next=39;break}if(i.Player.quan.startAnimation(),(u=B(i.PerfectPrefab)).active=!1,p=u.getChildByName("number_1"),g=u.getChildByName("number_2"),!(r<10)){e.next=27;break}return e.next=25,i.Util.loadImg("Texture/number/"+r+"/spriteFrame",p);case 25:e.next=34;break;case 27:return f=Math.floor(r/10),v=r%10,e.next=31,i.Util.loadImg("Texture/number/"+f+"/spriteFrame",p);case 31:return e.next=33,i.Util.loadImg("Texture/number/"+v+"/spriteFrame",g);case 33:g.active=!0;case 34:c.y+=1.5,u.setPosition(c),u.setParent(o),u.setSiblingIndex(0),u.active=!0;case 39:x={node:s,perfect:u,owner:i.Player.node,time:0,speed:n},i.scoreNodeList.push(x),a(x);case 42:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"updateCenterNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.CenterNode.active=!1,void this.CenterNode.setParent(this.node.getParent());if(!this.nextBox)return this.CenterNode.active=!1,void this.CenterNode.setParent(this.node.getParent());this.CenterNode.setParent(this.nextBox.node);var t=I[this.nextBox.size]/10;this.CenterNode.setScale(new y(t,.001,t)),this.CenterNode.active=!0}},{key:"updateScoreNode",value:function(e){for(var t=new y,r=new y,n=new y,i=new y,a=this.node.parent.getChildByName("UI"),o=this.scoreNodeList.length-1;o>=0;o--){var s=this.scoreNodeList[o];s.owner.getPosition(t),t.y+=s.time*s.speed+4,this.camera.convertToUINode(t,a,r),s.node.setPosition(r),null!=s.perfect&&(s.owner.getPosition(n),n.y+=3.5,this.camera.convertToUINode(n,a,n),s.perfect.setPosition(n)),s.time+=e,s.time>1&&(s.node.destroy(),s.perfect&&s.perfect.destroy(),this.scoreNodeList.splice(o,1))}if(this.isRunning||this.SDK.curBoard&&"TeachingBoard"==this.SDK.curBoard.name)(t=this.Player.node.getPosition()).y+=2.2,this.camera.convertToUINode(t,a,i),this.userTipNode.setPosition(i);else if(this.SDK.curBoard&&"TeachingBoard"!=this.SDK.curBoard.name){this.userTipNode.active=!1;var u=this.node.getParent().getChildByName("UI");u.getChildByName("enemy1").active=!1,u.getChildByName("enemy2").active=!1}}},{key:"updateEnemyPosition",value:function(){var e=this.node.getParent().getChildByName("UI"),t=this.OtherTeam.node.getPosition(),r=b.getFrameSize();e.getChildByName("enemy1").active=!1,e.getChildByName("enemy2").active=!1,this.camera.convertToUINode(t,this.node.getParent().getChildByName("UI"),t),(Math.abs(t.x)>r.width/2||Math.abs(t.y)>r.height/2)&&(t.x<0&&t.y>0&&(e.getChildByName("enemy1").active=!0),t.x>0&&t.y>0&&(e.getChildByName("enemy2").active=!0))}},{key:"update",value:function(e){this.updateScoreNode(e),this.isRunning&&(this.updateEnemyPosition(),this.clearTime+=e,this.clearTime>=60&&(this.clearTime=0,this.clearMap()))}},{key:"isControler",set:function(e){this._isControler=e,this.Player.control=e},get:function(){return this._isControler}},{key:"isRunning",set:function(e){this._isRunning=e,this.Player.isRunning=e,this.OtherTeam.isRunning=e},get:function(){return this._isRunning}}]),t}(P)).prototype,"Player",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=r(we.prototype,"OtherTeam",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=r(we.prototype,"CenterNode",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=r(we.prototype,"plane",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=r(we.prototype,"camera",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=r(we.prototype,"UI",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=r(we.prototype,"toast",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=r(we.prototype,"rangeShowPrefab",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=r(we.prototype,"audio_failed",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=r(we.prototype,"audio_complete",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=r(we.prototype,"audio_dead",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=r(we.prototype,"audio_perfect",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=r(we.prototype,"audio_last5s",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=r(we.prototype,"audio_ready",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=r(we.prototype,"audio_relife",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=r(we.prototype,"audio_touch_down",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=r(we.prototype,"audio_win",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=r(we.prototype,"audio_go",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=r(we.prototype,"background_1",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=r(we.prototype,"background_2",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=r(we.prototype,"background_3",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=r(we.prototype,"background_4",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=r(we.prototype,"userTipNode",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=r(we.prototype,"loadingBar",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=we))||Be)),h._RF.pop()}}}));

System.register("chunks:///Interface.js",["cc"],(function(e,c){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"894b2eWkr1IfbbtaCcBLs2k","Interface",void 0),t._RF.pop()}}}));

System.register("chunks:///UI/loading.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(i,t){var e,n,r,s,o,_,u,g,c,a,h,d,p,l,b,y,x,v,f,m,B,w,C,z,j,P,k,S,J,L,D,I,R,F;return i({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_temp:void 0}),{setters:[function(i){e=i.applyDecoratedDescriptor,n=i.inherits,r=i.classCallCheck,s=i.possibleConstructorReturn,o=i.getPrototypeOf,_=i.initializerDefineProperty,u=i.assertThisInitialized,g=i.createClass},function(i){c=i.cclegacy,a=i._decorator,h=i.Node,d=i.Sprite,p=i.view,l=i.UITransform,b=i.tween,y=i.Vec3,x=i.Component}],execute:function(){c._RF.push({},"ed3e4x24cBJ5ZYW/Ka+YLCJ","loading",void 0),R=a.ccclass,F=a.property,i("Loading",(v=R("Loading"),f=F({type:h}),m=F({type:h}),B=F({type:h}),w=F({type:d}),C=F({type:h}),z=F({type:h}),v((k=e((P=function(i){function t(){var i,e;r(this,t);for(var n=arguments.length,g=new Array(n),c=0;c<n;c++)g[c]=arguments[c];return e=s(this,(i=o(t)).call.apply(i,[this].concat(g))),_(e,"ndBg1_1",k,u(e)),_(e,"ndBg1_2",S,u(e)),_(e,"ndBg3",J,u(e)),_(e,"spBg3",L,u(e)),_(e,"ndC1",D,u(e)),_(e,"ndC2",I,u(e)),e.bg1_speed=50,e.bg3_speed=-20,e.win_size=p.getVisibleSize(),e.jump1_duration=1,e.jump2_duration=1.66,e}return n(t,i),g(t,[{key:"onLoad",value:function(){this.ndBg1_2.getComponent(l).setContentSize(this.ndBg1_1.getComponent(l).contentSize),this.bg1_origin_x=this.win_size.width/2,this.bg2_origin_x=3*this.bg1_origin_x,this.bg1_origin_y=this.win_size.height/2,this.ndBg1_2.setPosition(this.bg2_origin_x,this.bg1_origin_y,0),this.cur_bg1=this.ndBg1_1,this.cur_bg2=this.ndBg1_2,this.cur_bg1_x=this.bg1_origin_x,this.cur_bg2_x=this.bg2_origin_x,this.cur_bg3_x=-this.bg1_origin_x}},{key:"start",value:function(){}},{key:"jumpPlay",value:function(i){var t=i.getPosition(),e=i.getPosition();e.y+=50,b(i).to(.33,{scale:new y(1.1,.5,1)}).to(.33,{scale:new y(1,1,1),position:e}).to(.66,{scale:new y(1,1,1),position:t}).start()}},{key:"updateBg1",value:function(i){if(this.cur_bg1_x-=this.bg1_speed*i,this.cur_bg2_x-=this.bg1_speed*i,this.cur_bg1_x<-this.bg1_origin_x){this.cur_bg1_x=this.bg1_origin_x,this.cur_bg2_x=this.bg2_origin_x;var t=this.cur_bg1;this.cur_bg1=this.cur_bg2,this.cur_bg2=t}this.cur_bg1.setPosition(this.cur_bg1_x,this.bg1_origin_y,0),this.cur_bg2.setPosition(this.cur_bg2_x,this.bg1_origin_y,0)}},{key:"updateBg3",value:function(i){this.cur_bg3_x+=this.bg3_speed*i,this.cur_bg3_x<-this.bg1_origin_x-75?(this.bg3_speed=20,this.cur_bg3_x=-this.bg1_origin_x-75):this.cur_bg3_x>-this.bg1_origin_x&&(this.bg3_speed=-20,this.cur_bg3_x=-this.bg1_origin_x);var t=-this.bg1_origin_x-this.cur_bg3_x;this.ndBg3.setPosition(this.cur_bg3_x,-100,0),this.spBg3.color.set(255,255,255,255-t/75*135)}},{key:"updateJump",value:function(i){this.jump1_duration-=i,this.jump2_duration-=i,this.jump1_duration<=0&&(this.jumpPlay(this.ndC1),this.jump1_duration=3),this.jump2_duration<=0&&(this.jumpPlay(this.ndC2),this.jump2_duration=3)}},{key:"update",value:function(i){this.updateBg1(i),this.updateBg3(i),this.updateJump(i)}}]),t}(x)).prototype,"ndBg1_1",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(P.prototype,"ndBg1_2",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(P.prototype,"ndBg3",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(P.prototype,"spBg3",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(P.prototype,"ndC1",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(P.prototype,"ndC2",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=P))||j)),c._RF.pop()}}}));

System.register("chunks:///UI/resultUI.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Const.js"],(function(t,e){var n,s,a,i,u,o,r,c,l,p,f,h,m;return t({_dec:void 0,_class:void 0}),{setters:[function(t){n=t.inherits,s=t.createClass,a=t.classCallCheck,i=t.possibleConstructorReturn,u=t.getPrototypeOf},function(t){o=t.cclegacy,r=t._decorator,c=t.Animation,l=t.Component},function(t){p=t.log}],execute:function(){o._RF.push({},"8f98aNhGdlEqY/iWb0VOzE3","resultUI",void 0),m=r.ccclass,r.property,t("ResultUI",(f=m("ResultUI"),f(h=function(t){function e(){return a(this,e),i(this,u(e).apply(this,arguments))}return n(e,t),s(e,[{key:"start",value:function(){this.anima=this.node.getComponent(c),p("anima: ",this.anima),p("parent: ",this.node.getParent()),this.anima.defaultClip.events.push({frame:1,func:"test",params:[]}),this.anima.defaultClip.updateEventDatas()}},{key:"test",value:function(){var t=this;this.anima.pause(),setTimeout((function(){t.anima.resume()}),1e3)}},{key:"mvpAnimaEnd",value:function(){}}]),e}(l))||h)),o._RF.pop()}}}));

System.register("chunks:///_virtual/prerequisite-imports:main",["../Box.js","../Config.js","../Const.js","../DeployInfo.js","../quan.js","../Player.js","../Util.js","../SDK.js","../UI/Dialog/Dialog.js","../UI/Board/BaseBoard.js","../UI/Board/WaitLoverBoard.js","../OtherPlayer.js","../UI/avatar.js","../UI/Board/GamingBoard.js","../UI/Dialog/RulesDialog.js","../UI/Board/MainBoard.js","../UI/Board/MatchingBoard.js","../UI/Board/ResultBoard.js","../UI/highLightMask.js","../UI/Board/TeachingBoard.js","../UI/toast.js","../UI/loadingBar.js","../GameManager.js","../Interface.js","../UI/loading.js","../UI/resultUI.js"],(function(n,o){return{setters:[function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/Scripts/Box.js', 'chunks:///Box.js');
  r('project:///assets/Scripts/Config.js', 'chunks:///Config.js');
  r('project:///assets/Scripts/Const.js', 'chunks:///Const.js');
  r('project:///assets/Scripts/DeployInfo.js', 'chunks:///DeployInfo.js');
  r('project:///assets/Scripts/quan.js', 'chunks:///quan.js');
  r('project:///assets/Scripts/Player.js', 'chunks:///Player.js');
  r('project:///assets/Scripts/Util.js', 'chunks:///Util.js');
  r('project:///assets/Scripts/SDK.js', 'chunks:///SDK.js');
  r('project:///assets/Scripts/UI/Dialog/Dialog.js', 'chunks:///UI/Dialog/Dialog.js');
  r('project:///assets/Scripts/UI/Board/BaseBoard.js', 'chunks:///UI/Board/BaseBoard.js');
  r('project:///assets/Scripts/UI/Board/WaitLoverBoard.js', 'chunks:///UI/Board/WaitLoverBoard.js');
  r('project:///assets/Scripts/OtherPlayer.js', 'chunks:///OtherPlayer.js');
  r('project:///assets/Scripts/UI/avatar.js', 'chunks:///UI/avatar.js');
  r('project:///assets/Scripts/UI/Board/GamingBoard.js', 'chunks:///UI/Board/GamingBoard.js');
  r('project:///assets/Scripts/UI/Dialog/RulesDialog.js', 'chunks:///UI/Dialog/RulesDialog.js');
  r('project:///assets/Scripts/UI/Board/MainBoard.js', 'chunks:///UI/Board/MainBoard.js');
  r('project:///assets/Scripts/UI/Board/MatchingBoard.js', 'chunks:///UI/Board/MatchingBoard.js');
  r('project:///assets/Scripts/UI/Board/ResultBoard.js', 'chunks:///UI/Board/ResultBoard.js');
  r('project:///assets/Scripts/UI/highLightMask.js', 'chunks:///UI/highLightMask.js');
  r('project:///assets/Scripts/UI/Board/TeachingBoard.js', 'chunks:///UI/Board/TeachingBoard.js');
  r('project:///assets/Scripts/UI/toast.js', 'chunks:///UI/toast.js');
  r('project:///assets/Scripts/UI/loadingBar.js', 'chunks:///UI/loadingBar.js');
  r('project:///assets/Scripts/GameManager.js', 'chunks:///GameManager.js');
  r('project:///assets/Scripts/Interface.js', 'chunks:///Interface.js');
  r('project:///assets/Scripts/UI/loading.js', 'chunks:///UI/loading.js');
  r('project:///assets/Scripts/UI/resultUI.js', 'chunks:///UI/resultUI.js');
  r('virtual:///prerequisite-imports:main', 'chunks:///_virtual/prerequisite-imports:main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    var _m;
    return {
        setters: [function(m) { _m = m; }],
        execute: function () { _export(_m); }
    };
    });
});
} }; });